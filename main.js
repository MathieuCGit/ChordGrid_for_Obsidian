/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChordGridPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ChordGridPlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("Loading Chord Grid plugin");
    this.registerMarkdownCodeBlockProcessor("chordgrid", (source, el, ctx) => {
      this.renderChordGrid(source, el);
    });
  }
  /**
   * Parse chord grid text into structured data
   */
  parseChordGrid(source) {
    const lines = source.trim().split("\n");
    let timeSignature = "4/4";
    const measures = [];
    for (const line of lines) {
      const trimmed = line.trim();
      if (!trimmed)
        continue;
      if (measures.length === 0) {
        const timeSigMatch = trimmed.match(/^(\d+\/\d+)/);
        if (timeSigMatch) {
          timeSignature = timeSigMatch[1];
        }
      }
      const tokens = this.tokenizeLine(trimmed);
      let currentMeasure = { chords: [], hasBarLine: false };
      let isRepeatStart = false;
      let isRepeatEnd = false;
      for (const token of tokens) {
        if (token.type === "repeatStart") {
          isRepeatStart = true;
        } else if (token.type === "repeatEnd") {
          isRepeatEnd = true;
        } else if (token.type === "barLine") {
          if (currentMeasure.chords.length > 0) {
            currentMeasure.hasBarLine = true;
            currentMeasure.isRepeatEnd = isRepeatEnd;
            measures.push(currentMeasure);
            currentMeasure = {
              chords: [],
              hasBarLine: false,
              isRepeatStart: false
            };
            isRepeatEnd = false;
          }
        } else if (token.type === "chord") {
          currentMeasure.chords.push({
            chord: token.chord,
            beats: token.beats,
            rawRhythm: token.rhythm
          });
        }
      }
      if (currentMeasure.chords.length > 0) {
        currentMeasure.isRepeatEnd = isRepeatEnd;
        measures.push(currentMeasure);
      }
      if (measures.length > 0 && isRepeatStart) {
        measures[0].isRepeatStart = true;
      }
      if (lines.length > 1 && line !== lines[lines.length - 1]) {
        measures.push({ chords: [], hasBarLine: false, isLineBreak: true });
      }
    }
    return { timeSignature, measures };
  }
  /**
   * Tokenize a line into meaningful tokens with proper tie handling
   */
  tokenizeLine(line) {
    const tokens = [];
    let remaining = line.replace(/^\d+\/\d+\s*/, "");
    while (remaining.length > 0) {
      remaining = remaining.trim();
      if (remaining.startsWith("||:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(3);
        continue;
      } else if (remaining.startsWith("|:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith(":||")) {
        tokens.push({ type: "repeatEnd" });
        remaining = remaining.substring(3);
        continue;
      }
      if (remaining.startsWith("||")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith("|")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(1);
        continue;
      }
      const chordMatch = remaining.match(/^([A-G][#b]?(?:maj|min|m|dim|aug|sus|[0-9])*)\[([0-9._\s]+)\]/);
      if (chordMatch) {
        const chord = chordMatch[1];
        const rhythm = chordMatch[2];
        const beats = [];
        const rhythmTokens = rhythm.split(/\s+/).filter((r) => r.length > 0);
        for (const token of rhythmTokens) {
          const notes = [];
          let i = 0;
          let isTied = false;
          while (i < token.length) {
            const ch = token[i];
            if (ch === "_" && notes.length === 0) {
              isTied = true;
              i++;
              continue;
            }
            const next = (offset = 1) => token[i + offset] || "";
            let noteValue = null;
            let dotted = false;
            let charsConsumed = 0;
            if (ch === "6" && next(1) === "4") {
              noteValue = 64;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "3" && next(1) === "2") {
              noteValue = 32;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "1" && next(1) === "6") {
              noteValue = 16;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "8" || ch === "4" || ch === "2" || ch === "1") {
              noteValue = parseInt(ch, 10);
              charsConsumed = 1;
              if (token[i + 1] === ".") {
                dotted = true;
                charsConsumed = 2;
              }
            } else if (ch === "_") {
              if (notes.length > 0) {
                notes[notes.length - 1].tied = true;
              }
              i++;
              continue;
            } else {
              i += 1;
              continue;
            }
            if (noteValue !== null) {
              notes.push({ value: noteValue, dotted, tied: isTied });
              isTied = false;
              i += charsConsumed;
            }
          }
          if (notes.length > 0) {
            beats.push({ notes });
          }
        }
        tokens.push({ type: "chord", chord, beats, rhythm });
        remaining = remaining.substring(chordMatch[0].length);
        continue;
      }
      remaining = remaining.substring(1);
    }
    return tokens;
  }
  /**
   * Render chord grid from source text into container element
   */
  renderChordGrid(source, container) {
    const grid = this.parseChordGrid(source);
    const svg = this.createSVG(grid);
    container.empty();
    container.appendChild(svg);
  }
  /**
   * Create SVG element for the entire chord grid
   */
  createSVG(grid) {
    const measuresPerLine = 4;
    const measureWidth = 200;
    const measureHeight = 120;
    let currentLine = 0;
    let measuresInCurrentLine = 0;
    const measurePositions = [];
    grid.measures.forEach((measure, index) => {
      if (measure.isLineBreak) {
        currentLine++;
        measuresInCurrentLine = 0;
        return;
      }
      if (measuresInCurrentLine >= measuresPerLine) {
        currentLine++;
        measuresInCurrentLine = 0;
      }
      measurePositions.push({
        measure,
        lineIndex: currentLine,
        posInLine: measuresInCurrentLine
      });
      measuresInCurrentLine++;
    });
    const lines = currentLine + 1;
    const width = measuresPerLine * measureWidth + 60;
    const height = lines * (measureHeight + 20) + 20;
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", width.toString());
    svg.setAttribute("height", height.toString());
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg.style.background = "#ffffff";
    const timeSigText = this.createText(grid.timeSignature, 10, 40, "18px", "bold");
    svg.appendChild(timeSigText);
    const notePositions = [];
    measurePositions.forEach(({ measure, lineIndex, posInLine }, measureIndex) => {
      const x = posInLine * measureWidth + 40;
      const y = lineIndex * (measureHeight + 20) + 20;
      this.drawMeasure(svg, measure, x, y, measureWidth, measureHeight, measureIndex, notePositions);
    });
    this.detectAndDrawTies(svg, notePositions, grid);
    return svg;
  }
  /**
   * Detect and draw ties based on note positions and grid structure
   */
  detectAndDrawTies(svg, notePositions, grid) {
    const ties = [];
    for (let i = 0; i < notePositions.length - 1; i++) {
      const currentNote = notePositions[i];
      const nextNote = notePositions[i + 1];
      if (currentNote.tied && currentNote.measureIndex === nextNote.measureIndex && currentNote.chordIndex === nextNote.chordIndex) {
        ties.push({
          startX: currentNote.x,
          startY: currentNote.y - 15,
          endX: nextNote.x,
          endY: nextNote.y - 15,
          type: "internal"
        });
      }
    }
    for (let i = 0; i < notePositions.length - 1; i++) {
      const currentNote = notePositions[i];
      const nextNote = notePositions[i + 1];
      if (currentNote.tied && currentNote.measureIndex !== nextNote.measureIndex && nextNote.measureIndex === currentNote.measureIndex + 1) {
        ties.push({
          startX: currentNote.x,
          startY: currentNote.y - 15,
          endX: nextNote.x,
          endY: nextNote.y - 15,
          type: "cross-measure"
        });
      }
    }
    ties.forEach((tie) => {
      this.drawTie(svg, tie);
    });
  }
  /**
   * Draw a tie
   */
  drawTie(svg, tie) {
    const tieElement = document.createElementNS("http://www.w3.org/2000/svg", "path");
    const controlY = tie.startY - 8;
    tieElement.setAttribute("d", `M ${tie.startX} ${tie.startY} Q ${(tie.startX + tie.endX) / 2} ${controlY} ${tie.endX} ${tie.endY}`);
    tieElement.setAttribute("stroke", "#000");
    tieElement.setAttribute("stroke-width", "1.5");
    tieElement.setAttribute("fill", "none");
    svg.appendChild(tieElement);
  }
  /**
   * Draw a single measure with chord, rhythm, and bar lines
   */
  drawMeasure(svg, measure, x, y, width, height, measureIndex, notePositions) {
    if (measure.isRepeatStart) {
      this.drawRepeatBar(svg, x, y, height, true);
    } else {
      this.drawBar(svg, x, y, height);
    }
    const staffLineY = y + 80;
    const staffLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    staffLine.setAttribute("x1", (x + 10).toString());
    staffLine.setAttribute("y1", staffLineY.toString());
    staffLine.setAttribute("x2", (x + width - 10).toString());
    staffLine.setAttribute("y2", staffLineY.toString());
    staffLine.setAttribute("stroke", "#000");
    staffLine.setAttribute("stroke-width", "1");
    svg.appendChild(staffLine);
    const chordWidth = width / Math.max(measure.chords.length, 1);
    measure.chords.forEach((chordData, chordIndex) => {
      const chordX = x + chordIndex * chordWidth + 10;
      const firstNoteX = this.drawRhythm(svg, chordData, chordX, staffLineY, chordWidth - 20, measureIndex, chordIndex, notePositions);
      if (firstNoteX !== null) {
        const chordText = this.createText(chordData.chord, firstNoteX, y + 40, "24px", "bold");
        chordText.setAttribute("text-anchor", "middle");
        svg.appendChild(chordText);
      }
    });
    const rightBarX = x + width - 2;
    if (measure.hasBarLine || measure.isRepeatEnd) {
      if (measure.isRepeatEnd) {
        this.drawRepeatBar(svg, rightBarX, y, height, false);
      } else {
        this.drawBar(svg, rightBarX, y, height);
      }
    }
  }
  /**
   * Draw rhythm pattern for a chord and return the x position of the first note
   */
  drawRhythm(svg, chordData, x, staffLineY, width, measureIndex, chordIndex, notePositions) {
    const beats = chordData.beats;
    const beatWidth = beats.length > 0 ? width / beats.length : width;
    let currentX = x;
    let firstNoteX = null;
    beats.forEach((beat, beatIndex) => {
      const firstNoteInBeatX = this.drawBeat(svg, beat, currentX, staffLineY, beatWidth, measureIndex, chordIndex, beatIndex, notePositions);
      if (beatIndex === 0 && firstNoteInBeatX !== null) {
        firstNoteX = firstNoteInBeatX;
      }
      currentX += beatWidth;
    });
    return firstNoteX;
  }
  /**
   * Draw a single beat - handles both single notes and beamed groups
   */
  drawBeat(svg, beat, x, staffLineY, width, measureIndex, chordIndex, beatIndex, notePositions) {
    if (beat.notes.length === 1) {
      const nv = beat.notes[0];
      const noteX = this.drawSingleNote(svg, nv, x, staffLineY, width);
      notePositions.push({
        x: noteX,
        y: staffLineY,
        measureIndex,
        chordIndex,
        beatIndex,
        noteIndex: 0,
        tied: nv.tied || false
      });
      return noteX;
    } else {
      const firstNoteX = this.drawNoteGroup(svg, beat.notes, x, staffLineY, width);
      beat.notes.forEach((nv, noteIndex) => {
        const noteX = x + noteIndex * (width / beat.notes.length) + width / beat.notes.length / 2;
        notePositions.push({
          x: noteX,
          y: staffLineY,
          measureIndex,
          chordIndex,
          beatIndex,
          noteIndex,
          tied: nv.tied || false
        });
      });
      return firstNoteX;
    }
  }
  /**
   * Draw a single note with slash and stem
   */
  drawSingleNote(svg, nv, x, staffLineY, width) {
    const centerX = x + width / 2;
    this.drawSlash(svg, centerX, staffLineY);
    if (nv.value >= 2 && nv.value !== 1) {
      this.drawStem(svg, centerX, staffLineY, 25);
    }
    if (nv.value === 8) {
      this.drawFlag(svg, centerX, staffLineY, 1);
    } else if (nv.value === 16) {
      this.drawFlag(svg, centerX, staffLineY, 2);
    } else if (nv.value === 32) {
      this.drawFlag(svg, centerX, staffLineY, 3);
    } else if (nv.value === 64) {
      this.drawFlag(svg, centerX, staffLineY, 4);
    }
    if (nv.dotted) {
      const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      dot.setAttribute("cx", (centerX + 8).toString());
      dot.setAttribute("cy", staffLineY.toString());
      dot.setAttribute("r", "2");
      dot.setAttribute("fill", "#000");
      svg.appendChild(dot);
    }
    return centerX;
  }
  /**
   * Draw a group of notes with proper beaming, including nested beam segments for mixed durations
   */
  drawNoteGroup(svg, notesValues, x, staffLineY, width) {
    const noteCount = notesValues.length;
    const hasSmallNotes = notesValues.some((nv) => nv.value >= 32);
    const noteSpacing = noteCount > 0 ? width / noteCount * (hasSmallNotes ? 1.2 : 1) : width;
    const stemHeight = 25;
    const notes = [];
    for (let i = 0; i < noteCount; i++) {
      const nv = notesValues[i];
      const centerX = x + i * noteSpacing + noteSpacing / 2;
      const beamCount = nv.value === 8 ? 1 : nv.value === 16 ? 2 : nv.value === 32 ? 3 : nv.value === 64 ? 4 : 0;
      this.drawSlash(svg, centerX, staffLineY);
      const stemInfo = this.drawStem(svg, centerX, staffLineY, stemHeight);
      notes.push({ nv, beamCount, centerX, stemX: stemInfo.x, stemTopY: stemInfo.topY, stemBottomY: stemInfo.bottomY });
      if (nv.dotted) {
        const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        dot.setAttribute("cx", (centerX + 8).toString());
        dot.setAttribute("cy", staffLineY.toString());
        dot.setAttribute("r", "2");
        dot.setAttribute("fill", "#000");
        svg.appendChild(dot);
      }
    }
    const maxBeamCount = notes.reduce((m, n) => Math.max(m, n.beamCount), 0);
    if (maxBeamCount === 0)
      return notes.length ? notes[0].centerX : null;
    const beamGap = 5;
    const validStemBottoms = notes.map((n) => n.stemBottomY).filter((y) => y !== void 0);
    const baseStemBottom = validStemBottoms.length > 0 ? Math.min(...validStemBottoms) : staffLineY + 30;
    for (let level = 1; level <= maxBeamCount; level++) {
      let segStartIndex = null;
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const active = n.beamCount >= level;
        if (active && segStartIndex === null) {
          segStartIndex = i;
        } else if ((!active || i === notes.length - 1) && segStartIndex !== null) {
          const segEnd = active && i === notes.length - 1 ? i : i - 1;
          const beamY = baseStemBottom - (level - 1) * beamGap;
          const startX = notes[segStartIndex].stemX;
          const endX = notes[segEnd].stemX;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", startX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", endX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
          segStartIndex = null;
        }
      }
      const stubLength = Math.max(8, noteSpacing * 0.4);
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const hasLevel = n.beamCount >= level;
        if (!hasLevel)
          continue;
        const leftBeamCount = i - 1 >= 0 ? notes[i - 1].beamCount : 0;
        const rightBeamCount = i + 1 < notes.length ? notes[i + 1].beamCount : 0;
        const leftHasLevel = leftBeamCount >= level;
        const rightHasLevel = rightBeamCount >= level;
        if (leftHasLevel && rightHasLevel)
          continue;
        if (!leftHasLevel && !rightHasLevel) {
          const beamY2 = baseStemBottom - (level - 1) * beamGap;
          const stemX2 = n.stemX;
          const leftNote = i > 0 ? notes[i - 1] : null;
          const isAfterDottedStronger = leftNote && leftNote.nv.dotted && leftNote.nv.value < n.nv.value;
          const rightNote = i < notes.length - 1 ? notes[i + 1] : null;
          const isBeforeDottedWeaker = rightNote && rightNote.nv.dotted && n.nv.value < rightNote.nv.value;
          if (isAfterDottedStronger && i > 0) {
            const stubX = stemX2 - stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          } else if (i < notes.length - 1) {
            const stubX = stemX2 + stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          } else if (i > 0) {
            const stubX = stemX2 - stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          }
          continue;
        }
        const beamY = baseStemBottom - (level - 1) * beamGap;
        const stemX = n.stemX;
        if (leftHasLevel && !rightHasLevel && i > 0) {
          const stubX = stemX - stubLength;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", stemX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", stubX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
        }
        if (!leftHasLevel && rightHasLevel && i < notes.length - 1) {
          const stubX = stemX + stubLength;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", stemX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", stubX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
        }
      }
    }
    return notes.length ? notes[0].centerX : null;
  }
  /**
   * Draw a slash at 45Â° angle (top-RIGHT to bottom-LEFT - proper slash direction)
   */
  drawSlash(svg, x, y) {
    const slashLength = 10;
    const slash = document.createElementNS("http://www.w3.org/2000/svg", "line");
    slash.setAttribute("x1", (x + slashLength / 2).toString());
    slash.setAttribute("y1", (y - slashLength / 2).toString());
    slash.setAttribute("x2", (x - slashLength / 2).toString());
    slash.setAttribute("y2", (y + slashLength / 2).toString());
    slash.setAttribute("stroke", "#000");
    slash.setAttribute("stroke-width", "3");
    svg.appendChild(slash);
  }
  /**
   * Draw a stem for a note - ATTACHED TO BOTTOM OF SLASH
   */
  drawStem(svg, x, y, height) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemStartY = y + slashLength / 2;
    const stem = document.createElementNS("http://www.w3.org/2000/svg", "line");
    stem.setAttribute("x1", stemStartX.toString());
    stem.setAttribute("y1", stemStartY.toString());
    stem.setAttribute("x2", stemStartX.toString());
    stem.setAttribute("y2", (stemStartY + height).toString());
    stem.setAttribute("stroke", "#000");
    stem.setAttribute("stroke-width", "2");
    svg.appendChild(stem);
    return { x: stemStartX, topY: stemStartY, bottomY: stemStartY + height };
  }
  /**
   * Draw flag(s) for a note (for isolated short notes)
   */
  drawFlag(svg, x, staffLineY, count) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemBottomY = staffLineY + slashLength / 2 + 25;
    for (let i = 0; i < count; i++) {
      const flag = document.createElementNS("http://www.w3.org/2000/svg", "path");
      const flagY = stemBottomY - i * 10;
      flag.setAttribute("d", `M ${stemStartX} ${flagY} Q ${stemStartX - 10} ${flagY - 5} ${stemStartX - 8} ${flagY - 12}`);
      flag.setAttribute("stroke", "#000");
      flag.setAttribute("stroke-width", "2");
      flag.setAttribute("fill", "none");
      svg.appendChild(flag);
    }
  }
  /**
   * Draw a simple bar line
   */
  drawBar(svg, x, y, height) {
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", x.toString());
    line.setAttribute("y1", y.toString());
    line.setAttribute("x2", x.toString());
    line.setAttribute("y2", (y + height).toString());
    line.setAttribute("stroke", "#000");
    line.setAttribute("stroke-width", "2");
    svg.appendChild(line);
  }
  /**
   * Draw repeat bar with dots
   */
  drawRepeatBar(svg, x, y, height, isStart) {
    const offset = isStart ? 0 : -6;
    const barX = x + offset;
    this.drawBar(svg, barX, y, height);
    this.drawBar(svg, barX + 4, y, height);
    const dotOffset = isStart ? 10 : -10;
    const dot1Y = y + height * 0.35;
    const dot2Y = y + height * 0.65;
    [dot1Y, dot2Y].forEach((dotY) => {
      const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", (x + dotOffset).toString());
      circle.setAttribute("cy", dotY.toString());
      circle.setAttribute("r", "3");
      circle.setAttribute("fill", "#000");
      svg.appendChild(circle);
    });
  }
  /**
   * Utility function to create text elements
   */
  createText(text, x, y, size, weight = "normal") {
    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
    textEl.setAttribute("x", x.toString());
    textEl.setAttribute("y", y.toString());
    textEl.setAttribute("font-family", "Arial, sans-serif");
    textEl.setAttribute("font-size", size);
    textEl.setAttribute("font-weight", weight);
    textEl.setAttribute("fill", "#000");
    textEl.textContent = text;
    return textEl;
  }
  onunload() {
    console.log("Unloading Chord Grid plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBJbnRlcmZhY2UgZGVmaW5pdGlvbnMgZm9yIG91ciBkYXRhIHN0cnVjdHVyZXNcbmludGVyZmFjZSBOb3RlVmFsdWUge1xuICB2YWx1ZTogbnVtYmVyOyAgICAgICAgLy8gMSwyLDQsOCwxNiwzMi4uLlxuICBkb3R0ZWQ/OiBib29sZWFuOyAgICAgLy8gd2hldGhlciB0aGlzIHNwZWNpZmljIG5vdGUgaXMgZG90dGVkXG4gIHRpZWQ/OiBib29sZWFuOyAgICAgICAvLyB3aGV0aGVyIHRoaXMgbm90ZSBpcyB0aWVkIHRvIHRoZSBwcmV2aW91cyBvbmVcbn1cblxuaW50ZXJmYWNlIEJlYXQge1xuICBub3RlczogTm90ZVZhbHVlW107IC8vIExpc3Qgb2Ygcmh5dGhtaWMgdmFsdWVzICg4LCA0LCAyLCAxLCBldGMuKSB3aXRoIG9wdGlvbmFsIGRvdHRlZCBmbGFnXG59XG5cbmludGVyZmFjZSBDaG9yZEluTWVhc3VyZSB7XG4gIGNob3JkOiBzdHJpbmc7XG4gIGJlYXRzOiBCZWF0W107XG4gIHJhd1JoeXRobTogc3RyaW5nOyAvLyBTdG9yZSBvcmlnaW5hbCByaHl0aG0gc3RyaW5nIGZvciB0aWUgZGV0ZWN0aW9uXG59XG5cbmludGVyZmFjZSBNZWFzdXJlIHtcbiAgY2hvcmRzOiBDaG9yZEluTWVhc3VyZVtdO1xuICBpc1JlcGVhdFN0YXJ0PzogYm9vbGVhbjtcbiAgaXNSZXBlYXRFbmQ/OiBib29sZWFuO1xuICBoYXNCYXJMaW5lPzogYm9vbGVhbjtcbiAgaXNMaW5lQnJlYWs/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgQ2hvcmRHcmlkIHtcbiAgdGltZVNpZ25hdHVyZTogc3RyaW5nO1xuICBtZWFzdXJlczogTWVhc3VyZVtdO1xufVxuXG5pbnRlcmZhY2UgVGllUG9zaXRpb24ge1xuICBzdGFydFg6IG51bWJlcjtcbiAgc3RhcnRZOiBudW1iZXI7XG4gIGVuZFg6IG51bWJlcjtcbiAgZW5kWTogbnVtYmVyO1xuICB0eXBlOiAnaW50ZXJuYWwnIHwgJ2Nyb3NzLW1lYXN1cmUnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaG9yZEdyaWRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgQ2hvcmQgR3JpZCBwbHVnaW4nKTtcblxuICAgIC8vIFJlZ2lzdGVyIG1hcmtkb3duIGNvZGUgYmxvY2sgcHJvY2Vzc29yIGZvciAnY2hvcmRncmlkJyBibG9ja3NcbiAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoJ2Nob3JkZ3JpZCcsIChzb3VyY2UsIGVsLCBjdHgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyQ2hvcmRHcmlkKHNvdXJjZSwgZWwpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNob3JkIGdyaWQgdGV4dCBpbnRvIHN0cnVjdHVyZWQgZGF0YVxuICAgKi9cbiAgcGFyc2VDaG9yZEdyaWQoc291cmNlOiBzdHJpbmcpOiBDaG9yZEdyaWQge1xuICAgIGNvbnN0IGxpbmVzID0gc291cmNlLnRyaW0oKS5zcGxpdCgnXFxuJyk7XG4gICAgbGV0IHRpbWVTaWduYXR1cmUgPSAnNC80JztcbiAgICBjb25zdCBtZWFzdXJlczogTWVhc3VyZVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgIGlmICghdHJpbW1lZCkgY29udGludWU7XG5cbiAgICAgIC8vIFBhcnNlIHRpbWUgc2lnbmF0dXJlIChvbmx5IGZyb20gZmlyc3QgbGluZSlcbiAgICAgIGlmIChtZWFzdXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgdGltZVNpZ01hdGNoID0gdHJpbW1lZC5tYXRjaCgvXihcXGQrXFwvXFxkKykvKTtcbiAgICAgICAgaWYgKHRpbWVTaWdNYXRjaCkge1xuICAgICAgICAgIHRpbWVTaWduYXR1cmUgPSB0aW1lU2lnTWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGFyc2UgY2hvcmRzIGludG8gbWVhc3VyZXMgYmFzZWQgb24gYmFyIGxpbmVzXG4gICAgICBjb25zdCB0b2tlbnMgPSB0aGlzLnRva2VuaXplTGluZSh0cmltbWVkKTtcbiAgICAgIGxldCBjdXJyZW50TWVhc3VyZTogTWVhc3VyZSA9IHsgY2hvcmRzOiBbXSwgaGFzQmFyTGluZTogZmFsc2UgfTtcbiAgICAgIGxldCBpc1JlcGVhdFN0YXJ0ID0gZmFsc2U7XG4gICAgICBsZXQgaXNSZXBlYXRFbmQgPSBmYWxzZTtcblxuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdyZXBlYXRTdGFydCcpIHtcbiAgICAgICAgICBpc1JlcGVhdFN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09PSAncmVwZWF0RW5kJykge1xuICAgICAgICAgIGlzUmVwZWF0RW5kID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09PSAnYmFyTGluZScpIHtcbiAgICAgICAgICAvLyBCYXIgbGluZSBtZWFucyB3ZSBmaW5hbGl6ZSB0aGUgY3VycmVudCBtZWFzdXJlIGFuZCBzdGFydCBhIG5ldyBvbmVcbiAgICAgICAgICBpZiAoY3VycmVudE1lYXN1cmUuY2hvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlLmhhc0JhckxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgY3VycmVudE1lYXN1cmUuaXNSZXBlYXRFbmQgPSBpc1JlcGVhdEVuZDtcbiAgICAgICAgICAgIG1lYXN1cmVzLnB1c2goY3VycmVudE1lYXN1cmUpO1xuICAgICAgICAgICAgLy8gU3RhcnQgYSBuZXcgbWVhc3VyZVxuICAgICAgICAgICAgY3VycmVudE1lYXN1cmUgPSB7IFxuICAgICAgICAgICAgICBjaG9yZHM6IFtdLCBcbiAgICAgICAgICAgICAgaGFzQmFyTGluZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUmVwZWF0U3RhcnQ6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaXNSZXBlYXRFbmQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gJ2Nob3JkJykge1xuICAgICAgICAgIC8vIEFkZCBjaG9yZCB0byBjdXJyZW50IG1lYXN1cmVcbiAgICAgICAgICBjdXJyZW50TWVhc3VyZS5jaG9yZHMucHVzaCh7XG4gICAgICAgICAgICBjaG9yZDogdG9rZW4uY2hvcmQhLFxuICAgICAgICAgICAgYmVhdHM6IHRva2VuLmJlYXRzISxcbiAgICAgICAgICAgIHJhd1JoeXRobTogdG9rZW4ucmh5dGhtIVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IGZvcmdldCB0aGUgbGFzdCBtZWFzdXJlXG4gICAgICBpZiAoY3VycmVudE1lYXN1cmUuY2hvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY3VycmVudE1lYXN1cmUuaXNSZXBlYXRFbmQgPSBpc1JlcGVhdEVuZDtcbiAgICAgICAgbWVhc3VyZXMucHVzaChjdXJyZW50TWVhc3VyZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHJlcGVhdCBzdGFydCB0byB0aGUgRklSU1QgbWVhc3VyZSBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKG1lYXN1cmVzLmxlbmd0aCA+IDAgJiYgaXNSZXBlYXRTdGFydCkge1xuICAgICAgICBtZWFzdXJlc1swXS5pc1JlcGVhdFN0YXJ0ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGxpbmUgYnJlYWsgbWFya2VyIGlmIHRoZXJlIGFyZSBtb3JlIGxpbmVzXG4gICAgICBpZiAobGluZXMubGVuZ3RoID4gMSAmJiBsaW5lICE9PSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSkge1xuICAgICAgICBtZWFzdXJlcy5wdXNoKHsgY2hvcmRzOiBbXSwgaGFzQmFyTGluZTogZmFsc2UsIGlzTGluZUJyZWFrOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHRpbWVTaWduYXR1cmUsIG1lYXN1cmVzIH07XG4gIH1cblxuICAvKipcbiAgICogVG9rZW5pemUgYSBsaW5lIGludG8gbWVhbmluZ2Z1bCB0b2tlbnMgd2l0aCBwcm9wZXIgdGllIGhhbmRsaW5nXG4gICAqL1xuICB0b2tlbml6ZUxpbmUobGluZTogc3RyaW5nKTogQXJyYXk8e3R5cGU6IHN0cmluZywgY2hvcmQ/OiBzdHJpbmcsIGJlYXRzPzogQmVhdFtdLCByaHl0aG0/OiBzdHJpbmd9PiB7XG4gICAgY29uc3QgdG9rZW5zOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W10sIHJoeXRobT86IHN0cmluZ30+ID0gW107XG4gICAgbGV0IHJlbWFpbmluZyA9IGxpbmUucmVwbGFjZSgvXlxcZCtcXC9cXGQrXFxzKi8sICcnKTsgLy8gUmVtb3ZlIHRpbWUgc2lnbmF0dXJlXG4gICAgXG4gICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwKSB7XG4gICAgICByZW1haW5pbmcgPSByZW1haW5pbmcudHJpbSgpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgcmVwZWF0IG1hcmtlcnNcbiAgICAgIGlmIChyZW1haW5pbmcuc3RhcnRzV2l0aCgnfHw6JykpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiAncmVwZWF0U3RhcnQnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3w6JykpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiAncmVwZWF0U3RhcnQnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJzp8fCcpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdEVuZCcgfSk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoMyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgYmFyIGxpbmVzXG4gICAgICBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3x8JykpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiAnYmFyTGluZScgfSk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoMik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChyZW1haW5pbmcuc3RhcnRzV2l0aCgnfCcpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ2JhckxpbmUnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDEpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGNob3JkcyAtIGFsbG93IHVuZGVyc2NvcmVzIGZvciB0aWVzXG4gICAgICBjb25zdCBjaG9yZE1hdGNoID0gcmVtYWluaW5nLm1hdGNoKC9eKFtBLUddWyNiXT8oPzptYWp8bWlufG18ZGltfGF1Z3xzdXN8WzAtOV0pKilcXFsoWzAtOS5fXFxzXSspXFxdLyk7XG4gICAgICBpZiAoY2hvcmRNYXRjaCkge1xuICAgICAgICBjb25zdCBjaG9yZCA9IGNob3JkTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHJoeXRobSA9IGNob3JkTWF0Y2hbMl07XG4gICAgICAgIFxuICAgICAgICAvLyBQYXJzZSByaHl0aG0gaW50byBiZWF0cyB3aXRoIHRpZSBkZXRlY3Rpb25cbiAgICAgICAgY29uc3QgYmVhdHM6IEJlYXRbXSA9IFtdO1xuICAgICAgICBjb25zdCByaHl0aG1Ub2tlbnMgPSByaHl0aG0uc3BsaXQoL1xccysvKS5maWx0ZXIociA9PiByLmxlbmd0aCA+IDApO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiByaHl0aG1Ub2tlbnMpIHtcbiAgICAgICAgICBjb25zdCBub3RlczogTm90ZVZhbHVlW10gPSBbXTtcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgbGV0IGlzVGllZCA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIHdoaWxlIChpIDwgdG9rZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjaCA9IHRva2VuW2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgdGllIG1hcmtlciBhdCBzdGFydCBvZiB0b2tlblxuICAgICAgICAgICAgaWYgKGNoID09PSAnXycgJiYgbm90ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGlzVGllZCA9IHRydWU7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSAob2Zmc2V0ID0gMSkgPT4gdG9rZW5baSArIG9mZnNldF0gfHwgJyc7XG5cbiAgICAgICAgICAgIGxldCBub3RlVmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGRvdHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNoYXJzQ29uc3VtZWQgPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBwYXJzZSA2NFxuICAgICAgICAgICAgaWYgKGNoID09PSAnNicgJiYgbmV4dCgxKSA9PT0gJzQnKSB7XG4gICAgICAgICAgICAgIG5vdGVWYWx1ZSA9IDY0O1xuICAgICAgICAgICAgICBjaGFyc0NvbnN1bWVkID0gMjtcbiAgICAgICAgICAgICAgaWYgKHRva2VuW2krMl0gPT09ICcuJykge1xuICAgICAgICAgICAgICAgIGRvdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2hhcnNDb25zdW1lZCA9IDM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHBhcnNlIDMyXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gJzMnICYmIG5leHQoMSkgPT09ICcyJykge1xuICAgICAgICAgICAgICBub3RlVmFsdWUgPSAzMjtcbiAgICAgICAgICAgICAgY2hhcnNDb25zdW1lZCA9IDI7XG4gICAgICAgICAgICAgIGlmICh0b2tlbltpKzJdID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICBkb3R0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwYXJzZSAxNlxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT09ICcxJyAmJiBuZXh0KDEpID09PSAnNicpIHtcbiAgICAgICAgICAgICAgbm90ZVZhbHVlID0gMTY7XG4gICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAyO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baSsyXSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgZG90dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFyc0NvbnN1bWVkID0gMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcGFyc2Ugc2luZ2xlLWRpZ2l0IHZhbHVlczogOCw0LDIsMVxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT09ICc4JyB8fCBjaCA9PT0gJzQnIHx8IGNoID09PSAnMicgfHwgY2ggPT09ICcxJykge1xuICAgICAgICAgICAgICBub3RlVmFsdWUgPSBwYXJzZUludChjaCwgMTApO1xuICAgICAgICAgICAgICBjaGFyc0NvbnN1bWVkID0gMTtcbiAgICAgICAgICAgICAgaWYgKHRva2VuW2krMV0gPT09ICcuJykge1xuICAgICAgICAgICAgICAgIGRvdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2hhcnNDb25zdW1lZCA9IDI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdfJykge1xuICAgICAgICAgICAgICAvLyBJbnRlcm5hbCB0aWUgbWFya2VyIC0gbWFyayB0aGUgcHJldmlvdXMgbm90ZSBhcyB0aWVkXG4gICAgICAgICAgICAgIGlmIChub3Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbm90ZXNbbm90ZXMubGVuZ3RoIC0gMV0udGllZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHNraXAgdW5leHBlY3RlZCBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChub3RlVmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbm90ZXMucHVzaCh7IHZhbHVlOiBub3RlVmFsdWUsIGRvdHRlZCwgdGllZDogaXNUaWVkIH0pO1xuICAgICAgICAgICAgICBpc1RpZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgaSArPSBjaGFyc0NvbnN1bWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChub3Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBiZWF0cy5wdXNoKHsgbm90ZXMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdjaG9yZCcsIGNob3JkLCBiZWF0cywgcmh5dGhtIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKGNob3JkTWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNraXAgdW5rbm93biBjaGFyYWN0ZXJzXG4gICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBjaG9yZCBncmlkIGZyb20gc291cmNlIHRleHQgaW50byBjb250YWluZXIgZWxlbWVudFxuICAgKi9cbiAgcmVuZGVyQ2hvcmRHcmlkKHNvdXJjZTogc3RyaW5nLCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZ3JpZCA9IHRoaXMucGFyc2VDaG9yZEdyaWQoc291cmNlKTtcbiAgICBcbiAgICBjb25zdCBzdmcgPSB0aGlzLmNyZWF0ZVNWRyhncmlkKTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgU1ZHIGVsZW1lbnQgZm9yIHRoZSBlbnRpcmUgY2hvcmQgZ3JpZFxuICAgKi9cbiAgY3JlYXRlU1ZHKGdyaWQ6IENob3JkR3JpZCk6IFNWR0VsZW1lbnQge1xuICAgIGNvbnN0IG1lYXN1cmVzUGVyTGluZSA9IDQ7XG4gICAgY29uc3QgbWVhc3VyZVdpZHRoID0gMjAwO1xuICAgIGNvbnN0IG1lYXN1cmVIZWlnaHQgPSAxMjA7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGxpbmVzIGNvbnNpZGVyaW5nIGxpbmUgYnJlYWtzXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gMDtcbiAgICBsZXQgbWVhc3VyZXNJbkN1cnJlbnRMaW5lID0gMDtcbiAgICBjb25zdCBtZWFzdXJlUG9zaXRpb25zOiB7bWVhc3VyZTogTWVhc3VyZSwgbGluZUluZGV4OiBudW1iZXIsIHBvc0luTGluZTogbnVtYmVyfVtdID0gW107XG4gICAgXG4gICAgZ3JpZC5tZWFzdXJlcy5mb3JFYWNoKChtZWFzdXJlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKG1lYXN1cmUuaXNMaW5lQnJlYWspIHtcbiAgICAgICAgY3VycmVudExpbmUrKztcbiAgICAgICAgbWVhc3VyZXNJbkN1cnJlbnRMaW5lID0gMDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWVhc3VyZXNJbkN1cnJlbnRMaW5lID49IG1lYXN1cmVzUGVyTGluZSkge1xuICAgICAgICBjdXJyZW50TGluZSsrO1xuICAgICAgICBtZWFzdXJlc0luQ3VycmVudExpbmUgPSAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBtZWFzdXJlUG9zaXRpb25zLnB1c2goe1xuICAgICAgICBtZWFzdXJlLFxuICAgICAgICBsaW5lSW5kZXg6IGN1cnJlbnRMaW5lLFxuICAgICAgICBwb3NJbkxpbmU6IG1lYXN1cmVzSW5DdXJyZW50TGluZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1lYXN1cmVzSW5DdXJyZW50TGluZSsrO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbGluZXMgPSBjdXJyZW50TGluZSArIDE7XG4gICAgY29uc3Qgd2lkdGggPSBtZWFzdXJlc1BlckxpbmUgKiBtZWFzdXJlV2lkdGggKyA2MDtcbiAgICBjb25zdCBoZWlnaHQgPSBsaW5lcyAqIChtZWFzdXJlSGVpZ2h0ICsgMjApICsgMjA7XG5cbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGgudG9TdHJpbmcoKSk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWApO1xuICAgIHN2Zy5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmZmZmZmYnO1xuXG4gICAgLy8gRHJhdyB0aW1lIHNpZ25hdHVyZSBhdCB0aGUgYmVnaW5uaW5nXG4gICAgY29uc3QgdGltZVNpZ1RleHQgPSB0aGlzLmNyZWF0ZVRleHQoZ3JpZC50aW1lU2lnbmF0dXJlLCAxMCwgNDAsICcxOHB4JywgJ2JvbGQnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQodGltZVNpZ1RleHQpO1xuXG4gICAgLy8gU3RvcmUgbm90ZSBwb3NpdGlvbnMgZm9yIHRpZSBkZXRlY3Rpb25cbiAgICBjb25zdCBub3RlUG9zaXRpb25zOiB7eDogbnVtYmVyLCB5OiBudW1iZXIsIG1lYXN1cmVJbmRleDogbnVtYmVyLCBjaG9yZEluZGV4OiBudW1iZXIsIGJlYXRJbmRleDogbnVtYmVyLCBub3RlSW5kZXg6IG51bWJlciwgdGllZDogYm9vbGVhbn1bXSA9IFtdO1xuXG4gICAgLy8gRHJhdyBhbGwgbWVhc3VyZXMgYW5kIGNvbGxlY3Qgbm90ZSBwb3NpdGlvbnNcbiAgICBtZWFzdXJlUG9zaXRpb25zLmZvckVhY2goKHttZWFzdXJlLCBsaW5lSW5kZXgsIHBvc0luTGluZX0sIG1lYXN1cmVJbmRleCkgPT4ge1xuICAgICAgY29uc3QgeCA9IHBvc0luTGluZSAqIG1lYXN1cmVXaWR0aCArIDQwO1xuICAgICAgY29uc3QgeSA9IGxpbmVJbmRleCAqIChtZWFzdXJlSGVpZ2h0ICsgMjApICsgMjA7XG5cbiAgICAgIHRoaXMuZHJhd01lYXN1cmUoc3ZnLCBtZWFzdXJlLCB4LCB5LCBtZWFzdXJlV2lkdGgsIG1lYXN1cmVIZWlnaHQsIG1lYXN1cmVJbmRleCwgbm90ZVBvc2l0aW9ucyk7XG4gICAgfSk7XG5cbiAgICAvLyBEZXRlY3QgYW5kIGRyYXcgdGllcyBiYXNlZCBvbiBub3RlIHBvc2l0aW9uc1xuICAgIHRoaXMuZGV0ZWN0QW5kRHJhd1RpZXMoc3ZnLCBub3RlUG9zaXRpb25zLCBncmlkKTtcblxuICAgIHJldHVybiBzdmc7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGFuZCBkcmF3IHRpZXMgYmFzZWQgb24gbm90ZSBwb3NpdGlvbnMgYW5kIGdyaWQgc3RydWN0dXJlXG4gICAqL1xuICBkZXRlY3RBbmREcmF3VGllcyhzdmc6IFNWR0VsZW1lbnQsIG5vdGVQb3NpdGlvbnM6IHt4OiBudW1iZXIsIHk6IG51bWJlciwgbWVhc3VyZUluZGV4OiBudW1iZXIsIGNob3JkSW5kZXg6IG51bWJlciwgYmVhdEluZGV4OiBudW1iZXIsIG5vdGVJbmRleDogbnVtYmVyLCB0aWVkOiBib29sZWFufVtdLCBncmlkOiBDaG9yZEdyaWQpIHtcbiAgICBjb25zdCB0aWVzOiBUaWVQb3NpdGlvbltdID0gW107XG5cbiAgICAvLyBEZXRlY3QgaW50ZXJuYWwgdGllcyAod2l0aGluIHNhbWUgbWVhc3VyZSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vdGVQb3NpdGlvbnMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Tm90ZSA9IG5vdGVQb3NpdGlvbnNbaV07XG4gICAgICBjb25zdCBuZXh0Tm90ZSA9IG5vdGVQb3NpdGlvbnNbaSArIDFdO1xuICAgICAgXG4gICAgICBpZiAoY3VycmVudE5vdGUudGllZCAmJiBcbiAgICAgICAgICBjdXJyZW50Tm90ZS5tZWFzdXJlSW5kZXggPT09IG5leHROb3RlLm1lYXN1cmVJbmRleCAmJlxuICAgICAgICAgIGN1cnJlbnROb3RlLmNob3JkSW5kZXggPT09IG5leHROb3RlLmNob3JkSW5kZXgpIHtcbiAgICAgICAgLy8gSW50ZXJuYWwgdGllIHdpdGhpbiBzYW1lIGNob3JkXG4gICAgICAgIHRpZXMucHVzaCh7XG4gICAgICAgICAgc3RhcnRYOiBjdXJyZW50Tm90ZS54LFxuICAgICAgICAgIHN0YXJ0WTogY3VycmVudE5vdGUueSAtIDE1LFxuICAgICAgICAgIGVuZFg6IG5leHROb3RlLngsXG4gICAgICAgICAgZW5kWTogbmV4dE5vdGUueSAtIDE1LFxuICAgICAgICAgIHR5cGU6ICdpbnRlcm5hbCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IGNyb3NzLW1lYXN1cmUgdGllc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZVBvc2l0aW9ucy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnROb3RlID0gbm90ZVBvc2l0aW9uc1tpXTtcbiAgICAgIGNvbnN0IG5leHROb3RlID0gbm90ZVBvc2l0aW9uc1tpICsgMV07XG4gICAgICBcbiAgICAgIGlmIChjdXJyZW50Tm90ZS50aWVkICYmIFxuICAgICAgICAgIGN1cnJlbnROb3RlLm1lYXN1cmVJbmRleCAhPT0gbmV4dE5vdGUubWVhc3VyZUluZGV4ICYmXG4gICAgICAgICAgbmV4dE5vdGUubWVhc3VyZUluZGV4ID09PSBjdXJyZW50Tm90ZS5tZWFzdXJlSW5kZXggKyAxKSB7XG4gICAgICAgIC8vIENyb3NzLW1lYXN1cmUgdGllXG4gICAgICAgIHRpZXMucHVzaCh7XG4gICAgICAgICAgc3RhcnRYOiBjdXJyZW50Tm90ZS54LFxuICAgICAgICAgIHN0YXJ0WTogY3VycmVudE5vdGUueSAtIDE1LFxuICAgICAgICAgIGVuZFg6IG5leHROb3RlLngsXG4gICAgICAgICAgZW5kWTogbmV4dE5vdGUueSAtIDE1LFxuICAgICAgICAgIHR5cGU6ICdjcm9zcy1tZWFzdXJlJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEcmF3IGFsbCBkZXRlY3RlZCB0aWVzXG4gICAgdGllcy5mb3JFYWNoKHRpZSA9PiB7XG4gICAgICB0aGlzLmRyYXdUaWUoc3ZnLCB0aWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSB0aWVcbiAgICovXG4gIGRyYXdUaWUoc3ZnOiBTVkdFbGVtZW50LCB0aWU6IFRpZVBvc2l0aW9uKSB7XG4gICAgY29uc3QgdGllRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgIGNvbnN0IGNvbnRyb2xZID0gdGllLnN0YXJ0WSAtIDg7XG4gICAgXG4gICAgdGllRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSAke3RpZS5zdGFydFh9ICR7dGllLnN0YXJ0WX0gUSAkeyh0aWUuc3RhcnRYICsgdGllLmVuZFgpIC8gMn0gJHtjb250cm9sWX0gJHt0aWUuZW5kWH0gJHt0aWUuZW5kWX1gKTtcbiAgICB0aWVFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICB0aWVFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzEuNScpO1xuICAgIHRpZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQodGllRWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbmdsZSBtZWFzdXJlIHdpdGggY2hvcmQsIHJoeXRobSwgYW5kIGJhciBsaW5lc1xuICAgKi9cbiAgZHJhd01lYXN1cmUoc3ZnOiBTVkdFbGVtZW50LCBtZWFzdXJlOiBNZWFzdXJlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIG1lYXN1cmVJbmRleDogbnVtYmVyLCBub3RlUG9zaXRpb25zOiB7eDogbnVtYmVyLCB5OiBudW1iZXIsIG1lYXN1cmVJbmRleDogbnVtYmVyLCBjaG9yZEluZGV4OiBudW1iZXIsIGJlYXRJbmRleDogbnVtYmVyLCBub3RlSW5kZXg6IG51bWJlciwgdGllZDogYm9vbGVhbn1bXSkge1xuICAgIC8vIERyYXcgbGVmdCBiYXIgbGluZVxuICAgIGlmIChtZWFzdXJlLmlzUmVwZWF0U3RhcnQpIHtcbiAgICAgIHRoaXMuZHJhd1JlcGVhdEJhcihzdmcsIHgsIHksIGhlaWdodCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHJhd0JhcihzdmcsIHgsIHksIGhlaWdodCk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBzaW5nbGUgc3RhZmYgbGluZVxuICAgIGNvbnN0IHN0YWZmTGluZVkgPSB5ICsgODA7XG4gICAgY29uc3Qgc3RhZmZMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneDEnLCAoeCArIDEwKS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCd5MScsIHN0YWZmTGluZVkudG9TdHJpbmcoKSk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneDInLCAoeCArIHdpZHRoIC0gMTApLnRvU3RyaW5nKCkpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgc3RhZmZMaW5lWS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHN0YWZmTGluZSk7XG5cbiAgICAvLyBEcmF3IGFsbCBjaG9yZHMgaW4gdGhlIG1lYXN1cmVcbiAgICBjb25zdCBjaG9yZFdpZHRoID0gd2lkdGggLyBNYXRoLm1heChtZWFzdXJlLmNob3Jkcy5sZW5ndGgsIDEpO1xuICAgIFxuICAgIG1lYXN1cmUuY2hvcmRzLmZvckVhY2goKGNob3JkRGF0YSwgY2hvcmRJbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2hvcmRYID0geCArIChjaG9yZEluZGV4ICogY2hvcmRXaWR0aCkgKyAxMDtcbiAgICAgIFxuICAgICAgLy8gRHJhdyByaHl0aG0gbm90YXRpb24gZm9yIHRoaXMgY2hvcmQgYW5kIGNvbGxlY3Qgbm90ZSBwb3NpdGlvbnNcbiAgICAgIGNvbnN0IGZpcnN0Tm90ZVggPSB0aGlzLmRyYXdSaHl0aG0oc3ZnLCBjaG9yZERhdGEsIGNob3JkWCwgc3RhZmZMaW5lWSwgY2hvcmRXaWR0aCAtIDIwLCBtZWFzdXJlSW5kZXgsIGNob3JkSW5kZXgsIG5vdGVQb3NpdGlvbnMpO1xuXG4gICAgICAvLyBEcmF3IGNob3JkIG5hbWUgYWJvdmUgdGhlIGZpcnN0IG5vdGVcbiAgICAgIGlmIChmaXJzdE5vdGVYICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNob3JkVGV4dCA9IHRoaXMuY3JlYXRlVGV4dChjaG9yZERhdGEuY2hvcmQsIGZpcnN0Tm90ZVgsIHkgKyA0MCwgJzI0cHgnLCAnYm9sZCcpO1xuICAgICAgICBjaG9yZFRleHQuc2V0QXR0cmlidXRlKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGNob3JkVGV4dCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBEcmF3IHJpZ2h0IGJhciBsaW5lIE9OTFkgaWYgaGFzQmFyTGluZSBpcyB0cnVlIG9yIGl0J3MgYSByZXBlYXQgZW5kXG4gICAgY29uc3QgcmlnaHRCYXJYID0geCArIHdpZHRoIC0gMjtcbiAgICBpZiAobWVhc3VyZS5oYXNCYXJMaW5lIHx8IG1lYXN1cmUuaXNSZXBlYXRFbmQpIHtcbiAgICAgIGlmIChtZWFzdXJlLmlzUmVwZWF0RW5kKSB7XG4gICAgICAgIHRoaXMuZHJhd1JlcGVhdEJhcihzdmcsIHJpZ2h0QmFyWCwgeSwgaGVpZ2h0LCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRyYXdCYXIoc3ZnLCByaWdodEJhclgsIHksIGhlaWdodCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgcmh5dGhtIHBhdHRlcm4gZm9yIGEgY2hvcmQgYW5kIHJldHVybiB0aGUgeCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm90ZVxuICAgKi9cbiAgZHJhd1JoeXRobShzdmc6IFNWR0VsZW1lbnQsIGNob3JkRGF0YTogQ2hvcmRJbk1lYXN1cmUsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBtZWFzdXJlSW5kZXg6IG51bWJlciwgY2hvcmRJbmRleDogbnVtYmVyLCBub3RlUG9zaXRpb25zOiB7eDogbnVtYmVyLCB5OiBudW1iZXIsIG1lYXN1cmVJbmRleDogbnVtYmVyLCBjaG9yZEluZGV4OiBudW1iZXIsIGJlYXRJbmRleDogbnVtYmVyLCBub3RlSW5kZXg6IG51bWJlciwgdGllZDogYm9vbGVhbn1bXSk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IGJlYXRzID0gY2hvcmREYXRhLmJlYXRzO1xuICAgIGNvbnN0IGJlYXRXaWR0aCA9IGJlYXRzLmxlbmd0aCA+IDAgPyB3aWR0aCAvIGJlYXRzLmxlbmd0aCA6IHdpZHRoO1xuICAgIGxldCBjdXJyZW50WCA9IHg7XG4gICAgbGV0IGZpcnN0Tm90ZVg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgYmVhdHMuZm9yRWFjaCgoYmVhdCwgYmVhdEluZGV4KSA9PiB7XG4gICAgICBjb25zdCBmaXJzdE5vdGVJbkJlYXRYID0gdGhpcy5kcmF3QmVhdChzdmcsIGJlYXQsIGN1cnJlbnRYLCBzdGFmZkxpbmVZLCBiZWF0V2lkdGgsIG1lYXN1cmVJbmRleCwgY2hvcmRJbmRleCwgYmVhdEluZGV4LCBub3RlUG9zaXRpb25zKTtcbiAgICAgIFxuICAgICAgaWYgKGJlYXRJbmRleCA9PT0gMCAmJiBmaXJzdE5vdGVJbkJlYXRYICE9PSBudWxsKSB7XG4gICAgICAgIGZpcnN0Tm90ZVggPSBmaXJzdE5vdGVJbkJlYXRYO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjdXJyZW50WCArPSBiZWF0V2lkdGg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmlyc3ROb3RlWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2luZ2xlIGJlYXQgLSBoYW5kbGVzIGJvdGggc2luZ2xlIG5vdGVzIGFuZCBiZWFtZWQgZ3JvdXBzXG4gICAqL1xuICBkcmF3QmVhdChzdmc6IFNWR0VsZW1lbnQsIGJlYXQ6IEJlYXQsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBtZWFzdXJlSW5kZXg6IG51bWJlciwgY2hvcmRJbmRleDogbnVtYmVyLCBiZWF0SW5kZXg6IG51bWJlciwgbm90ZVBvc2l0aW9uczoge3g6IG51bWJlciwgeTogbnVtYmVyLCBtZWFzdXJlSW5kZXg6IG51bWJlciwgY2hvcmRJbmRleDogbnVtYmVyLCBiZWF0SW5kZXg6IG51bWJlciwgbm90ZUluZGV4OiBudW1iZXIsIHRpZWQ6IGJvb2xlYW59W10pOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoYmVhdC5ub3Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IG52ID0gYmVhdC5ub3Rlc1swXTtcbiAgICAgIGNvbnN0IG5vdGVYID0gdGhpcy5kcmF3U2luZ2xlTm90ZShzdmcsIG52LCB4LCBzdGFmZkxpbmVZLCB3aWR0aCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIG5vdGUgcG9zaXRpb24gZm9yIHRpZSBkZXRlY3Rpb25cbiAgICAgIG5vdGVQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgIHg6IG5vdGVYLFxuICAgICAgICB5OiBzdGFmZkxpbmVZLFxuICAgICAgICBtZWFzdXJlSW5kZXgsXG4gICAgICAgIGNob3JkSW5kZXgsXG4gICAgICAgIGJlYXRJbmRleCxcbiAgICAgICAgbm90ZUluZGV4OiAwLFxuICAgICAgICB0aWVkOiBudi50aWVkIHx8IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5vdGVYO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBmaXJzdE5vdGVYID0gdGhpcy5kcmF3Tm90ZUdyb3VwKHN2ZywgYmVhdC5ub3RlcywgeCwgc3RhZmZMaW5lWSwgd2lkdGgpO1xuICAgICAgXG4gICAgICAvLyBTdG9yZSBub3RlIHBvc2l0aW9ucyBmb3IgZ3JvdXBlZCBub3Rlc1xuICAgICAgYmVhdC5ub3Rlcy5mb3JFYWNoKChudiwgbm90ZUluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdGVYID0geCArIChub3RlSW5kZXggKiAod2lkdGggLyBiZWF0Lm5vdGVzLmxlbmd0aCkpICsgKHdpZHRoIC8gYmVhdC5ub3Rlcy5sZW5ndGgpIC8gMjtcbiAgICAgICAgbm90ZVBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICB4OiBub3RlWCxcbiAgICAgICAgICB5OiBzdGFmZkxpbmVZLFxuICAgICAgICAgIG1lYXN1cmVJbmRleCxcbiAgICAgICAgICBjaG9yZEluZGV4LFxuICAgICAgICAgIGJlYXRJbmRleCxcbiAgICAgICAgICBub3RlSW5kZXgsXG4gICAgICAgICAgdGllZDogbnYudGllZCB8fCBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gZmlyc3ROb3RlWDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbmdsZSBub3RlIHdpdGggc2xhc2ggYW5kIHN0ZW1cbiAgICovXG4gIGRyYXdTaW5nbGVOb3RlKHN2ZzogU1ZHRWxlbWVudCwgbnY6IE5vdGVWYWx1ZSwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGNlbnRlclggPSB4ICsgd2lkdGggLyAyO1xuXG4gICAgLy8gRHJhdyBzbGFzaCAodG9wLXJpZ2h0IHRvIGJvdHRvbS1sZWZ0KVxuICAgIHRoaXMuZHJhd1NsYXNoKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSk7XG5cbiAgICAvLyBEcmF3IHN0ZW0gZm9yIHNob3J0IG5vdGVzIC0gQVRUQUNIRUQgVE8gQk9UVE9NIE9GIFNMQVNIXG4gICAgaWYgKG52LnZhbHVlID49IDIgJiYgbnYudmFsdWUgIT09IDEpIHtcbiAgICAgIHRoaXMuZHJhd1N0ZW0oc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAyNSk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBmbGFncyBpZiBuZWVkZWQgKGZvciBzaW5nbGUgaXNvbGF0ZWQgc2hvcnQgbm90ZXMpXG4gICAgaWYgKG52LnZhbHVlID09PSA4KSB7XG4gICAgICB0aGlzLmRyYXdGbGFnKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgMSk7XG4gICAgfSBlbHNlIGlmIChudi52YWx1ZSA9PT0gMTYpIHtcbiAgICAgIHRoaXMuZHJhd0ZsYWcoc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAyKTtcbiAgICB9IGVsc2UgaWYgKG52LnZhbHVlID09PSAzMikge1xuICAgICAgdGhpcy5kcmF3RmxhZyhzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDMpO1xuICAgIH0gZWxzZSBpZiAobnYudmFsdWUgPT09IDY0KSB7XG4gICAgICB0aGlzLmRyYXdGbGFnKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgNCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhpcyBub3RlIGlzIGRvdHRlZCwgZHJhdyBhIHNtYWxsIGRvdCB0byB0aGUgcmlnaHQgb2YgdGhlIG5vdGUgaGVhZFxuICAgIGlmIChudi5kb3R0ZWQpIHtcbiAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeCcsIChjZW50ZXJYICsgOCkudG9TdHJpbmcoKSk7XG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeScsIChzdGFmZkxpbmVZKS50b1N0cmluZygpKTtcbiAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ3InLCAnMicpO1xuICAgICAgZG90LnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2VudGVyWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgZ3JvdXAgb2Ygbm90ZXMgd2l0aCBwcm9wZXIgYmVhbWluZywgaW5jbHVkaW5nIG5lc3RlZCBiZWFtIHNlZ21lbnRzIGZvciBtaXhlZCBkdXJhdGlvbnNcbiAgICovXG4gIGRyYXdOb3RlR3JvdXAoc3ZnOiBTVkdFbGVtZW50LCBub3Rlc1ZhbHVlczogTm90ZVZhbHVlW10sIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3RlQ291bnQgPSBub3Rlc1ZhbHVlcy5sZW5ndGg7XG4gICAgY29uc3QgaGFzU21hbGxOb3RlcyA9IG5vdGVzVmFsdWVzLnNvbWUobnYgPT4gbnYudmFsdWUgPj0gMzIpO1xuICAgIGNvbnN0IG5vdGVTcGFjaW5nID0gbm90ZUNvdW50ID4gMCA/ICh3aWR0aCAvIG5vdGVDb3VudCkgKiAoaGFzU21hbGxOb3RlcyA/IDEuMiA6IDEpIDogd2lkdGg7XG4gICAgY29uc3Qgc3RlbUhlaWdodCA9IDI1O1xuXG4gICAgY29uc3Qgbm90ZXM6IHsgbnY6IE5vdGVWYWx1ZTsgYmVhbUNvdW50OiBudW1iZXI7IGNlbnRlclg6IG51bWJlcjsgc3RlbVg/OiBudW1iZXI7IHN0ZW1Ub3BZPzogbnVtYmVyOyBzdGVtQm90dG9tWT86IG51bWJlciB9W10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IG52ID0gbm90ZXNWYWx1ZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0geCArIGkgKiBub3RlU3BhY2luZyArIG5vdGVTcGFjaW5nIC8gMjtcbiAgICAgIGNvbnN0IGJlYW1Db3VudCA9IG52LnZhbHVlID09PSA4ID8gMSA6IG52LnZhbHVlID09PSAxNiA/IDIgOiBudi52YWx1ZSA9PT0gMzIgPyAzIDogbnYudmFsdWUgPT09IDY0ID8gNCA6IDA7XG5cbiAgICAgIHRoaXMuZHJhd1NsYXNoKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSk7XG5cbiAgICAgIGNvbnN0IHN0ZW1JbmZvID0gdGhpcy5kcmF3U3RlbShzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIHN0ZW1IZWlnaHQpO1xuICAgICAgbm90ZXMucHVzaCh7IG52LCBiZWFtQ291bnQsIGNlbnRlclgsIHN0ZW1YOiBzdGVtSW5mby54LCBzdGVtVG9wWTogc3RlbUluZm8udG9wWSwgc3RlbUJvdHRvbVk6IHN0ZW1JbmZvLmJvdHRvbVkgfSk7XG5cbiAgICAgIGlmIChudi5kb3R0ZWQpIHtcbiAgICAgICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnY3gnLCAoY2VudGVyWCArIDgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeScsIChzdGFmZkxpbmVZKS50b1N0cmluZygpKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgncicsICcyJyk7XG4gICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtYXhCZWFtQ291bnQgPSBub3Rlcy5yZWR1Y2UoKG0sIG4pID0+IE1hdGgubWF4KG0sIG4uYmVhbUNvdW50KSwgMCk7XG4gICAgaWYgKG1heEJlYW1Db3VudCA9PT0gMCkgcmV0dXJuIG5vdGVzLmxlbmd0aCA/IG5vdGVzWzBdLmNlbnRlclggOiBudWxsO1xuXG4gICAgY29uc3QgYmVhbUdhcCA9IDU7XG4gICAgY29uc3QgdmFsaWRTdGVtQm90dG9tcyA9IG5vdGVzLm1hcChuID0+IG4uc3RlbUJvdHRvbVkpLmZpbHRlcih5ID0+IHkgIT09IHVuZGVmaW5lZCkgYXMgbnVtYmVyW107XG4gICAgY29uc3QgYmFzZVN0ZW1Cb3R0b20gPSB2YWxpZFN0ZW1Cb3R0b21zLmxlbmd0aCA+IDAgPyBNYXRoLm1pbiguLi52YWxpZFN0ZW1Cb3R0b21zKSA6IHN0YWZmTGluZVkgKyAzMDtcblxuICAgIGZvciAobGV0IGxldmVsID0gMTsgbGV2ZWwgPD0gbWF4QmVhbUNvdW50OyBsZXZlbCsrKSB7XG4gICAgICBsZXQgc2VnU3RhcnRJbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbiA9IG5vdGVzW2ldO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSBuLmJlYW1Db3VudCA+PSBsZXZlbDtcblxuICAgICAgICBpZiAoYWN0aXZlICYmIHNlZ1N0YXJ0SW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgICBzZWdTdGFydEluZGV4ID0gaTtcbiAgICAgICAgfSBlbHNlIGlmICgoIWFjdGl2ZSB8fCBpID09PSBub3Rlcy5sZW5ndGggLSAxKSAmJiBzZWdTdGFydEluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3Qgc2VnRW5kID0gKGFjdGl2ZSAmJiBpID09PSBub3Rlcy5sZW5ndGggLSAxKSA/IGkgOiBpIC0gMTtcbiAgICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuXG4gICAgICAgICAgY29uc3Qgc3RhcnRYID0gbm90ZXNbc2VnU3RhcnRJbmRleF0uc3RlbVghO1xuICAgICAgICAgIGNvbnN0IGVuZFggPSBub3Rlc1tzZWdFbmRdLnN0ZW1YITtcbiAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIGVuZFgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuXG4gICAgICAgICAgc2VnU3RhcnRJbmRleCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3R1Ykxlbmd0aCA9IE1hdGgubWF4KDgsIG5vdGVTcGFjaW5nICogMC40KTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub3Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuID0gbm90ZXNbaV07XG4gICAgICAgIGNvbnN0IGhhc0xldmVsID0gbi5iZWFtQ291bnQgPj0gbGV2ZWw7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWhhc0xldmVsKSBjb250aW51ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxlZnRCZWFtQ291bnQgPSAoaSAtIDEgPj0gMCkgPyBub3Rlc1tpIC0gMV0uYmVhbUNvdW50IDogMDtcbiAgICAgICAgY29uc3QgcmlnaHRCZWFtQ291bnQgPSAoaSArIDEgPCBub3Rlcy5sZW5ndGgpID8gbm90ZXNbaSArIDFdLmJlYW1Db3VudCA6IDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsZWZ0SGFzTGV2ZWwgPSBsZWZ0QmVhbUNvdW50ID49IGxldmVsO1xuICAgICAgICBjb25zdCByaWdodEhhc0xldmVsID0gcmlnaHRCZWFtQ291bnQgPj0gbGV2ZWw7XG4gICAgICAgIFxuICAgICAgICBpZiAobGVmdEhhc0xldmVsICYmIHJpZ2h0SGFzTGV2ZWwpIGNvbnRpbnVlO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFsZWZ0SGFzTGV2ZWwgJiYgIXJpZ2h0SGFzTGV2ZWwpIHtcbiAgICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuICAgICAgICAgIGNvbnN0IHN0ZW1YID0gbi5zdGVtWCE7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbGVmdE5vdGUgPSBpID4gMCA/IG5vdGVzW2kgLSAxXSA6IG51bGw7XG4gICAgICAgICAgY29uc3QgaXNBZnRlckRvdHRlZFN0cm9uZ2VyID0gbGVmdE5vdGUgJiYgbGVmdE5vdGUubnYuZG90dGVkICYmIGxlZnROb3RlLm52LnZhbHVlIDwgbi5udi52YWx1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByaWdodE5vdGUgPSBpIDwgbm90ZXMubGVuZ3RoIC0gMSA/IG5vdGVzW2kgKyAxXSA6IG51bGw7XG4gICAgICAgICAgY29uc3QgaXNCZWZvcmVEb3R0ZWRXZWFrZXIgPSByaWdodE5vdGUgJiYgcmlnaHROb3RlLm52LmRvdHRlZCAmJiBuLm52LnZhbHVlIDwgcmlnaHROb3RlLm52LnZhbHVlO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpc0FmdGVyRG90dGVkU3Ryb25nZXIgJiYgaSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RlbVggLSBzdHViTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IG5vdGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RlbVggKyBzdHViTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RlbVggLSBzdHViTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYmVhbVkgPSBiYXNlU3RlbUJvdHRvbSAtIChsZXZlbCAtIDEpICogYmVhbUdhcDtcbiAgICAgICAgY29uc3Qgc3RlbVggPSBuLnN0ZW1YITtcbiAgICAgICAgXG4gICAgICAgIGlmIChsZWZ0SGFzTGV2ZWwgJiYgIXJpZ2h0SGFzTGV2ZWwgJiYgaSA+IDApIHtcbiAgICAgICAgICBjb25zdCBzdHViWCA9IHN0ZW1YIC0gc3R1Ykxlbmd0aDtcbiAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kxJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gyJywgc3R1YlgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWxlZnRIYXNMZXZlbCAmJiByaWdodEhhc0xldmVsICYmIGkgPCBub3Rlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgY29uc3Qgc3R1YlggPSBzdGVtWCArIHN0dWJMZW5ndGg7XG4gICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MScsIHN0ZW1YLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MicsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZWFtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub3Rlcy5sZW5ndGggPyBub3Rlc1swXS5jZW50ZXJYIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2xhc2ggYXQgNDVcdTAwQjAgYW5nbGUgKHRvcC1SSUdIVCB0byBib3R0b20tTEVGVCAtIHByb3BlciBzbGFzaCBkaXJlY3Rpb24pXG4gICAqL1xuICBkcmF3U2xhc2goc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGNvbnN0IHNsYXNoTGVuZ3RoID0gMTA7XG4gICAgY29uc3Qgc2xhc2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3gxJywgKHggKyBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3kxJywgKHkgLSBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3gyJywgKHggLSBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3kyJywgKHkgKyBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMycpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChzbGFzaCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHN0ZW0gZm9yIGEgbm90ZSAtIEFUVEFDSEVEIFRPIEJPVFRPTSBPRiBTTEFTSFxuICAgKi9cbiAgZHJhd1N0ZW0oc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB7eDogbnVtYmVyLCB0b3BZOiBudW1iZXIsIGJvdHRvbVk6IG51bWJlcn0ge1xuICAgIGNvbnN0IHNsYXNoTGVuZ3RoID0gMTA7XG4gICAgY29uc3Qgc3RlbVN0YXJ0WCA9IHggLSBzbGFzaExlbmd0aC8yICsgMjtcbiAgICBjb25zdCBzdGVtU3RhcnRZID0geSArIHNsYXNoTGVuZ3RoLzI7XG4gICAgXG4gICAgY29uc3Qgc3RlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd4MScsIHN0ZW1TdGFydFgudG9TdHJpbmcoKSk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3kxJywgc3RlbVN0YXJ0WS50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgneDInLCBzdGVtU3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd5MicsIChzdGVtU3RhcnRZICsgaGVpZ2h0KS50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoc3RlbSk7XG5cbiAgICByZXR1cm4geyB4OiBzdGVtU3RhcnRYLCB0b3BZOiBzdGVtU3RhcnRZLCBib3R0b21ZOiBzdGVtU3RhcnRZICsgaGVpZ2h0IH07XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBmbGFnKHMpIGZvciBhIG5vdGUgKGZvciBpc29sYXRlZCBzaG9ydCBub3RlcylcbiAgICovXG4gIGRyYXdGbGFnKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICBjb25zdCBzbGFzaExlbmd0aCA9IDEwO1xuICAgIGNvbnN0IHN0ZW1TdGFydFggPSB4IC0gc2xhc2hMZW5ndGgvMiArIDI7XG4gICAgY29uc3Qgc3RlbUJvdHRvbVkgPSBzdGFmZkxpbmVZICsgc2xhc2hMZW5ndGgvMiArIDI1O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBmbGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG4gICAgICBjb25zdCBmbGFnWSA9IHN0ZW1Cb3R0b21ZIC0gaSAqIDEwO1xuICAgICAgXG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnZCcsIGBNICR7c3RlbVN0YXJ0WH0gJHtmbGFnWX0gUSAke3N0ZW1TdGFydFggLSAxMH0gJHtmbGFnWSAtIDV9ICR7c3RlbVN0YXJ0WCAtIDh9ICR7ZmxhZ1kgLSAxMn1gKTtcbiAgICAgIGZsYWcuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgZmxhZy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoZmxhZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzaW1wbGUgYmFyIGxpbmVcbiAgICovXG4gIGRyYXdCYXIoc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgeC50b1N0cmluZygpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTEnLCB5LnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgKHkgKyBoZWlnaHQpLnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IHJlcGVhdCBiYXIgd2l0aCBkb3RzXG4gICAqL1xuICBkcmF3UmVwZWF0QmFyKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpc1N0YXJ0OiBib29sZWFuKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaXNTdGFydCA/IDAgOiAtNjtcbiAgICBjb25zdCBiYXJYID0geCArIG9mZnNldDtcbiAgICB0aGlzLmRyYXdCYXIoc3ZnLCBiYXJYLCB5LCBoZWlnaHQpO1xuICAgIHRoaXMuZHJhd0JhcihzdmcsIGJhclggKyA0LCB5LCBoZWlnaHQpO1xuXG4gICAgY29uc3QgZG90T2Zmc2V0ID0gaXNTdGFydCA/IDEwIDogLTEwO1xuICAgIGNvbnN0IGRvdDFZID0geSArIGhlaWdodCAqIDAuMzU7XG4gICAgY29uc3QgZG90MlkgPSB5ICsgaGVpZ2h0ICogMC42NTtcblxuICAgIFtkb3QxWSwgZG90MlldLmZvckVhY2goZG90WSA9PiB7XG4gICAgICBjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCAoeCArIGRvdE9mZnNldCkudG9TdHJpbmcoKSk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsIGRvdFkudG9TdHJpbmcoKSk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcbiAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgICAgc3ZnLmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgdGV4dCBlbGVtZW50c1xuICAgKi9cbiAgY3JlYXRlVGV4dCh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBzaXplOiBzdHJpbmcsIHdlaWdodDogc3RyaW5nID0gJ25vcm1hbCcpOiBTVkdUZXh0RWxlbWVudCB7XG4gICAgY29uc3QgdGV4dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICd0ZXh0Jyk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgneCcsIHgudG9TdHJpbmcoKSk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgneScsIHkudG9TdHJpbmcoKSk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZm9udC1mYW1pbHknLCAnQXJpYWwsIHNhbnMtc2VyaWYnKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCBzaXplKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmb250LXdlaWdodCcsIHdlaWdodCk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7XG4gICAgdGV4dEVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICByZXR1cm4gdGV4dEVsO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBDaG9yZCBHcmlkIHBsdWdpbicpO1xuICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFxRDtBQXdDckQsSUFBcUIsa0JBQXJCLGNBQTZDLHVCQUFPO0FBQUEsRUFDbEQsTUFBTSxTQUFTO0FBQ2IsWUFBUSxJQUFJLDJCQUEyQjtBQUd2QyxTQUFLLG1DQUFtQyxhQUFhLENBQUMsUUFBUSxJQUFJLFFBQVE7QUFDeEUsV0FBSyxnQkFBZ0IsUUFBUSxFQUFFO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGVBQWUsUUFBMkI7QUFDeEMsVUFBTSxRQUFRLE9BQU8sS0FBSyxFQUFFLE1BQU0sSUFBSTtBQUN0QyxRQUFJLGdCQUFnQjtBQUNwQixVQUFNLFdB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
