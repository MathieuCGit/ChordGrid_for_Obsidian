/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChordGridPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ChordGridPlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("Loading Chord Grid plugin");
    this.registerMarkdownCodeBlockProcessor("chordgrid", (source, el, ctx) => {
      this.renderChordGrid(source, el);
    });
  }
  /**
   * Parse chord grid text into structured data
   */
  parseChordGrid(source) {
    const lines = source.trim().split("\n");
    let timeSignature = "4/4";
    const measures = [];
    for (const line of lines) {
      const trimmed = line.trim();
      if (!trimmed)
        continue;
      if (measures.length === 0) {
        const timeSigMatch = trimmed.match(/^(\d+\/\d+)/);
        if (timeSigMatch) {
          timeSignature = timeSigMatch[1];
        }
      }
      const tokens = this.tokenizeLine(trimmed);
      let currentMeasure = { chords: [], hasBarLine: false };
      let isRepeatStart = false;
      let isRepeatEnd = false;
      for (const token of tokens) {
        if (token.type === "repeatStart") {
          isRepeatStart = true;
        } else if (token.type === "repeatEnd") {
          isRepeatEnd = true;
        } else if (token.type === "barLine") {
          if (currentMeasure.chords.length > 0) {
            currentMeasure.hasBarLine = true;
            currentMeasure.isRepeatEnd = isRepeatEnd;
            measures.push(currentMeasure);
            currentMeasure = {
              chords: [],
              hasBarLine: false,
              isRepeatStart: false
            };
            isRepeatEnd = false;
          }
        } else if (token.type === "chord") {
          currentMeasure.chords.push({
            chord: token.chord,
            beats: token.beats
          });
        }
      }
      if (currentMeasure.chords.length > 0) {
        currentMeasure.isRepeatEnd = isRepeatEnd;
        measures.push(currentMeasure);
      }
      if (measures.length > 0 && isRepeatStart) {
        measures[0].isRepeatStart = true;
      }
      if (lines.length > 1 && line !== lines[lines.length - 1]) {
        measures.push({ chords: [], hasBarLine: false, isLineBreak: true });
      }
    }
    return { timeSignature, measures };
  }
  /**
   * Tokenize a line into meaningful tokens
   *
   * Changes: rhythm tokens now parse per-note dotted flags.
   * A token may be like:
   *  - "4" => quarter
   *  - "4." => dotted quarter
   *  - "3232161616" => sequence of small notes (32 32 16 16 16 ...)
   *  - "8.16" or "8. 16" => dotted eighth + sixteenth (we support both forms)
   */
  tokenizeLine(line) {
    const tokens = [];
    let remaining = line.replace(/^\d+\/\d+\s*/, "");
    while (remaining.length > 0) {
      remaining = remaining.trim();
      if (remaining.startsWith("||:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(3);
        continue;
      } else if (remaining.startsWith("|:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith(":||")) {
        tokens.push({ type: "repeatEnd" });
        remaining = remaining.substring(3);
        continue;
      }
      if (remaining.startsWith("||")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith("|")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(1);
        continue;
      }
      const chordMatch = remaining.match(/^([A-G][#b]?(?:maj|min|m|dim|aug|sus|[0-9])*)\[([0-9.\s]+)\]/);
      if (chordMatch) {
        const chord = chordMatch[1];
        const rhythm = chordMatch[2];
        const beats = [];
        const rhythmTokens = rhythm.split(/\s+/).filter((r) => r.length > 0);
        for (const token of rhythmTokens) {
          const notes = [];
          let i = 0;
          while (i < token.length) {
            const ch = token[i];
            const next = (offset = 1) => token[i + offset] || "";
            let noteValue = null;
            let dotted = false;
            let charsConsumed = 0;
            if (ch === "6" && next(1) === "4") {
              noteValue = 64;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "3" && next(1) === "2") {
              noteValue = 32;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "1" && next(1) === "6") {
              noteValue = 16;
              charsConsumed = 2;
              if (token[i + 2] === ".") {
                dotted = true;
                charsConsumed = 3;
              }
            } else if (ch === "8" || ch === "4" || ch === "2" || ch === "1") {
              noteValue = parseInt(ch, 10);
              charsConsumed = 1;
              if (token[i + 1] === ".") {
                dotted = true;
                charsConsumed = 2;
              }
            } else {
              i += 1;
              continue;
            }
            if (noteValue !== null) {
              notes.push({ value: noteValue, dotted });
              i += charsConsumed;
            }
          }
          if (notes.length > 0) {
            beats.push({ notes });
          }
        }
        tokens.push({ type: "chord", chord, beats });
        remaining = remaining.substring(chordMatch[0].length);
        continue;
      }
      remaining = remaining.substring(1);
    }
    return tokens;
  }
  /**
   * Render chord grid from source text into container element
   */
  renderChordGrid(source, container) {
    const grid = this.parseChordGrid(source);
    const svg = this.createSVG(grid);
    container.empty();
    container.appendChild(svg);
  }
  /**
   * Create SVG element for the entire chord grid
   */
  createSVG(grid) {
    const measuresPerLine = 4;
    const measureWidth = 200;
    const measureHeight = 120;
    let currentLine = 0;
    let measuresInCurrentLine = 0;
    const measurePositions = [];
    grid.measures.forEach((measure, index) => {
      if (measure.isLineBreak) {
        currentLine++;
        measuresInCurrentLine = 0;
        return;
      }
      if (measuresInCurrentLine >= measuresPerLine) {
        currentLine++;
        measuresInCurrentLine = 0;
      }
      measurePositions.push({
        measure,
        lineIndex: currentLine,
        posInLine: measuresInCurrentLine
      });
      measuresInCurrentLine++;
    });
    const lines = currentLine + 1;
    const width = measuresPerLine * measureWidth + 60;
    const height = lines * (measureHeight + 20) + 20;
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", width.toString());
    svg.setAttribute("height", height.toString());
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg.style.background = "#ffffff";
    const timeSigText = this.createText(grid.timeSignature, 10, 40, "18px", "bold");
    svg.appendChild(timeSigText);
    measurePositions.forEach(({ measure, lineIndex, posInLine }) => {
      const x = posInLine * measureWidth + 40;
      const y = lineIndex * (measureHeight + 20) + 20;
      this.drawMeasure(svg, measure, x, y, measureWidth, measureHeight);
    });
    return svg;
  }
  /**
   * Draw a single measure with chord, rhythm, and bar lines
   */
  drawMeasure(svg, measure, x, y, width, height) {
    if (measure.isRepeatStart) {
      this.drawRepeatBar(svg, x, y, height, true);
    } else {
      this.drawBar(svg, x, y, height);
    }
    const staffLineY = y + 80;
    const staffLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    staffLine.setAttribute("x1", (x + 10).toString());
    staffLine.setAttribute("y1", staffLineY.toString());
    staffLine.setAttribute("x2", (x + width - 10).toString());
    staffLine.setAttribute("y2", staffLineY.toString());
    staffLine.setAttribute("stroke", "#000");
    staffLine.setAttribute("stroke-width", "1");
    svg.appendChild(staffLine);
    const chordWidth = width / measure.chords.length;
    measure.chords.forEach((chordData, chordIndex) => {
      const chordX = x + chordIndex * chordWidth + 10;
      const firstNoteX = this.drawRhythm(svg, chordData, chordX, staffLineY, chordWidth - 20);
      if (firstNoteX !== null) {
        const chordText = this.createText(chordData.chord, firstNoteX, y + 40, "24px", "bold");
        chordText.setAttribute("text-anchor", "middle");
        svg.appendChild(chordText);
      }
    });
    const rightBarX = x + width - 2;
    if (measure.hasBarLine || measure.isRepeatEnd) {
      if (measure.isRepeatEnd) {
        this.drawRepeatBar(svg, rightBarX, y, height, false);
      } else {
        this.drawBar(svg, rightBarX, y, height);
      }
    }
  }
  /**
   * Draw a simple bar line
   */
  drawBar(svg, x, y, height) {
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", x.toString());
    line.setAttribute("y1", y.toString());
    line.setAttribute("x2", x.toString());
    line.setAttribute("y2", (y + height).toString());
    line.setAttribute("stroke", "#000");
    line.setAttribute("stroke-width", "2");
    svg.appendChild(line);
  }
  /**
   * Draw repeat bar with dots
   */
  drawRepeatBar(svg, x, y, height, isStart) {
    const offset = isStart ? 0 : -6;
    const barX = x + offset;
    this.drawBar(svg, barX, y, height);
    this.drawBar(svg, barX + 4, y, height);
    const dotOffset = isStart ? 10 : -10;
    const dot1Y = y + height * 0.35;
    const dot2Y = y + height * 0.65;
    [dot1Y, dot2Y].forEach((dotY) => {
      const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", (x + dotOffset).toString());
      circle.setAttribute("cy", dotY.toString());
      circle.setAttribute("r", "3");
      circle.setAttribute("fill", "#000");
      svg.appendChild(circle);
    });
  }
  /**
   * Draw rhythm pattern for a chord and return the x position of the first note
   */
  drawRhythm(svg, chordData, x, staffLineY, width) {
    const beats = chordData.beats;
    const beatWidth = beats.length > 0 ? width / beats.length : width;
    let currentX = x;
    let firstNoteX = null;
    beats.forEach((beat, beatIndex) => {
      const firstNoteInBeatX = this.drawBeat(svg, beat, currentX, staffLineY, beatWidth);
      if (beatIndex === 0 && firstNoteInBeatX !== null) {
        firstNoteX = firstNoteInBeatX;
      }
      currentX += beatWidth;
    });
    return firstNoteX;
  }
  /**
   * Draw a single beat - handles both single notes and beamed groups
   * Returns the x position of the first note in this beat
   */
  drawBeat(svg, beat, x, staffLineY, width) {
    if (beat.notes.length === 1) {
      const nv = beat.notes[0];
      return this.drawSingleNote(svg, nv, x, staffLineY, width);
    } else {
      return this.drawNoteGroup(svg, beat.notes, x, staffLineY, width);
    }
  }
  /**
   * Draw a single note with slash and stem
   */
  drawSingleNote(svg, nv, x, staffLineY, width) {
    const centerX = x + width / 2;
    this.drawSlash(svg, centerX, staffLineY);
    if (nv.value >= 2 && nv.value !== 1) {
      this.drawStem(svg, centerX, staffLineY, 25);
    }
    if (nv.value === 8) {
      this.drawFlag(svg, centerX, staffLineY, 1);
    } else if (nv.value === 16) {
      this.drawFlag(svg, centerX, staffLineY, 2);
    } else if (nv.value === 32) {
      this.drawFlag(svg, centerX, staffLineY, 3);
    } else if (nv.value === 64) {
      this.drawFlag(svg, centerX, staffLineY, 4);
    }
    if (nv.dotted) {
      const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      dot.setAttribute("cx", (centerX + 8).toString());
      dot.setAttribute("cy", staffLineY.toString());
      dot.setAttribute("r", "2");
      dot.setAttribute("fill", "#000");
      svg.appendChild(dot);
    }
    return centerX;
  }
  /**
   * Draw a group of notes with proper beaming, including nested beam segments for mixed durations
   * notesValues: array of NoteValue objects (e.g., [{value:8},{value:16}])
   *
   * Behavior:
   * - Compute beamCount per note (8->1,16->2,32->3).
   * - Draw stem for each note and store stem positions.
   * - For each beam level, draw continuous beams where notes have beamCount >= level.
   * - For notes that have extra beams (level > neighbor's level), draw a short stub extending left from that stem.
   * - Draw per-note dotted points next to heads.
   */
  drawNoteGroup(svg, notesValues, x, staffLineY, width) {
    const noteCount = notesValues.length;
    const hasSmallNotes = notesValues.some((nv) => nv.value >= 32);
    const noteSpacing = noteCount > 0 ? width / noteCount * (hasSmallNotes ? 1.2 : 1) : width;
    const stemHeight = 25;
    const notes = [];
    for (let i = 0; i < noteCount; i++) {
      const nv = notesValues[i];
      const centerX = x + i * noteSpacing + noteSpacing / 2;
      const beamCount = nv.value === 8 ? 1 : nv.value === 16 ? 2 : nv.value === 32 ? 3 : nv.value === 64 ? 4 : 0;
      this.drawSlash(svg, centerX, staffLineY);
      const stemInfo = this.drawStem(svg, centerX, staffLineY, stemHeight);
      notes.push({ nv, beamCount, centerX, stemX: stemInfo.x, stemTopY: stemInfo.topY, stemBottomY: stemInfo.bottomY });
      if (nv.dotted) {
        const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        dot.setAttribute("cx", (centerX + 8).toString());
        dot.setAttribute("cy", staffLineY.toString());
        dot.setAttribute("r", "2");
        dot.setAttribute("fill", "#000");
        svg.appendChild(dot);
      }
    }
    const maxBeamCount = notes.reduce((m, n) => Math.max(m, n.beamCount), 0);
    if (maxBeamCount === 0)
      return notes.length ? notes[0].centerX : null;
    const beamGap = 5;
    const validStemBottoms = notes.map((n) => n.stemBottomY).filter((y) => y !== void 0);
    const baseStemBottom = validStemBottoms.length > 0 ? Math.min(...validStemBottoms) : staffLineY + 30;
    for (let level = 1; level <= maxBeamCount; level++) {
      let segStartIndex = null;
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const active = n.beamCount >= level;
        if (active && segStartIndex === null) {
          segStartIndex = i;
        } else if ((!active || i === notes.length - 1) && segStartIndex !== null) {
          const segEnd = active && i === notes.length - 1 ? i : i - 1;
          const beamY = baseStemBottom - (level - 1) * beamGap;
          const startX = notes[segStartIndex].stemX;
          const endX = notes[segEnd].stemX;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", startX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", endX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
          segStartIndex = null;
        }
      }
      const stubLength = Math.max(8, noteSpacing * 0.4);
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const hasLevel = n.beamCount >= level;
        if (!hasLevel)
          continue;
        const leftBeamCount = i - 1 >= 0 ? notes[i - 1].beamCount : 0;
        const rightBeamCount = i + 1 < notes.length ? notes[i + 1].beamCount : 0;
        const leftHasLevel = leftBeamCount >= level;
        const rightHasLevel = rightBeamCount >= level;
        if (leftHasLevel && rightHasLevel)
          continue;
        if (!leftHasLevel && !rightHasLevel) {
          const beamY2 = baseStemBottom - (level - 1) * beamGap;
          const stemX2 = n.stemX;
          const leftNote = i > 0 ? notes[i - 1] : null;
          const isAfterDottedStronger = leftNote && leftNote.nv.dotted && leftNote.nv.value < n.nv.value;
          const rightNote = i < notes.length - 1 ? notes[i + 1] : null;
          const isBeforeDottedWeaker = rightNote && rightNote.nv.dotted && n.nv.value < rightNote.nv.value;
          if (isAfterDottedStronger && i > 0) {
            const stubX = stemX2 - stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          } else if (i < notes.length - 1) {
            const stubX = stemX2 + stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          } else if (i > 0) {
            const stubX = stemX2 - stubLength;
            const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
            beam.setAttribute("x1", stemX2.toString());
            beam.setAttribute("y1", beamY2.toString());
            beam.setAttribute("x2", stubX.toString());
            beam.setAttribute("y2", beamY2.toString());
            beam.setAttribute("stroke", "#000");
            beam.setAttribute("stroke-width", "2");
            svg.appendChild(beam);
          }
          continue;
        }
        const beamY = baseStemBottom - (level - 1) * beamGap;
        const stemX = n.stemX;
        if (leftHasLevel && !rightHasLevel && i > 0) {
          const stubX = stemX - stubLength;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", stemX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", stubX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
        }
        if (!leftHasLevel && rightHasLevel && i < notes.length - 1) {
          const stubX = stemX + stubLength;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", stemX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", stubX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
        }
      }
    }
    return notes.length ? notes[0].centerX : null;
  }
  /**
   * Draw a slash at 45Â° angle (top-RIGHT to bottom-LEFT - proper slash direction)
   * with stem attached to the bottom
   */
  drawSlash(svg, x, y) {
    const slashLength = 10;
    const slash = document.createElementNS("http://www.w3.org/2000/svg", "line");
    slash.setAttribute("x1", (x + slashLength / 2).toString());
    slash.setAttribute("y1", (y - slashLength / 2).toString());
    slash.setAttribute("x2", (x - slashLength / 2).toString());
    slash.setAttribute("y2", (y + slashLength / 2).toString());
    slash.setAttribute("stroke", "#000");
    slash.setAttribute("stroke-width", "3");
    svg.appendChild(slash);
  }
  /**
   * Draw a stem for a note - ATTACHED TO BOTTOM OF SLASH
   * Returns the X position of the stem and the bottom Y for proper beam alignment
   */
  drawStem(svg, x, y, height) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemStartY = y + slashLength / 2;
    const stem = document.createElementNS("http://www.w3.org/2000/svg", "line");
    stem.setAttribute("x1", stemStartX.toString());
    stem.setAttribute("y1", stemStartY.toString());
    stem.setAttribute("x2", stemStartX.toString());
    stem.setAttribute("y2", (stemStartY + height).toString());
    stem.setAttribute("stroke", "#000");
    stem.setAttribute("stroke-width", "2");
    svg.appendChild(stem);
    return { x: stemStartX, topY: stemStartY, bottomY: stemStartY + height };
  }
  /**
   * Draw flag(s) for a note (for isolated short notes)
   */
  drawFlag(svg, x, staffLineY, count) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemBottomY = staffLineY + slashLength / 2 + 25;
    for (let i = 0; i < count; i++) {
      const flag = document.createElementNS("http://www.w3.org/2000/svg", "path");
      const flagY = stemBottomY - i * 10;
      flag.setAttribute("d", `M ${stemStartX} ${flagY} Q ${stemStartX - 10} ${flagY - 5} ${stemStartX - 8} ${flagY - 12}`);
      flag.setAttribute("stroke", "#000");
      flag.setAttribute("stroke-width", "2");
      flag.setAttribute("fill", "none");
      svg.appendChild(flag);
    }
  }
  /**
   * Utility function to create text elements
   */
  createText(text, x, y, size, weight = "normal") {
    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
    textEl.setAttribute("x", x.toString());
    textEl.setAttribute("y", y.toString());
    textEl.setAttribute("font-family", "Arial, sans-serif");
    textEl.setAttribute("font-size", size);
    textEl.setAttribute("font-weight", weight);
    textEl.setAttribute("fill", "#000");
    textEl.textContent = text;
    return textEl;
  }
  onunload() {
    console.log("Unloading Chord Grid plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBJbnRlcmZhY2UgZGVmaW5pdGlvbnMgZm9yIG91ciBkYXRhIHN0cnVjdHVyZXNcbmludGVyZmFjZSBOb3RlVmFsdWUge1xuICB2YWx1ZTogbnVtYmVyOyAgICAgICAgLy8gMSwyLDQsOCwxNiwzMi4uLlxuICBkb3R0ZWQ/OiBib29sZWFuOyAgICAgLy8gd2hldGhlciB0aGlzIHNwZWNpZmljIG5vdGUgaXMgZG90dGVkXG59XG5cbmludGVyZmFjZSBCZWF0IHtcbiAgbm90ZXM6IE5vdGVWYWx1ZVtdOyAvLyBMaXN0IG9mIHJoeXRobWljIHZhbHVlcyAoOCwgNCwgMiwgMSwgZXRjLikgd2l0aCBvcHRpb25hbCBkb3R0ZWQgZmxhZ1xufVxuXG5pbnRlcmZhY2UgQ2hvcmRJbk1lYXN1cmUge1xuICBjaG9yZDogc3RyaW5nO1xuICBiZWF0czogQmVhdFtdO1xufVxuXG5pbnRlcmZhY2UgTWVhc3VyZSB7XG4gIGNob3JkczogQ2hvcmRJbk1lYXN1cmVbXTtcbiAgaXNSZXBlYXRTdGFydD86IGJvb2xlYW47XG4gIGlzUmVwZWF0RW5kPzogYm9vbGVhbjtcbiAgaGFzQmFyTGluZT86IGJvb2xlYW47XG4gIGlzTGluZUJyZWFrPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENob3JkR3JpZCB7XG4gIHRpbWVTaWduYXR1cmU6IHN0cmluZztcbiAgbWVhc3VyZXM6IE1lYXN1cmVbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hvcmRHcmlkUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIENob3JkIEdyaWQgcGx1Z2luJyk7XG5cbiAgICAvLyBSZWdpc3RlciBtYXJrZG93biBjb2RlIGJsb2NrIHByb2Nlc3NvciBmb3IgJ2Nob3JkZ3JpZCcgYmxvY2tzXG4gICAgdGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKCdjaG9yZGdyaWQnLCAoc291cmNlLCBlbCwgY3R4KSA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNob3JkR3JpZChzb3VyY2UsIGVsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBjaG9yZCBncmlkIHRleHQgaW50byBzdHJ1Y3R1cmVkIGRhdGFcbiAgICovXG4gIHBhcnNlQ2hvcmRHcmlkKHNvdXJjZTogc3RyaW5nKTogQ2hvcmRHcmlkIHtcbiAgICBjb25zdCBsaW5lcyA9IHNvdXJjZS50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgIGxldCB0aW1lU2lnbmF0dXJlID0gJzQvNCc7XG4gICAgY29uc3QgbWVhc3VyZXM6IE1lYXN1cmVbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICBpZiAoIXRyaW1tZWQpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBQYXJzZSB0aW1lIHNpZ25hdHVyZSAob25seSBmcm9tIGZpcnN0IGxpbmUpXG4gICAgICBpZiAobWVhc3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHRpbWVTaWdNYXRjaCA9IHRyaW1tZWQubWF0Y2goL14oXFxkK1xcL1xcZCspLyk7XG4gICAgICAgIGlmICh0aW1lU2lnTWF0Y2gpIHtcbiAgICAgICAgICB0aW1lU2lnbmF0dXJlID0gdGltZVNpZ01hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIGNob3JkcyBpbnRvIG1lYXN1cmVzIGJhc2VkIG9uIGJhciBsaW5lc1xuICAgICAgY29uc3QgdG9rZW5zID0gdGhpcy50b2tlbml6ZUxpbmUodHJpbW1lZCk7XG4gICAgICBsZXQgY3VycmVudE1lYXN1cmU6IE1lYXN1cmUgPSB7IGNob3JkczogW10sIGhhc0JhckxpbmU6IGZhbHNlIH07XG4gICAgICBsZXQgaXNSZXBlYXRTdGFydCA9IGZhbHNlO1xuICAgICAgbGV0IGlzUmVwZWF0RW5kID0gZmFsc2U7XG5cbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICAgIGlmICh0b2tlbi50eXBlID09PSAncmVwZWF0U3RhcnQnKSB7XG4gICAgICAgICAgaXNSZXBlYXRTdGFydCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gJ3JlcGVhdEVuZCcpIHtcbiAgICAgICAgICBpc1JlcGVhdEVuZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gJ2JhckxpbmUnKSB7XG4gICAgICAgICAgLy8gQmFyIGxpbmUgbWVhbnMgd2UgZmluYWxpemUgdGhlIGN1cnJlbnQgbWVhc3VyZSBhbmQgc3RhcnQgYSBuZXcgb25lXG4gICAgICAgICAgaWYgKGN1cnJlbnRNZWFzdXJlLmNob3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdXJyZW50TWVhc3VyZS5oYXNCYXJMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlLmlzUmVwZWF0RW5kID0gaXNSZXBlYXRFbmQ7XG4gICAgICAgICAgICBtZWFzdXJlcy5wdXNoKGN1cnJlbnRNZWFzdXJlKTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IG1lYXN1cmVcbiAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlID0geyBcbiAgICAgICAgICAgICAgY2hvcmRzOiBbXSwgXG4gICAgICAgICAgICAgIGhhc0JhckxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1JlcGVhdFN0YXJ0OiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlzUmVwZWF0RW5kID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdjaG9yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgY2hvcmQgdG8gY3VycmVudCBtZWFzdXJlXG4gICAgICAgICAgY3VycmVudE1lYXN1cmUuY2hvcmRzLnB1c2goe1xuICAgICAgICAgICAgY2hvcmQ6IHRva2VuLmNob3JkISxcbiAgICAgICAgICAgIGJlYXRzOiB0b2tlbi5iZWF0cyFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBmb3JnZXQgdGhlIGxhc3QgbWVhc3VyZVxuICAgICAgaWYgKGN1cnJlbnRNZWFzdXJlLmNob3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGN1cnJlbnRNZWFzdXJlLmlzUmVwZWF0RW5kID0gaXNSZXBlYXRFbmQ7XG4gICAgICAgIG1lYXN1cmVzLnB1c2goY3VycmVudE1lYXN1cmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSByZXBlYXQgc3RhcnQgdG8gdGhlIEZJUlNUIG1lYXN1cmUgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChtZWFzdXJlcy5sZW5ndGggPiAwICYmIGlzUmVwZWF0U3RhcnQpIHtcbiAgICAgICAgbWVhc3VyZXNbMF0uaXNSZXBlYXRTdGFydCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBsaW5lIGJyZWFrIG1hcmtlciBpZiB0aGVyZSBhcmUgbW9yZSBsaW5lc1xuICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgJiYgbGluZSAhPT0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgbWVhc3VyZXMucHVzaCh7IGNob3JkczogW10sIGhhc0JhckxpbmU6IGZhbHNlLCBpc0xpbmVCcmVhazogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyB0aW1lU2lnbmF0dXJlLCBtZWFzdXJlcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFRva2VuaXplIGEgbGluZSBpbnRvIG1lYW5pbmdmdWwgdG9rZW5zXG4gICAqXG4gICAqIENoYW5nZXM6IHJoeXRobSB0b2tlbnMgbm93IHBhcnNlIHBlci1ub3RlIGRvdHRlZCBmbGFncy5cbiAgICogQSB0b2tlbiBtYXkgYmUgbGlrZTpcbiAgICogIC0gXCI0XCIgPT4gcXVhcnRlclxuICAgKiAgLSBcIjQuXCIgPT4gZG90dGVkIHF1YXJ0ZXJcbiAgICogIC0gXCIzMjMyMTYxNjE2XCIgPT4gc2VxdWVuY2Ugb2Ygc21hbGwgbm90ZXMgKDMyIDMyIDE2IDE2IDE2IC4uLilcbiAgICogIC0gXCI4LjE2XCIgb3IgXCI4LiAxNlwiID0+IGRvdHRlZCBlaWdodGggKyBzaXh0ZWVudGggKHdlIHN1cHBvcnQgYm90aCBmb3JtcylcbiAgICovXG4gIHRva2VuaXplTGluZShsaW5lOiBzdHJpbmcpOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiB7XG4gICAgY29uc3QgdG9rZW5zOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiA9IFtdO1xuICAgIGxldCByZW1haW5pbmcgPSBsaW5lLnJlcGxhY2UoL15cXGQrXFwvXFxkK1xccyovLCAnJyk7IC8vIFJlbW92ZSB0aW1lIHNpZ25hdHVyZVxuICAgIFxuICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHJlcGVhdCBtYXJrZXJzXG4gICAgICBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3x8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygzKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygyKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCc6fHwnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdyZXBlYXRFbmQnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGJhciBsaW5lc1xuICAgICAgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8fCcpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ2JhckxpbmUnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3wnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdiYXJMaW5lJyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBjaG9yZHMgLSBhbGxvdyBkb3RzIGluIHJoeXRobSB0b2tlbnMgKGUuZy4sIDQuIGZvciBkb3R0ZWQgcXVhcnRlcilcbiAgICAgIGNvbnN0IGNob3JkTWF0Y2ggPSByZW1haW5pbmcubWF0Y2goL14oW0EtR11bI2JdPyg/Om1hanxtaW58bXxkaW18YXVnfHN1c3xbMC05XSkqKVxcWyhbMC05Llxcc10rKVxcXS8pO1xuICAgICAgaWYgKGNob3JkTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgY2hvcmQgPSBjaG9yZE1hdGNoWzFdO1xuICAgICAgICBjb25zdCByaHl0aG0gPSBjaG9yZE1hdGNoWzJdO1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2Ugcmh5dGhtIGludG8gYmVhdHNcbiAgICAgICAgY29uc3QgYmVhdHM6IEJlYXRbXSA9IFtdO1xuICAgICAgICAvLyBzcGxpdCB0b2tlbnMgb24gc3BhY2VzOyBlYWNoIHRva2VuIG1heSBpdHNlbGYgY29udGFpbiBtdWx0aXBsZSBudW1lcmljIGVsZW1lbnRzXG4gICAgICAgIGNvbnN0IHJoeXRobVRva2VucyA9IHJoeXRobS5zcGxpdCgvXFxzKy8pLmZpbHRlcihyID0+IHIubGVuZ3RoID4gMCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHJoeXRobVRva2Vucykge1xuICAgICAgICAgIC8vIFdlIHdpbGwgcGFyc2UgdGhlIHRva2VuIGNoYXJhY3RlciBieSBjaGFyYWN0ZXIsIGFsbG93aW5nIGZvciBwYXR0ZXJucyBsaWtlOlxuICAgICAgICAgIC8vIFwiOC5cIiwgXCIxNlwiLCBcIjMyMzJcIiwgXCI4LjE2XCIsIGV0Yy5cbiAgICAgICAgICAvLyBXaGVuIHdlIGVuY291bnRlciBhIGNvbXBsZXRlIG5vdGUgKHdpdGggb3B0aW9uYWwgZG90KSwgd2UgY2xvc2UgaXQgYW5kIHN0YXJ0IGEgbmV3IGJlYXRcbiAgICAgICAgICBjb25zdCBub3RlczogTm90ZVZhbHVlW10gPSBbXTtcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgd2hpbGUgKGkgPCB0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoID0gdG9rZW5baV07XG4gICAgICAgICAgICAvLyBIZWxwZXIgdG8gY2hlY2sgYWhlYWQgc2FmZWx5XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gKG9mZnNldCA9IDEpID0+IHRva2VuW2kgKyBvZmZzZXRdIHx8ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgbm90ZVZhbHVlOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBkb3R0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBjaGFyc0NvbnN1bWVkID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gcGFyc2UgNjQgKHNpeHR5LWZvdXJ0aCBub3RlIC0gcXVhZHJ1cGxlIGNyb2NoZSlcbiAgICAgICAgICAgIGlmIChjaCA9PT0gJzYnICYmIG5leHQoMSkgPT09ICc0Jykge1xuICAgICAgICAgICAgICBub3RlVmFsdWUgPSA2NDtcbiAgICAgICAgICAgICAgY2hhcnNDb25zdW1lZCA9IDI7XG4gICAgICAgICAgICAgIGlmICh0b2tlbltpKzJdID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICBkb3R0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwYXJzZSAzMlxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT09ICczJyAmJiBuZXh0KDEpID09PSAnMicpIHtcbiAgICAgICAgICAgICAgbm90ZVZhbHVlID0gMzI7XG4gICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAyO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baSsyXSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgZG90dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFyc0NvbnN1bWVkID0gMztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcGFyc2UgMTYgKG1pZ2h0IGJlICcxNicgd2l0aCBkb3QgJzE2LicpXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gJzEnICYmIG5leHQoMSkgPT09ICc2Jykge1xuICAgICAgICAgICAgICBub3RlVmFsdWUgPSAxNjtcbiAgICAgICAgICAgICAgY2hhcnNDb25zdW1lZCA9IDI7XG4gICAgICAgICAgICAgIGlmICh0b2tlbltpKzJdID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICBkb3R0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwYXJzZSBzaW5nbGUtZGlnaXQgdmFsdWVzOiA4LDQsMiwxXG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gJzgnIHx8IGNoID09PSAnNCcgfHwgY2ggPT09ICcyJyB8fCBjaCA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgIG5vdGVWYWx1ZSA9IHBhcnNlSW50KGNoLCAxMCk7XG4gICAgICAgICAgICAgIGNoYXJzQ29uc3VtZWQgPSAxO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baSsxXSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgZG90dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFyc0NvbnN1bWVkID0gMjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gc2tpcCB1bmV4cGVjdGVkIGNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5vdGVWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBub3Rlcy5wdXNoKHsgdmFsdWU6IG5vdGVWYWx1ZSwgZG90dGVkIH0pO1xuICAgICAgICAgICAgICBpICs9IGNoYXJzQ29uc3VtZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBlbmQgcGFyc2UgdG9rZW4gY2hhcnNcblxuICAgICAgICAgIGlmIChub3Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBFYWNoIHJoeXRobSB0b2tlbiBiZWNvbWVzIGEgQmVhdC4gSXQncyBwb3NzaWJsZSB0b2tlbiBpbmNsdWRlZCBtdWx0aXBsZSBub3Rlcy5cbiAgICAgICAgICAgIGJlYXRzLnB1c2goeyBub3RlcyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gZW5kIHJoeXRobVRva2VucyBsb29wXG4gICAgICAgIFxuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdjaG9yZCcsIGNob3JkLCBiZWF0cyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZyhjaG9yZE1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTa2lwIHVua25vd24gY2hhcmFjdGVyc1xuICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygxKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgY2hvcmQgZ3JpZCBmcm9tIHNvdXJjZSB0ZXh0IGludG8gY29udGFpbmVyIGVsZW1lbnRcbiAgICovXG4gIHJlbmRlckNob3JkR3JpZChzb3VyY2U6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGdyaWQgPSB0aGlzLnBhcnNlQ2hvcmRHcmlkKHNvdXJjZSk7XG4gICAgXG4gICAgY29uc3Qgc3ZnID0gdGhpcy5jcmVhdGVTVkcoZ3JpZCk7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHN2Zyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIFNWRyBlbGVtZW50IGZvciB0aGUgZW50aXJlIGNob3JkIGdyaWRcbiAgICovXG4gIGNyZWF0ZVNWRyhncmlkOiBDaG9yZEdyaWQpOiBTVkdFbGVtZW50IHtcbiAgICBjb25zdCBtZWFzdXJlc1BlckxpbmUgPSA0O1xuICAgIGNvbnN0IG1lYXN1cmVXaWR0aCA9IDIwMDtcbiAgICBjb25zdCBtZWFzdXJlSGVpZ2h0ID0gMTIwO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBsaW5lcyBjb25zaWRlcmluZyBsaW5lIGJyZWFrc1xuICAgIGxldCBjdXJyZW50TGluZSA9IDA7XG4gICAgbGV0IG1lYXN1cmVzSW5DdXJyZW50TGluZSA9IDA7XG4gICAgY29uc3QgbWVhc3VyZVBvc2l0aW9uczoge21lYXN1cmU6IE1lYXN1cmUsIGxpbmVJbmRleDogbnVtYmVyLCBwb3NJbkxpbmU6IG51bWJlcn1bXSA9IFtdO1xuICAgIFxuICAgIGdyaWQubWVhc3VyZXMuZm9yRWFjaCgobWVhc3VyZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChtZWFzdXJlLmlzTGluZUJyZWFrKSB7XG4gICAgICAgIGN1cnJlbnRMaW5lKys7XG4gICAgICAgIG1lYXN1cmVzSW5DdXJyZW50TGluZSA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1lYXN1cmVzSW5DdXJyZW50TGluZSA+PSBtZWFzdXJlc1BlckxpbmUpIHtcbiAgICAgICAgY3VycmVudExpbmUrKztcbiAgICAgICAgbWVhc3VyZXNJbkN1cnJlbnRMaW5lID0gMDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbWVhc3VyZVBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgbWVhc3VyZSxcbiAgICAgICAgbGluZUluZGV4OiBjdXJyZW50TGluZSxcbiAgICAgICAgcG9zSW5MaW5lOiBtZWFzdXJlc0luQ3VycmVudExpbmVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBtZWFzdXJlc0luQ3VycmVudExpbmUrKztcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpbmVzID0gY3VycmVudExpbmUgKyAxO1xuICAgIGNvbnN0IHdpZHRoID0gbWVhc3VyZXNQZXJMaW5lICogbWVhc3VyZVdpZHRoICsgNjA7XG4gICAgY29uc3QgaGVpZ2h0ID0gbGluZXMgKiAobWVhc3VyZUhlaWdodCArIDIwKSArIDIwO1xuXG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHdpZHRoLnRvU3RyaW5nKCkpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGhlaWdodC50b1N0cmluZygpKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKTtcbiAgICBzdmcuc3R5bGUuYmFja2dyb3VuZCA9ICcjZmZmZmZmJztcblxuICAgIC8vIERyYXcgdGltZSBzaWduYXR1cmUgYXQgdGhlIGJlZ2lubmluZ1xuICAgIGNvbnN0IHRpbWVTaWdUZXh0ID0gdGhpcy5jcmVhdGVUZXh0KGdyaWQudGltZVNpZ25hdHVyZSwgMTAsIDQwLCAnMThweCcsICdib2xkJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHRpbWVTaWdUZXh0KTtcblxuICAgIC8vIERyYXcgYWxsIG1lYXN1cmVzXG4gICAgbWVhc3VyZVBvc2l0aW9ucy5mb3JFYWNoKCh7bWVhc3VyZSwgbGluZUluZGV4LCBwb3NJbkxpbmV9KSA9PiB7XG4gICAgICBjb25zdCB4ID0gcG9zSW5MaW5lICogbWVhc3VyZVdpZHRoICsgNDA7XG4gICAgICBjb25zdCB5ID0gbGluZUluZGV4ICogKG1lYXN1cmVIZWlnaHQgKyAyMCkgKyAyMDtcblxuICAgICAgdGhpcy5kcmF3TWVhc3VyZShzdmcsIG1lYXN1cmUsIHgsIHksIG1lYXN1cmVXaWR0aCwgbWVhc3VyZUhlaWdodCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3ZnO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzaW5nbGUgbWVhc3VyZSB3aXRoIGNob3JkLCByaHl0aG0sIGFuZCBiYXIgbGluZXNcbiAgICovXG4gIGRyYXdNZWFzdXJlKHN2ZzogU1ZHRWxlbWVudCwgbWVhc3VyZTogTWVhc3VyZSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgLy8gRHJhdyBsZWZ0IGJhciBsaW5lXG4gICAgaWYgKG1lYXN1cmUuaXNSZXBlYXRTdGFydCkge1xuICAgICAgdGhpcy5kcmF3UmVwZWF0QmFyKHN2ZywgeCwgeSwgaGVpZ2h0LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kcmF3QmFyKHN2ZywgeCwgeSwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IHNpbmdsZSBzdGFmZiBsaW5lXG4gICAgY29uc3Qgc3RhZmZMaW5lWSA9IHkgKyA4MDtcbiAgICBjb25zdCBzdGFmZkxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCd4MScsICh4ICsgMTApLnRvU3RyaW5nKCkpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgc3RhZmZMaW5lWS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCd4MicsICh4ICsgd2lkdGggLSAxMCkudG9TdHJpbmcoKSk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneTInLCBzdGFmZkxpbmVZLnRvU3RyaW5nKCkpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzEnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoc3RhZmZMaW5lKTtcblxuICAgIC8vIERyYXcgYWxsIGNob3JkcyBpbiB0aGUgbWVhc3VyZVxuICAgIGNvbnN0IGNob3JkV2lkdGggPSB3aWR0aCAvIG1lYXN1cmUuY2hvcmRzLmxlbmd0aDtcbiAgICBtZWFzdXJlLmNob3Jkcy5mb3JFYWNoKChjaG9yZERhdGEsIGNob3JkSW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNob3JkWCA9IHggKyAoY2hvcmRJbmRleCAqIGNob3JkV2lkdGgpICsgMTA7XG4gICAgICBcbiAgICAgIC8vIERyYXcgcmh5dGhtIG5vdGF0aW9uIGZvciB0aGlzIGNob3JkXG4gICAgICBjb25zdCBmaXJzdE5vdGVYID0gdGhpcy5kcmF3Umh5dGhtKHN2ZywgY2hvcmREYXRhLCBjaG9yZFgsIHN0YWZmTGluZVksIGNob3JkV2lkdGggLSAyMCk7XG5cbiAgICAgIC8vIERyYXcgY2hvcmQgbmFtZSBhYm92ZSB0aGUgZmlyc3Qgbm90ZVxuICAgICAgaWYgKGZpcnN0Tm90ZVggIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY2hvcmRUZXh0ID0gdGhpcy5jcmVhdGVUZXh0KGNob3JkRGF0YS5jaG9yZCwgZmlyc3ROb3RlWCwgeSArIDQwLCAnMjRweCcsICdib2xkJyk7XG4gICAgICAgIGNob3JkVGV4dC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoY2hvcmRUZXh0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERyYXcgcmlnaHQgYmFyIGxpbmUgT05MWSBpZiBoYXNCYXJMaW5lIGlzIHRydWUgb3IgaXQncyBhIHJlcGVhdCBlbmRcbiAgICBjb25zdCByaWdodEJhclggPSB4ICsgd2lkdGggLSAyO1xuICAgIGlmIChtZWFzdXJlLmhhc0JhckxpbmUgfHwgbWVhc3VyZS5pc1JlcGVhdEVuZCkge1xuICAgICAgaWYgKG1lYXN1cmUuaXNSZXBlYXRFbmQpIHtcbiAgICAgICAgdGhpcy5kcmF3UmVwZWF0QmFyKHN2ZywgcmlnaHRCYXJYLCB5LCBoZWlnaHQsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZHJhd0JhcihzdmcsIHJpZ2h0QmFyWCwgeSwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbXBsZSBiYXIgbGluZVxuICAgKi9cbiAgZHJhd0Jhcihzdmc6IFNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCB4LnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MScsIHkudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgeC50b1N0cmluZygpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTInLCAoeSArIGhlaWdodCkudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKGxpbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgcmVwZWF0IGJhciB3aXRoIGRvdHNcbiAgICovXG4gIGRyYXdSZXBlYXRCYXIoc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGlzU3RhcnQ6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBvZmZzZXQgPSBpc1N0YXJ0ID8gMCA6IC02O1xuICAgIGNvbnN0IGJhclggPSB4ICsgb2Zmc2V0O1xuICAgIHRoaXMuZHJhd0JhcihzdmcsIGJhclgsIHksIGhlaWdodCk7XG4gICAgdGhpcy5kcmF3QmFyKHN2ZywgYmFyWCArIDQsIHksIGhlaWdodCk7XG5cbiAgICBjb25zdCBkb3RPZmZzZXQgPSBpc1N0YXJ0ID8gMTAgOiAtMTA7XG4gICAgY29uc3QgZG90MVkgPSB5ICsgaGVpZ2h0ICogMC4zNTtcbiAgICBjb25zdCBkb3QyWSA9IHkgKyBoZWlnaHQgKiAwLjY1O1xuXG4gICAgW2RvdDFZLCBkb3QyWV0uZm9yRWFjaChkb3RZID0+IHtcbiAgICAgIGNvbnN0IGNpcmNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsICh4ICsgZG90T2Zmc2V0KS50b1N0cmluZygpKTtcbiAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5JywgZG90WS50b1N0cmluZygpKTtcbiAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ3InLCAnMycpO1xuICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IHJoeXRobSBwYXR0ZXJuIGZvciBhIGNob3JkIGFuZCByZXR1cm4gdGhlIHggcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vdGVcbiAgICovXG4gIGRyYXdSaHl0aG0oc3ZnOiBTVkdFbGVtZW50LCBjaG9yZERhdGE6IENob3JkSW5NZWFzdXJlLCB4OiBudW1iZXIsIHN0YWZmTGluZVk6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IGJlYXRzID0gY2hvcmREYXRhLmJlYXRzO1xuICAgIGNvbnN0IGJlYXRXaWR0aCA9IGJlYXRzLmxlbmd0aCA+IDAgPyB3aWR0aCAvIGJlYXRzLmxlbmd0aCA6IHdpZHRoO1xuICAgIGxldCBjdXJyZW50WCA9IHg7XG4gICAgbGV0IGZpcnN0Tm90ZVg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgYmVhdHMuZm9yRWFjaCgoYmVhdCwgYmVhdEluZGV4KSA9PiB7XG4gICAgICBjb25zdCBmaXJzdE5vdGVJbkJlYXRYID0gdGhpcy5kcmF3QmVhdChzdmcsIGJlYXQsIGN1cnJlbnRYLCBzdGFmZkxpbmVZLCBiZWF0V2lkdGgpO1xuICAgICAgXG4gICAgICBpZiAoYmVhdEluZGV4ID09PSAwICYmIGZpcnN0Tm90ZUluQmVhdFggIT09IG51bGwpIHtcbiAgICAgICAgZmlyc3ROb3RlWCA9IGZpcnN0Tm90ZUluQmVhdFg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGN1cnJlbnRYICs9IGJlYXRXaWR0aDtcbiAgICB9KTtcblxuICAgIHJldHVybiBmaXJzdE5vdGVYO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzaW5nbGUgYmVhdCAtIGhhbmRsZXMgYm90aCBzaW5nbGUgbm90ZXMgYW5kIGJlYW1lZCBncm91cHNcbiAgICogUmV0dXJucyB0aGUgeCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm90ZSBpbiB0aGlzIGJlYXRcbiAgICovXG4gIGRyYXdCZWF0KHN2ZzogU1ZHRWxlbWVudCwgYmVhdDogQmVhdCwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoYmVhdC5ub3Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIC8vIFNpbmdsZSBub3RlIFx1MjAxNCBwYXNzIHRoZSBiZWF0IGFuZCB0aGUgc2luZ2xlIG5vdGUgdG8gZHJhd1NpbmdsZU5vdGUgc28gaXQgY2FuIHJlbmRlciBkb3R0ZWQgcGVyLW5vdGVcbiAgICAgIGNvbnN0IG52ID0gYmVhdC5ub3Rlc1swXTtcbiAgICAgIHJldHVybiB0aGlzLmRyYXdTaW5nbGVOb3RlKHN2ZywgbnYsIHgsIHN0YWZmTGluZVksIHdpZHRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTXVsdGlwbGUgbm90ZXMgLSB1c2UgcHJvcGVyIHJoeXRobWljIGdyb3VwaW5nIHdpdGggYmVhbXNcbiAgICAgIHJldHVybiB0aGlzLmRyYXdOb3RlR3JvdXAoc3ZnLCBiZWF0Lm5vdGVzLCB4LCBzdGFmZkxpbmVZLCB3aWR0aCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzaW5nbGUgbm90ZSB3aXRoIHNsYXNoIGFuZCBzdGVtXG4gICAqL1xuICBkcmF3U2luZ2xlTm90ZShzdmc6IFNWR0VsZW1lbnQsIG52OiBOb3RlVmFsdWUsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBjZW50ZXJYID0geCArIHdpZHRoIC8gMjtcblxuICAgIC8vIERyYXcgc2xhc2ggKHRvcC1yaWdodCB0byBib3R0b20tbGVmdClcbiAgICB0aGlzLmRyYXdTbGFzaChzdmcsIGNlbnRlclgsIHN0YWZmTGluZVkpO1xuXG4gICAgLy8gRHJhdyBzdGVtIGZvciBzaG9ydCBub3RlcyAtIEFUVEFDSEVEIFRPIEJPVFRPTSBPRiBTTEFTSFxuICAgIGlmIChudi52YWx1ZSA+PSAyICYmIG52LnZhbHVlICE9PSAxKSB7XG4gICAgICB0aGlzLmRyYXdTdGVtKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgMjUpO1xuICAgIH1cblxuICAgIC8vIERyYXcgZmxhZ3MgaWYgbmVlZGVkIChmb3Igc2luZ2xlIGlzb2xhdGVkIHNob3J0IG5vdGVzKVxuICAgIGlmIChudi52YWx1ZSA9PT0gOCkge1xuICAgICAgdGhpcy5kcmF3RmxhZyhzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDEpO1xuICAgIH0gZWxzZSBpZiAobnYudmFsdWUgPT09IDE2KSB7XG4gICAgICB0aGlzLmRyYXdGbGFnKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgMik7XG4gICAgfSBlbHNlIGlmIChudi52YWx1ZSA9PT0gMzIpIHtcbiAgICAgIHRoaXMuZHJhd0ZsYWcoc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAzKTtcbiAgICB9IGVsc2UgaWYgKG52LnZhbHVlID09PSA2NCkge1xuICAgICAgdGhpcy5kcmF3RmxhZyhzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDQpO1xuICAgIH1cblxuICAgIC8vIElmIHRoaXMgbm90ZSBpcyBkb3R0ZWQsIGRyYXcgYSBzbWFsbCBkb3QgdG8gdGhlIHJpZ2h0IG9mIHRoZSBub3RlIGhlYWRcbiAgICBpZiAobnYuZG90dGVkKSB7XG4gICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgLy8gcG9zaXRpb24gc2xpZ2h0bHkgcmlnaHQgYW5kIHZlcnRpY2FsbHkgYWxpZ25lZCB0byBzdGFmZkxpbmVZXG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeCcsIChjZW50ZXJYICsgOCkudG9TdHJpbmcoKSk7XG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeScsIChzdGFmZkxpbmVZKS50b1N0cmluZygpKTtcbiAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ3InLCAnMicpO1xuICAgICAgZG90LnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2VudGVyWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgZ3JvdXAgb2Ygbm90ZXMgd2l0aCBwcm9wZXIgYmVhbWluZywgaW5jbHVkaW5nIG5lc3RlZCBiZWFtIHNlZ21lbnRzIGZvciBtaXhlZCBkdXJhdGlvbnNcbiAgICogbm90ZXNWYWx1ZXM6IGFycmF5IG9mIE5vdGVWYWx1ZSBvYmplY3RzIChlLmcuLCBbe3ZhbHVlOjh9LHt2YWx1ZToxNn1dKVxuICAgKlxuICAgKiBCZWhhdmlvcjpcbiAgICogLSBDb21wdXRlIGJlYW1Db3VudCBwZXIgbm90ZSAoOC0+MSwxNi0+MiwzMi0+MykuXG4gICAqIC0gRHJhdyBzdGVtIGZvciBlYWNoIG5vdGUgYW5kIHN0b3JlIHN0ZW0gcG9zaXRpb25zLlxuICAgKiAtIEZvciBlYWNoIGJlYW0gbGV2ZWwsIGRyYXcgY29udGludW91cyBiZWFtcyB3aGVyZSBub3RlcyBoYXZlIGJlYW1Db3VudCA+PSBsZXZlbC5cbiAgICogLSBGb3Igbm90ZXMgdGhhdCBoYXZlIGV4dHJhIGJlYW1zIChsZXZlbCA+IG5laWdoYm9yJ3MgbGV2ZWwpLCBkcmF3IGEgc2hvcnQgc3R1YiBleHRlbmRpbmcgbGVmdCBmcm9tIHRoYXQgc3RlbS5cbiAgICogLSBEcmF3IHBlci1ub3RlIGRvdHRlZCBwb2ludHMgbmV4dCB0byBoZWFkcy5cbiAgICovXG4gIGRyYXdOb3RlR3JvdXAoc3ZnOiBTVkdFbGVtZW50LCBub3Rlc1ZhbHVlczogTm90ZVZhbHVlW10sIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3RlQ291bnQgPSBub3Rlc1ZhbHVlcy5sZW5ndGg7XG4gICAgLy8gSW5jcmVhc2Ugc3BhY2luZyBvbmx5IGlmIHRoZXJlIGFyZSAzMm5kIG9yIDY0dGggbm90ZXMgdG8gYXZvaWQgb3ZlcmxhcHNcbiAgICBjb25zdCBoYXNTbWFsbE5vdGVzID0gbm90ZXNWYWx1ZXMuc29tZShudiA9PiBudi52YWx1ZSA+PSAzMik7XG4gICAgY29uc3Qgbm90ZVNwYWNpbmcgPSBub3RlQ291bnQgPiAwID8gKHdpZHRoIC8gbm90ZUNvdW50KSAqIChoYXNTbWFsbE5vdGVzID8gMS4yIDogMSkgOiB3aWR0aDtcbiAgICBjb25zdCBzdGVtSGVpZ2h0ID0gMjU7XG5cbiAgICAvLyBNYXAgbm90ZXMgdG8gdGhlaXIgZHJhd2luZyBpbmZvXG4gICAgY29uc3Qgbm90ZXM6IHsgbnY6IE5vdGVWYWx1ZTsgYmVhbUNvdW50OiBudW1iZXI7IGNlbnRlclg6IG51bWJlcjsgc3RlbVg/OiBudW1iZXI7IHN0ZW1Ub3BZPzogbnVtYmVyOyBzdGVtQm90dG9tWT86IG51bWJlciB9W10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IG52ID0gbm90ZXNWYWx1ZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0geCArIGkgKiBub3RlU3BhY2luZyArIG5vdGVTcGFjaW5nIC8gMjtcbiAgICAgIGNvbnN0IGJlYW1Db3VudCA9IG52LnZhbHVlID09PSA4ID8gMSA6IG52LnZhbHVlID09PSAxNiA/IDIgOiBudi52YWx1ZSA9PT0gMzIgPyAzIDogbnYudmFsdWUgPT09IDY0ID8gNCA6IDA7XG5cbiAgICAgIC8vIERyYXcgc2xhc2ggZm9yIGVhY2ggbm90ZVxuICAgICAgdGhpcy5kcmF3U2xhc2goc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZKTtcblxuICAgICAgLy8gRHJhdyBzdGVtIGFuZCBzdG9yZSBwb3NpdGlvbnNcbiAgICAgIGNvbnN0IHN0ZW1JbmZvID0gdGhpcy5kcmF3U3RlbShzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIHN0ZW1IZWlnaHQpO1xuICAgICAgbm90ZXMucHVzaCh7IG52LCBiZWFtQ291bnQsIGNlbnRlclgsIHN0ZW1YOiBzdGVtSW5mby54LCBzdGVtVG9wWTogc3RlbUluZm8udG9wWSwgc3RlbUJvdHRvbVk6IHN0ZW1JbmZvLmJvdHRvbVkgfSk7XG5cbiAgICAgIC8vIERyYXcgcGVyLW5vdGUgZG90IG5lYXIgaGVhZCBpZiBkb3R0ZWRcbiAgICAgIGlmIChudi5kb3R0ZWQpIHtcbiAgICAgICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnY3gnLCAoY2VudGVyWCArIDgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkb3Quc2V0QXR0cmlidXRlKCdjeScsIChzdGFmZkxpbmVZKS50b1N0cmluZygpKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgncicsICcyJyk7XG4gICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZG90KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgbWF4aW11bSBiZWFtIGNvdW50IGluIHRoaXMgZ3JvdXBcbiAgICBjb25zdCBtYXhCZWFtQ291bnQgPSBub3Rlcy5yZWR1Y2UoKG0sIG4pID0+IE1hdGgubWF4KG0sIG4uYmVhbUNvdW50KSwgMCk7XG4gICAgaWYgKG1heEJlYW1Db3VudCA9PT0gMCkgcmV0dXJuIG5vdGVzLmxlbmd0aCA/IG5vdGVzWzBdLmNlbnRlclggOiBudWxsO1xuXG4gICAgLy8gYmVhbUdhcCBjb250cm9scyB2ZXJ0aWNhbCBnYXAgYmV0d2VlbiBzdGFja2VkIGJlYW1zXG4gICAgY29uc3QgYmVhbUdhcCA9IDU7XG5cbiAgICAvLyBiYXNlU3RlbUJvdHRvbSBpcyB0aGUgdG9wLW1vc3QgKG1pbikgc3RlbSBib3R0b20gWSBzbyBiZWFtcyBzaXQgb24gdG9wIG9mIHN0ZW1zXG4gICAgLy8gRmlsdGVyIG91dCB1bmRlZmluZWQgdmFsdWVzIGJlZm9yZSBjb21wdXRpbmcgbWluXG4gICAgY29uc3QgdmFsaWRTdGVtQm90dG9tcyA9IG5vdGVzLm1hcChuID0+IG4uc3RlbUJvdHRvbVkpLmZpbHRlcih5ID0+IHkgIT09IHVuZGVmaW5lZCkgYXMgbnVtYmVyW107XG4gICAgY29uc3QgYmFzZVN0ZW1Cb3R0b20gPSB2YWxpZFN0ZW1Cb3R0b21zLmxlbmd0aCA+IDAgPyBNYXRoLm1pbiguLi52YWxpZFN0ZW1Cb3R0b21zKSA6IHN0YWZmTGluZVkgKyAzMDtcblxuICAgIC8vIEZvciBlYWNoIGJlYW0gbGV2ZWwsIGRyYXcgY29udGludW91cyBiZWFtcyBhbmQgc3R1YnMgZm9yIGlzb2xhdGVkIGhpZ2hlciBiZWFtc1xuICAgIGZvciAobGV0IGxldmVsID0gMTsgbGV2ZWwgPD0gbWF4QmVhbUNvdW50OyBsZXZlbCsrKSB7XG4gICAgICBsZXQgc2VnU3RhcnRJbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIC8vIEZpcnN0IHBhc3M6IGRyYXcgY29udGludW91cyBiZWFtIHNlZ21lbnRzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG4gPSBub3Rlc1tpXTtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gbi5iZWFtQ291bnQgPj0gbGV2ZWw7XG5cbiAgICAgICAgLy8gbG9vayBhdCBuZWlnaGJvcnMgdG8gZmluZCBjb250aW51b3VzIHNlZ21lbnRzXG4gICAgICAgIGlmIChhY3RpdmUgJiYgc2VnU3RhcnRJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICAgIC8vIHN0YXJ0IG5ldyBzZWdtZW50XG4gICAgICAgICAgc2VnU3RhcnRJbmRleCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoKCFhY3RpdmUgfHwgaSA9PT0gbm90ZXMubGVuZ3RoIC0gMSkgJiYgc2VnU3RhcnRJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIGNsb3Npbmcgc2VnbWVudDogaWYgd2UncmUgYXQgZW5kIGJ1dCBhY3RpdmUsIHNlZ0VuZCBzaG91bGQgYmUgaTsgb3RoZXJ3aXNlIGktMVxuICAgICAgICAgIGNvbnN0IHNlZ0VuZCA9IChhY3RpdmUgJiYgaSA9PT0gbm90ZXMubGVuZ3RoIC0gMSkgPyBpIDogaSAtIDE7XG5cbiAgICAgICAgICAvLyBjb21wdXRlIGJlYW0gWTogc3RhcnQgZnJvbSBiYXNlU3RlbUJvdHRvbSBhbmQgZ28gdXAgZm9yIGhpZ2hlciBsZXZlbHNcbiAgICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuXG4gICAgICAgICAgLy8gZHJhdyBjb250aW51b3VzIGJlYW0gZnJvbSBzZWdTdGFydEluZGV4IHRvIHNlZ0VuZFxuICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IG5vdGVzW3NlZ1N0YXJ0SW5kZXhdLnN0ZW1YITtcbiAgICAgICAgICBjb25zdCBlbmRYID0gbm90ZXNbc2VnRW5kXS5zdGVtWCE7XG4gICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MScsIHN0YXJ0WC50b1N0cmluZygpKTtcbiAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneDInLCBlbmRYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MicsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZWFtKTtcblxuICAgICAgICAgIHNlZ1N0YXJ0SW5kZXggPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFNlY29uZCBwYXNzOiBkcmF3IHN0dWJzIGZvciBpc29sYXRlZCBub3RlcyBhdCBoaWdoZXIgYmVhbSBsZXZlbHNcbiAgICAgIC8vIEEgc3R1YiBzaG91bGQgcG9pbnQgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgYmVhbWVkIGdyb3VwIChpZiBhbnkgZXhpc3RzKVxuICAgICAgLy8gUlVMRTogRmlyc3Qgbm90ZSBvZiBncm91cCBjYW5ub3QgaGF2ZSBsZWZ0IHN0dWIsIGxhc3Qgbm90ZSBjYW5ub3QgaGF2ZSByaWdodCBzdHViXG4gICAgICAvLyBSSFlUSE1JQyBSVUxFOiBGb3IgZG90dGVkIG5vdGVzIGxpa2UgMTYuMzIsIHRoZSBzdHViIHNob3VsZCBwb2ludCB0b3dhcmRzIHRoZSB3ZWFrZXIgYmVhdFxuICAgICAgY29uc3Qgc3R1Ykxlbmd0aCA9IE1hdGgubWF4KDgsIG5vdGVTcGFjaW5nICogMC40KTtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub3Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuID0gbm90ZXNbaV07XG4gICAgICAgIGNvbnN0IGhhc0xldmVsID0gbi5iZWFtQ291bnQgPj0gbGV2ZWw7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWhhc0xldmVsKSBjb250aW51ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxlZnRCZWFtQ291bnQgPSAoaSAtIDEgPj0gMCkgPyBub3Rlc1tpIC0gMV0uYmVhbUNvdW50IDogMDtcbiAgICAgICAgY29uc3QgcmlnaHRCZWFtQ291bnQgPSAoaSArIDEgPCBub3Rlcy5sZW5ndGgpID8gbm90ZXNbaSArIDFdLmJlYW1Db3VudCA6IDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsZWZ0SGFzTGV2ZWwgPSBsZWZ0QmVhbUNvdW50ID49IGxldmVsO1xuICAgICAgICBjb25zdCByaWdodEhhc0xldmVsID0gcmlnaHRCZWFtQ291bnQgPj0gbGV2ZWw7XG4gICAgICAgIFxuICAgICAgICAvLyBTa2lwIGlmIGJvdGggbmVpZ2hib3JzIGhhdmUgdGhpcyBsZXZlbCAoY29udGludW91cyBiZWFtIGNvdmVycyBpdClcbiAgICAgICAgaWYgKGxlZnRIYXNMZXZlbCAmJiByaWdodEhhc0xldmVsKSBjb250aW51ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZvciBpc29sYXRlZCBub3RlcyBhdCB0aGlzIGxldmVsXG4gICAgICAgIGlmICghbGVmdEhhc0xldmVsICYmICFyaWdodEhhc0xldmVsKSB7XG4gICAgICAgICAgY29uc3QgYmVhbVkgPSBiYXNlU3RlbUJvdHRvbSAtIChsZXZlbCAtIDEpICogYmVhbUdhcDtcbiAgICAgICAgICBjb25zdCBzdGVtWCA9IG4uc3RlbVghO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIGxlZnQgbm90ZSBpcyBkb3R0ZWQgYW5kIHN0cm9uZ2VyIChlLmcuLCAxNi4gaW4gXCIxNi4zMlwiKVxuICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgc3R1YiBzaG91bGQgcG9pbnQgTEVGVCAodG93YXJkcyB0aGUgc3Ryb25nZXIgbm90ZSlcbiAgICAgICAgICBjb25zdCBsZWZ0Tm90ZSA9IGkgPiAwID8gbm90ZXNbaSAtIDFdIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBpc0FmdGVyRG90dGVkU3Ryb25nZXIgPSBsZWZ0Tm90ZSAmJiBsZWZ0Tm90ZS5udi5kb3R0ZWQgJiYgbGVmdE5vdGUubnYudmFsdWUgPCBuLm52LnZhbHVlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHJpZ2h0IG5vdGUgd2lsbCBiZSBkb3R0ZWQgYW5kIGN1cnJlbnQgaXMgc3Ryb25nZXIgKGUuZy4sIDMyIGluIFwiMzIxNi5cIilcbiAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIHN0dWIgc2hvdWxkIHBvaW50IFJJR0hUICh0b3dhcmRzIHRoZSB3ZWFrZXIgbm90ZSB0aGF0IHdpbGwgYmUgZG90dGVkKVxuICAgICAgICAgIGNvbnN0IHJpZ2h0Tm90ZSA9IGkgPCBub3Rlcy5sZW5ndGggLSAxID8gbm90ZXNbaSArIDFdIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBpc0JlZm9yZURvdHRlZFdlYWtlciA9IHJpZ2h0Tm90ZSAmJiByaWdodE5vdGUubnYuZG90dGVkICYmIG4ubnYudmFsdWUgPCByaWdodE5vdGUubnYudmFsdWU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGlzQWZ0ZXJEb3R0ZWRTdHJvbmdlciAmJiBpID4gMCkge1xuICAgICAgICAgICAgLy8gU3R1YiB0byB0aGUgTEVGVCAoYWZ0ZXIgYSBkb3R0ZWQgc3Ryb25nZXIgbm90ZSBsaWtlIDE2LilcbiAgICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RlbVggLSBzdHViTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IG5vdGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIC8vIFN0dWIgdG8gdGhlIFJJR0hUIChkZWZhdWx0IG9yIGJlZm9yZSBhIGRvdHRlZCB3ZWFrZXIgbm90ZSlcbiAgICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RlbVggKyBzdHViTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgIC8vIExhc3Qgbm90ZTogc3R1YiB0byB0aGUgTEVGVFxuICAgICAgICAgICAgY29uc3Qgc3R1YlggPSBzdGVtWCAtIHN0dWJMZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneDEnLCBzdGVtWC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gyJywgc3R1YlgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTInLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoYmVhbSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuICAgICAgICBjb25zdCBzdGVtWCA9IG4uc3RlbVghO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgb25seSBsZWZ0IGhhcyBsZXZlbDogc3R1YiB0byB0aGUgTEVGVCAocGFydCBvZiBncm91cCBvbiB0aGUgbGVmdClcbiAgICAgICAgLy8gQlVUIG9ubHkgaWYgbm90IHRoZSBmaXJzdCBub3RlIG9mIHRoZSBncm91cFxuICAgICAgICBpZiAobGVmdEhhc0xldmVsICYmICFyaWdodEhhc0xldmVsICYmIGkgPiAwKSB7XG4gICAgICAgICAgY29uc3Qgc3R1YlggPSBzdGVtWCAtIHN0dWJMZW5ndGg7XG4gICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MScsIHN0ZW1YLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MicsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZWFtKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgb25seSByaWdodCBoYXMgbGV2ZWw6IHN0dWIgdG8gdGhlIFJJR0hUIChwYXJ0IG9mIGdyb3VwIG9uIHRoZSByaWdodClcbiAgICAgICAgLy8gQlVUIG9ubHkgaWYgbm90IHRoZSBsYXN0IG5vdGUgb2YgdGhlIGdyb3VwXG4gICAgICAgIGlmICghbGVmdEhhc0xldmVsICYmIHJpZ2h0SGFzTGV2ZWwgJiYgaSA8IG5vdGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBjb25zdCBzdHViWCA9IHN0ZW1YICsgc3R1Ykxlbmd0aDtcbiAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kxJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gyJywgc3R1YlgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vdGVzLmxlbmd0aCA/IG5vdGVzWzBdLmNlbnRlclggOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzbGFzaCBhdCA0NVx1MDBCMCBhbmdsZSAodG9wLVJJR0hUIHRvIGJvdHRvbS1MRUZUIC0gcHJvcGVyIHNsYXNoIGRpcmVjdGlvbilcbiAgICogd2l0aCBzdGVtIGF0dGFjaGVkIHRvIHRoZSBib3R0b21cbiAgICovXG4gIGRyYXdTbGFzaChzdmc6IFNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgY29uc3Qgc2xhc2hMZW5ndGggPSAxMDtcbiAgICAvLyA0NVx1MDBCMCBzbGFzaCBmcm9tIHRvcC1SSUdIVCB0byBib3R0b20tTEVGVCAocHJvcGVyIHNsYXNoIGRpcmVjdGlvbilcbiAgICBjb25zdCBzbGFzaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgneDEnLCAoeCArIHNsYXNoTGVuZ3RoLzIpLnRvU3RyaW5nKCkpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgneTEnLCAoeSAtIHNsYXNoTGVuZ3RoLzIpLnRvU3RyaW5nKCkpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgneDInLCAoeCAtIHNsYXNoTGVuZ3RoLzIpLnRvU3RyaW5nKCkpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgneTInLCAoeSArIHNsYXNoTGVuZ3RoLzIpLnRvU3RyaW5nKCkpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICczJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHNsYXNoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc3RlbSBmb3IgYSBub3RlIC0gQVRUQUNIRUQgVE8gQk9UVE9NIE9GIFNMQVNIXG4gICAqIFJldHVybnMgdGhlIFggcG9zaXRpb24gb2YgdGhlIHN0ZW0gYW5kIHRoZSBib3R0b20gWSBmb3IgcHJvcGVyIGJlYW0gYWxpZ25tZW50XG4gICAqL1xuICBkcmF3U3RlbShzdmc6IFNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHt4OiBudW1iZXIsIHRvcFk6IG51bWJlciwgYm90dG9tWTogbnVtYmVyfSB7XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBib3R0b20gcG9pbnQgb2YgdGhlIHNsYXNoICh3aGVyZSBzdGVtIHNob3VsZCBhdHRhY2gpXG4gICAgY29uc3Qgc2xhc2hMZW5ndGggPSAxMDtcbiAgICBjb25zdCBzdGVtU3RhcnRYID0geCAtIHNsYXNoTGVuZ3RoLzIgKyAyOyAvLyBCb3R0b20tbGVmdCBvZiBzbGFzaCArIG9mZnNldFxuICAgIGNvbnN0IHN0ZW1TdGFydFkgPSB5ICsgc2xhc2hMZW5ndGgvMjsgICAgIC8vIEJvdHRvbSBvZiBzbGFzaFxuICAgIFxuICAgIGNvbnN0IHN0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgneDEnLCBzdGVtU3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd5MScsIHN0ZW1TdGFydFkudG9TdHJpbmcoKSk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3gyJywgc3RlbVN0YXJ0WC50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgneTInLCAoc3RlbVN0YXJ0WSArIGhlaWdodCkudG9TdHJpbmcoKSk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHN0ZW0pO1xuXG4gICAgcmV0dXJuIHsgeDogc3RlbVN0YXJ0WCwgdG9wWTogc3RlbVN0YXJ0WSwgYm90dG9tWTogc3RlbVN0YXJ0WSArIGhlaWdodCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgZmxhZyhzKSBmb3IgYSBub3RlIChmb3IgaXNvbGF0ZWQgc2hvcnQgbm90ZXMpXG4gICAqL1xuICBkcmF3RmxhZyhzdmc6IFNWR0VsZW1lbnQsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgY29uc3Qgc2xhc2hMZW5ndGggPSAxMDtcbiAgICBjb25zdCBzdGVtU3RhcnRYID0geCAtIHNsYXNoTGVuZ3RoLzIgKyAyO1xuICAgIGNvbnN0IHN0ZW1Cb3R0b21ZID0gc3RhZmZMaW5lWSArIHNsYXNoTGVuZ3RoLzIgKyAyNTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgZmxhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgICAgY29uc3QgZmxhZ1kgPSBzdGVtQm90dG9tWSAtIGkgKiAxMDtcbiAgICAgIFxuICAgICAgZmxhZy5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSAke3N0ZW1TdGFydFh9ICR7ZmxhZ1l9IFEgJHtzdGVtU3RhcnRYIC0gMTB9ICR7ZmxhZ1kgLSA1fSAke3N0ZW1TdGFydFggLSA4fSAke2ZsYWdZIC0gMTJ9YCk7XG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICAgIGZsYWcuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgZmxhZy5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xuICAgICAgc3ZnLmFwcGVuZENoaWxkKGZsYWcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVdGlsaXR5IGZ1bmN0aW9uIHRvIGNyZWF0ZSB0ZXh0IGVsZW1lbnRzXG4gICAqL1xuICBjcmVhdGVUZXh0KHRleHQ6IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIsIHNpemU6IHN0cmluZywgd2VpZ2h0OiBzdHJpbmcgPSAnbm9ybWFsJyk6IFNWR1RleHRFbGVtZW50IHtcbiAgICBjb25zdCB0ZXh0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCd4JywgeC50b1N0cmluZygpKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCd5JywgeS50b1N0cmluZygpKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmb250LWZhbWlseScsICdBcmlhbCwgc2Fucy1zZXJpZicpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtc2l6ZScsIHNpemUpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtd2VpZ2h0Jywgd2VpZ2h0KTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmaWxsJywgJyMwMDAnKTtcbiAgICB0ZXh0RWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIHJldHVybiB0ZXh0RWw7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnVW5sb2FkaW5nIENob3JkIEdyaWQgcGx1Z2luJyk7XG4gIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQXFEO0FBOEJyRCxJQUFxQixrQkFBckIsY0FBNkMsdUJBQU87QUFBQSxFQUNs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
