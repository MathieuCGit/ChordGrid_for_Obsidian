/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChordGridPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ChordGridPlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("Loading Chord Grid plugin");
    this.registerMarkdownCodeBlockProcessor("chordgrid", (source, el, ctx) => {
      this.renderChordGrid(source, el);
    });
  }
  /**
   * Parse chord grid text into structured data
   */
  parseChordGrid(source) {
    const lines = source.trim().split("\n");
    let timeSignature = "4/4";
    const measures = [];
    for (const line of lines) {
      const trimmed = line.trim();
      if (!trimmed)
        continue;
      if (measures.length === 0) {
        const timeSigMatch = trimmed.match(/^(\d+\/\d+)/);
        if (timeSigMatch) {
          timeSignature = timeSigMatch[1];
        }
      }
      const tokens = this.tokenizeLine(trimmed);
      let currentMeasure = { chords: [], hasBarLine: false };
      let isRepeatStart = false;
      let isRepeatEnd = false;
      for (const token of tokens) {
        if (token.type === "repeatStart") {
          isRepeatStart = true;
        } else if (token.type === "repeatEnd") {
          isRepeatEnd = true;
        } else if (token.type === "barLine") {
          if (currentMeasure.chords.length > 0) {
            currentMeasure.hasBarLine = true;
            currentMeasure.isRepeatEnd = isRepeatEnd;
            measures.push(currentMeasure);
            currentMeasure = {
              chords: [],
              hasBarLine: false,
              isRepeatStart: false
            };
            isRepeatEnd = false;
          }
        } else if (token.type === "chord") {
          currentMeasure.chords.push({
            chord: token.chord,
            beats: token.beats
          });
        }
      }
      if (currentMeasure.chords.length > 0) {
        currentMeasure.isRepeatEnd = isRepeatEnd;
        measures.push(currentMeasure);
      }
      if (measures.length > 0 && isRepeatStart) {
        measures[0].isRepeatStart = true;
      }
      if (lines.length > 1 && line !== lines[lines.length - 1]) {
        measures.push({ chords: [], hasBarLine: false, isLineBreak: true });
      }
    }
    return { timeSignature, measures };
  }
  /**
   * Tokenize a line into meaningful tokens
   *
   * Changes: rhythm tokens now parse per-note dotted flags.
   * A token may be like:
   *  - "4" => quarter
   *  - "4." => dotted quarter
   *  - "3232161616" => sequence of small notes (32 32 16 16 16 ...)
   *  - "8.16" or "8. 16" => dotted eighth + sixteenth (we support both forms)
   */
  tokenizeLine(line) {
    const tokens = [];
    let remaining = line.replace(/^\d+\/\d+\s*/, "");
    while (remaining.length > 0) {
      remaining = remaining.trim();
      if (remaining.startsWith("||:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(3);
        continue;
      } else if (remaining.startsWith("|:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith(":||")) {
        tokens.push({ type: "repeatEnd" });
        remaining = remaining.substring(3);
        continue;
      }
      if (remaining.startsWith("||")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith("|")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(1);
        continue;
      }
      const chordMatch = remaining.match(/^([A-G][#b]?(?:maj|min|m|dim|aug|sus|[0-9])*)\[([0-9.\s]+)\]/);
      if (chordMatch) {
        const chord = chordMatch[1];
        const rhythm = chordMatch[2];
        const beats = [];
        const rhythmTokens = rhythm.split(/\s+/).filter((r) => r.length > 0);
        for (const token of rhythmTokens) {
          const notes = [];
          let i = 0;
          while (i < token.length) {
            const ch = token[i];
            const next = (offset = 1) => token[i + offset] || "";
            if (ch === "3" && next(1) === "2") {
              let dotted = false;
              if (token[i + 2] === ".") {
                dotted = true;
              }
              notes.push({ value: 32, dotted });
              i += 2;
              if (token[i] === ".")
                i += 1;
            } else if (ch === "1" && next(1) === "6") {
              let dotted = false;
              if (token[i + 2] === ".")
                dotted = true;
              notes.push({ value: 16, dotted });
              i += 2;
              if (token[i] === ".")
                i += 1;
            } else if (ch === "8" || ch === "4" || ch === "2" || ch === "1") {
              let dotted = false;
              if (token[i + 1] === ".")
                dotted = true;
              const val = parseInt(ch, 10);
              notes.push({ value: val, dotted });
              i += 1;
              if (token[i] === ".")
                i += 1;
            } else {
              i += 1;
            }
          }
          if (notes.length > 0) {
            beats.push({ notes });
          }
        }
        tokens.push({ type: "chord", chord, beats });
        remaining = remaining.substring(chordMatch[0].length);
        continue;
      }
      remaining = remaining.substring(1);
    }
    return tokens;
  }
  /**
   * Render chord grid from source text into container element
   */
  renderChordGrid(source, container) {
    const grid = this.parseChordGrid(source);
    const svg = this.createSVG(grid);
    container.empty();
    container.appendChild(svg);
  }
  /**
   * Create SVG element for the entire chord grid
   */
  createSVG(grid) {
    const measuresPerLine = 4;
    const measureWidth = 200;
    const measureHeight = 120;
    let currentLine = 0;
    let measuresInCurrentLine = 0;
    const measurePositions = [];
    grid.measures.forEach((measure, index) => {
      if (measure.isLineBreak) {
        currentLine++;
        measuresInCurrentLine = 0;
        return;
      }
      if (measuresInCurrentLine >= measuresPerLine) {
        currentLine++;
        measuresInCurrentLine = 0;
      }
      measurePositions.push({
        measure,
        lineIndex: currentLine,
        posInLine: measuresInCurrentLine
      });
      measuresInCurrentLine++;
    });
    const lines = currentLine + 1;
    const width = measuresPerLine * measureWidth + 60;
    const height = lines * (measureHeight + 20) + 20;
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", width.toString());
    svg.setAttribute("height", height.toString());
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg.style.background = "#ffffff";
    const timeSigText = this.createText(grid.timeSignature, 10, 40, "18px", "bold");
    svg.appendChild(timeSigText);
    measurePositions.forEach(({ measure, lineIndex, posInLine }) => {
      const x = posInLine * measureWidth + 40;
      const y = lineIndex * (measureHeight + 20) + 20;
      this.drawMeasure(svg, measure, x, y, measureWidth, measureHeight);
    });
    return svg;
  }
  /**
   * Draw a single measure with chord, rhythm, and bar lines
   */
  drawMeasure(svg, measure, x, y, width, height) {
    if (measure.isRepeatStart) {
      this.drawRepeatBar(svg, x, y, height, true);
    } else {
      this.drawBar(svg, x, y, height);
    }
    const staffLineY = y + 80;
    const staffLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    staffLine.setAttribute("x1", (x + 10).toString());
    staffLine.setAttribute("y1", staffLineY.toString());
    staffLine.setAttribute("x2", (x + width - 10).toString());
    staffLine.setAttribute("y2", staffLineY.toString());
    staffLine.setAttribute("stroke", "#000");
    staffLine.setAttribute("stroke-width", "1");
    svg.appendChild(staffLine);
    const chordWidth = width / measure.chords.length;
    measure.chords.forEach((chordData, chordIndex) => {
      const chordX = x + chordIndex * chordWidth + 10;
      const firstNoteX = this.drawRhythm(svg, chordData, chordX, staffLineY, chordWidth - 20);
      if (firstNoteX !== null) {
        const chordText = this.createText(chordData.chord, firstNoteX, y + 40, "24px", "bold");
        chordText.setAttribute("text-anchor", "middle");
        svg.appendChild(chordText);
      }
    });
    const rightBarX = x + width - 2;
    if (measure.hasBarLine || measure.isRepeatEnd) {
      if (measure.isRepeatEnd) {
        this.drawRepeatBar(svg, rightBarX, y, height, false);
      } else {
        this.drawBar(svg, rightBarX, y, height);
      }
    }
  }
  /**
   * Draw a simple bar line
   */
  drawBar(svg, x, y, height) {
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", x.toString());
    line.setAttribute("y1", y.toString());
    line.setAttribute("x2", x.toString());
    line.setAttribute("y2", (y + height).toString());
    line.setAttribute("stroke", "#000");
    line.setAttribute("stroke-width", "2");
    svg.appendChild(line);
  }
  /**
   * Draw repeat bar with dots
   */
  drawRepeatBar(svg, x, y, height, isStart) {
    const offset = isStart ? 0 : -6;
    const barX = x + offset;
    this.drawBar(svg, barX, y, height);
    this.drawBar(svg, barX + 4, y, height);
    const dotOffset = isStart ? 10 : -10;
    const dot1Y = y + height * 0.35;
    const dot2Y = y + height * 0.65;
    [dot1Y, dot2Y].forEach((dotY) => {
      const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", (x + dotOffset).toString());
      circle.setAttribute("cy", dotY.toString());
      circle.setAttribute("r", "3");
      circle.setAttribute("fill", "#000");
      svg.appendChild(circle);
    });
  }
  /**
   * Draw rhythm pattern for a chord and return the x position of the first note
   */
  drawRhythm(svg, chordData, x, staffLineY, width) {
    const beats = chordData.beats;
    const beatWidth = beats.length > 0 ? width / beats.length : width;
    let currentX = x;
    let firstNoteX = null;
    beats.forEach((beat, beatIndex) => {
      const firstNoteInBeatX = this.drawBeat(svg, beat, currentX, staffLineY, beatWidth);
      if (beatIndex === 0 && firstNoteInBeatX !== null) {
        firstNoteX = firstNoteInBeatX;
      }
      currentX += beatWidth;
    });
    return firstNoteX;
  }
  /**
   * Draw a single beat - handles both single notes and beamed groups
   * Returns the x position of the first note in this beat
   */
  drawBeat(svg, beat, x, staffLineY, width) {
    if (beat.notes.length === 1) {
      const nv = beat.notes[0];
      return this.drawSingleNote(svg, nv, x, staffLineY, width);
    } else {
      return this.drawNoteGroup(svg, beat.notes, x, staffLineY, width);
    }
  }
  /**
   * Draw a single note with slash and stem
   */
  drawSingleNote(svg, nv, x, staffLineY, width) {
    const centerX = x + width / 2;
    this.drawSlash(svg, centerX, staffLineY);
    if (nv.value >= 2 && nv.value !== 1) {
      this.drawStem(svg, centerX, staffLineY, 25);
    }
    if (nv.value === 8) {
      this.drawFlag(svg, centerX, staffLineY, 1);
    } else if (nv.value === 16) {
      this.drawFlag(svg, centerX, staffLineY, 2);
    } else if (nv.value === 32) {
      this.drawFlag(svg, centerX, staffLineY, 3);
    }
    if (nv.dotted) {
      const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      dot.setAttribute("cx", (centerX + 8).toString());
      dot.setAttribute("cy", staffLineY.toString());
      dot.setAttribute("r", "2");
      dot.setAttribute("fill", "#000");
      svg.appendChild(dot);
    }
    return centerX;
  }
  /**
   * Draw a group of notes with proper beaming, including nested beam segments for mixed durations
   * notesValues: array of NoteValue objects (e.g., [{value:8},{value:16}])
   *
   * Behavior:
   * - Compute beamCount per note (8->1,16->2,32->3).
   * - Draw stem for each note and store stem positions.
   * - For each beam level, draw continuous beams where notes have beamCount >= level.
   * - For notes that have extra beams (level > neighbor's level), draw a short stub extending left from that stem.
   * - Draw per-note dotted points next to heads.
   */
  drawNoteGroup(svg, notesValues, x, staffLineY, width) {
    const noteCount = notesValues.length;
    const noteSpacing = noteCount > 0 ? width / noteCount : width;
    const stemHeight = 25;
    const notes = [];
    for (let i = 0; i < noteCount; i++) {
      const nv = notesValues[i];
      const centerX = x + i * noteSpacing + noteSpacing / 2;
      const beamCount = nv.value === 8 ? 1 : nv.value === 16 ? 2 : nv.value === 32 ? 3 : 0;
      this.drawSlash(svg, centerX, staffLineY);
      const stemInfo = this.drawStem(svg, centerX, staffLineY, stemHeight);
      notes.push({ nv, beamCount, centerX, stemX: stemInfo.x, stemTopY: stemInfo.topY, stemBottomY: stemInfo.bottomY });
      if (nv.dotted) {
        const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        dot.setAttribute("cx", (centerX + 8).toString());
        dot.setAttribute("cy", staffLineY.toString());
        dot.setAttribute("r", "2");
        dot.setAttribute("fill", "#000");
        svg.appendChild(dot);
      }
    }
    const maxBeamCount = notes.reduce((m, n) => Math.max(m, n.beamCount), 0);
    if (maxBeamCount === 0)
      return notes.length ? notes[0].centerX : null;
    const beamGap = 5;
    const validStemBottoms = notes.map((n) => n.stemBottomY).filter((y) => y !== void 0);
    const baseStemBottom = validStemBottoms.length > 0 ? Math.min(...validStemBottoms) : staffLineY + 30;
    for (let level = 1; level <= maxBeamCount; level++) {
      let segStartIndex = null;
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const active = n.beamCount >= level;
        if (active && segStartIndex === null) {
          segStartIndex = i;
        } else if ((!active || i === notes.length - 1) && segStartIndex !== null) {
          const segEnd = active && i === notes.length - 1 ? i : i - 1;
          const beamY = baseStemBottom - (level - 1) * beamGap;
          const startX = notes[segStartIndex].stemX;
          const endX = notes[segEnd].stemX;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", startX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", endX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
          segStartIndex = null;
        }
      }
      const stubLength = Math.max(8, noteSpacing * 0.4);
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const hasLevel = n.beamCount >= level;
        const leftHas = i - 1 >= 0 ? notes[i - 1].beamCount >= level : false;
        if (i > 0 && hasLevel && !leftHas) {
          const beamY = baseStemBottom - (level - 1) * beamGap;
          const startX = n.stemX;
          const stubX = startX - stubLength;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", startX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", stubX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
        }
      }
    }
    return notes.length ? notes[0].centerX : null;
  }
  /**
   * Draw a slash at 45Â° angle (top-RIGHT to bottom-LEFT - proper slash direction)
   * with stem attached to the bottom
   */
  drawSlash(svg, x, y) {
    const slashLength = 10;
    const slash = document.createElementNS("http://www.w3.org/2000/svg", "line");
    slash.setAttribute("x1", (x + slashLength / 2).toString());
    slash.setAttribute("y1", (y - slashLength / 2).toString());
    slash.setAttribute("x2", (x - slashLength / 2).toString());
    slash.setAttribute("y2", (y + slashLength / 2).toString());
    slash.setAttribute("stroke", "#000");
    slash.setAttribute("stroke-width", "3");
    svg.appendChild(slash);
  }
  /**
   * Draw a stem for a note - ATTACHED TO BOTTOM OF SLASH
   * Returns the X position of the stem and the bottom Y for proper beam alignment
   */
  drawStem(svg, x, y, height) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemStartY = y + slashLength / 2;
    const stem = document.createElementNS("http://www.w3.org/2000/svg", "line");
    stem.setAttribute("x1", stemStartX.toString());
    stem.setAttribute("y1", stemStartY.toString());
    stem.setAttribute("x2", stemStartX.toString());
    stem.setAttribute("y2", (stemStartY + height).toString());
    stem.setAttribute("stroke", "#000");
    stem.setAttribute("stroke-width", "2");
    svg.appendChild(stem);
    return { x: stemStartX, topY: stemStartY, bottomY: stemStartY + height };
  }
  /**
   * Draw flag(s) for a note (for isolated short notes)
   */
  drawFlag(svg, x, staffLineY, count) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemBottomY = staffLineY + slashLength / 2 + 25;
    for (let i = 0; i < count; i++) {
      const flag = document.createElementNS("http://www.w3.org/2000/svg", "path");
      const flagY = stemBottomY - i * 10;
      flag.setAttribute("d", `M ${stemStartX} ${flagY} Q ${stemStartX - 10} ${flagY - 5} ${stemStartX - 8} ${flagY - 12}`);
      flag.setAttribute("stroke", "#000");
      flag.setAttribute("stroke-width", "2");
      flag.setAttribute("fill", "none");
      svg.appendChild(flag);
    }
  }
  /**
   * Utility function to create text elements
   */
  createText(text, x, y, size, weight = "normal") {
    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
    textEl.setAttribute("x", x.toString());
    textEl.setAttribute("y", y.toString());
    textEl.setAttribute("font-family", "Arial, sans-serif");
    textEl.setAttribute("font-size", size);
    textEl.setAttribute("font-weight", weight);
    textEl.setAttribute("fill", "#000");
    textEl.textContent = text;
    return textEl;
  }
  onunload() {
    console.log("Unloading Chord Grid plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBJbnRlcmZhY2UgZGVmaW5pdGlvbnMgZm9yIG91ciBkYXRhIHN0cnVjdHVyZXNcbmludGVyZmFjZSBOb3RlVmFsdWUge1xuICB2YWx1ZTogbnVtYmVyOyAgICAgICAgLy8gMSwyLDQsOCwxNiwzMi4uLlxuICBkb3R0ZWQ/OiBib29sZWFuOyAgICAgLy8gd2hldGhlciB0aGlzIHNwZWNpZmljIG5vdGUgaXMgZG90dGVkXG59XG5cbmludGVyZmFjZSBCZWF0IHtcbiAgbm90ZXM6IE5vdGVWYWx1ZVtdOyAvLyBMaXN0IG9mIHJoeXRobWljIHZhbHVlcyAoOCwgNCwgMiwgMSwgZXRjLikgd2l0aCBvcHRpb25hbCBkb3R0ZWQgZmxhZ1xufVxuXG5pbnRlcmZhY2UgQ2hvcmRJbk1lYXN1cmUge1xuICBjaG9yZDogc3RyaW5nO1xuICBiZWF0czogQmVhdFtdO1xufVxuXG5pbnRlcmZhY2UgTWVhc3VyZSB7XG4gIGNob3JkczogQ2hvcmRJbk1lYXN1cmVbXTtcbiAgaXNSZXBlYXRTdGFydD86IGJvb2xlYW47XG4gIGlzUmVwZWF0RW5kPzogYm9vbGVhbjtcbiAgaGFzQmFyTGluZT86IGJvb2xlYW47XG4gIGlzTGluZUJyZWFrPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENob3JkR3JpZCB7XG4gIHRpbWVTaWduYXR1cmU6IHN0cmluZztcbiAgbWVhc3VyZXM6IE1lYXN1cmVbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hvcmRHcmlkUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIENob3JkIEdyaWQgcGx1Z2luJyk7XG5cbiAgICAvLyBSZWdpc3RlciBtYXJrZG93biBjb2RlIGJsb2NrIHByb2Nlc3NvciBmb3IgJ2Nob3JkZ3JpZCcgYmxvY2tzXG4gICAgdGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKCdjaG9yZGdyaWQnLCAoc291cmNlLCBlbCwgY3R4KSA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNob3JkR3JpZChzb3VyY2UsIGVsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBjaG9yZCBncmlkIHRleHQgaW50byBzdHJ1Y3R1cmVkIGRhdGFcbiAgICovXG4gIHBhcnNlQ2hvcmRHcmlkKHNvdXJjZTogc3RyaW5nKTogQ2hvcmRHcmlkIHtcbiAgICBjb25zdCBsaW5lcyA9IHNvdXJjZS50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgIGxldCB0aW1lU2lnbmF0dXJlID0gJzQvNCc7XG4gICAgY29uc3QgbWVhc3VyZXM6IE1lYXN1cmVbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICBpZiAoIXRyaW1tZWQpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBQYXJzZSB0aW1lIHNpZ25hdHVyZSAob25seSBmcm9tIGZpcnN0IGxpbmUpXG4gICAgICBpZiAobWVhc3VyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IHRpbWVTaWdNYXRjaCA9IHRyaW1tZWQubWF0Y2goL14oXFxkK1xcL1xcZCspLyk7XG4gICAgICAgIGlmICh0aW1lU2lnTWF0Y2gpIHtcbiAgICAgICAgICB0aW1lU2lnbmF0dXJlID0gdGltZVNpZ01hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIGNob3JkcyBpbnRvIG1lYXN1cmVzIGJhc2VkIG9uIGJhciBsaW5lc1xuICAgICAgY29uc3QgdG9rZW5zID0gdGhpcy50b2tlbml6ZUxpbmUodHJpbW1lZCk7XG4gICAgICBsZXQgY3VycmVudE1lYXN1cmU6IE1lYXN1cmUgPSB7IGNob3JkczogW10sIGhhc0JhckxpbmU6IGZhbHNlIH07XG4gICAgICBsZXQgaXNSZXBlYXRTdGFydCA9IGZhbHNlO1xuICAgICAgbGV0IGlzUmVwZWF0RW5kID0gZmFsc2U7XG5cbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICAgIGlmICh0b2tlbi50eXBlID09PSAncmVwZWF0U3RhcnQnKSB7XG4gICAgICAgICAgaXNSZXBlYXRTdGFydCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gJ3JlcGVhdEVuZCcpIHtcbiAgICAgICAgICBpc1JlcGVhdEVuZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gJ2JhckxpbmUnKSB7XG4gICAgICAgICAgLy8gQmFyIGxpbmUgbWVhbnMgd2UgZmluYWxpemUgdGhlIGN1cnJlbnQgbWVhc3VyZSBhbmQgc3RhcnQgYSBuZXcgb25lXG4gICAgICAgICAgaWYgKGN1cnJlbnRNZWFzdXJlLmNob3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdXJyZW50TWVhc3VyZS5oYXNCYXJMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlLmlzUmVwZWF0RW5kID0gaXNSZXBlYXRFbmQ7XG4gICAgICAgICAgICBtZWFzdXJlcy5wdXNoKGN1cnJlbnRNZWFzdXJlKTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IG1lYXN1cmVcbiAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlID0geyBcbiAgICAgICAgICAgICAgY2hvcmRzOiBbXSwgXG4gICAgICAgICAgICAgIGhhc0JhckxpbmU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1JlcGVhdFN0YXJ0OiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlzUmVwZWF0RW5kID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdjaG9yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgY2hvcmQgdG8gY3VycmVudCBtZWFzdXJlXG4gICAgICAgICAgY3VycmVudE1lYXN1cmUuY2hvcmRzLnB1c2goe1xuICAgICAgICAgICAgY2hvcmQ6IHRva2VuLmNob3JkISxcbiAgICAgICAgICAgIGJlYXRzOiB0b2tlbi5iZWF0cyFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCBmb3JnZXQgdGhlIGxhc3QgbWVhc3VyZVxuICAgICAgaWYgKGN1cnJlbnRNZWFzdXJlLmNob3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGN1cnJlbnRNZWFzdXJlLmlzUmVwZWF0RW5kID0gaXNSZXBlYXRFbmQ7XG4gICAgICAgIG1lYXN1cmVzLnB1c2goY3VycmVudE1lYXN1cmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSByZXBlYXQgc3RhcnQgdG8gdGhlIEZJUlNUIG1lYXN1cmUgaWYgd2UgaGF2ZSBvbmVcbiAgICAgIGlmIChtZWFzdXJlcy5sZW5ndGggPiAwICYmIGlzUmVwZWF0U3RhcnQpIHtcbiAgICAgICAgbWVhc3VyZXNbMF0uaXNSZXBlYXRTdGFydCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBsaW5lIGJyZWFrIG1hcmtlciBpZiB0aGVyZSBhcmUgbW9yZSBsaW5lc1xuICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgJiYgbGluZSAhPT0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgbWVhc3VyZXMucHVzaCh7IGNob3JkczogW10sIGhhc0JhckxpbmU6IGZhbHNlLCBpc0xpbmVCcmVhazogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyB0aW1lU2lnbmF0dXJlLCBtZWFzdXJlcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFRva2VuaXplIGEgbGluZSBpbnRvIG1lYW5pbmdmdWwgdG9rZW5zXG4gICAqXG4gICAqIENoYW5nZXM6IHJoeXRobSB0b2tlbnMgbm93IHBhcnNlIHBlci1ub3RlIGRvdHRlZCBmbGFncy5cbiAgICogQSB0b2tlbiBtYXkgYmUgbGlrZTpcbiAgICogIC0gXCI0XCIgPT4gcXVhcnRlclxuICAgKiAgLSBcIjQuXCIgPT4gZG90dGVkIHF1YXJ0ZXJcbiAgICogIC0gXCIzMjMyMTYxNjE2XCIgPT4gc2VxdWVuY2Ugb2Ygc21hbGwgbm90ZXMgKDMyIDMyIDE2IDE2IDE2IC4uLilcbiAgICogIC0gXCI4LjE2XCIgb3IgXCI4LiAxNlwiID0+IGRvdHRlZCBlaWdodGggKyBzaXh0ZWVudGggKHdlIHN1cHBvcnQgYm90aCBmb3JtcylcbiAgICovXG4gIHRva2VuaXplTGluZShsaW5lOiBzdHJpbmcpOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiB7XG4gICAgY29uc3QgdG9rZW5zOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiA9IFtdO1xuICAgIGxldCByZW1haW5pbmcgPSBsaW5lLnJlcGxhY2UoL15cXGQrXFwvXFxkK1xccyovLCAnJyk7IC8vIFJlbW92ZSB0aW1lIHNpZ25hdHVyZVxuICAgIFxuICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHJlcGVhdCBtYXJrZXJzXG4gICAgICBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3x8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygzKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygyKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCc6fHwnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdyZXBlYXRFbmQnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGJhciBsaW5lc1xuICAgICAgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8fCcpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ2JhckxpbmUnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3wnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdiYXJMaW5lJyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBjaG9yZHMgLSBhbGxvdyBkb3RzIGluIHJoeXRobSB0b2tlbnMgKGUuZy4sIDQuIGZvciBkb3R0ZWQgcXVhcnRlcilcbiAgICAgIGNvbnN0IGNob3JkTWF0Y2ggPSByZW1haW5pbmcubWF0Y2goL14oW0EtR11bI2JdPyg/Om1hanxtaW58bXxkaW18YXVnfHN1c3xbMC05XSkqKVxcWyhbMC05Llxcc10rKVxcXS8pO1xuICAgICAgaWYgKGNob3JkTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgY2hvcmQgPSBjaG9yZE1hdGNoWzFdO1xuICAgICAgICBjb25zdCByaHl0aG0gPSBjaG9yZE1hdGNoWzJdO1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2Ugcmh5dGhtIGludG8gYmVhdHNcbiAgICAgICAgY29uc3QgYmVhdHM6IEJlYXRbXSA9IFtdO1xuICAgICAgICAvLyBzcGxpdCB0b2tlbnMgb24gc3BhY2VzOyBlYWNoIHRva2VuIG1heSBpdHNlbGYgY29udGFpbiBtdWx0aXBsZSBudW1lcmljIGVsZW1lbnRzXG4gICAgICAgIGNvbnN0IHJoeXRobVRva2VucyA9IHJoeXRobS5zcGxpdCgvXFxzKy8pLmZpbHRlcihyID0+IHIubGVuZ3RoID4gMCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHJoeXRobVRva2Vucykge1xuICAgICAgICAgIC8vIFdlIHdpbGwgcGFyc2UgdGhlIHRva2VuIGNoYXJhY3RlciBieSBjaGFyYWN0ZXIsIGFsbG93aW5nIGZvciBwYXR0ZXJucyBsaWtlOlxuICAgICAgICAgIC8vIFwiOC5cIiwgXCIxNlwiLCBcIjMyMzJcIiwgXCI4LjE2XCIsIGV0Yy5cbiAgICAgICAgICBjb25zdCBub3RlczogTm90ZVZhbHVlW10gPSBbXTtcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgd2hpbGUgKGkgPCB0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoID0gdG9rZW5baV07XG4gICAgICAgICAgICAvLyBIZWxwZXIgdG8gY2hlY2sgYWhlYWQgc2FmZWx5XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gKG9mZnNldCA9IDEpID0+IHRva2VuW2kgKyBvZmZzZXRdIHx8ICcnO1xuICAgICAgICAgICAgLy8gcGFyc2UgMzJcbiAgICAgICAgICAgIGlmIChjaCA9PT0gJzMnICYmIG5leHQoMSkgPT09ICcyJykge1xuICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgZG90IGltbWVkaWF0ZWx5IGFmdGVyICczMicgKGxpa2UgXCIzMi5cIilcbiAgICAgICAgICAgICAgbGV0IGRvdHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baSsyXSA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgZG90dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBjb25zdW1lIGRvdCBieSBpbmNyZW1lbnRpbmcgZXh0cmEgbGF0ZXJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBub3Rlcy5wdXNoKHsgdmFsdWU6IDMyLCBkb3R0ZWQgfSk7XG4gICAgICAgICAgICAgIC8vIGFkdmFuY2UgaSBieSAyIChmb3IgJzMyJylcbiAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgYSBkb3QsIHNraXAgaXRcbiAgICAgICAgICAgICAgaWYgKHRva2VuW2ldID09PSAnLicpIGkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHBhcnNlIDE2IChtaWdodCBiZSAnMTYnIHdpdGggZG90ICcxNi4nKVxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT09ICcxJyAmJiBuZXh0KDEpID09PSAnNicpIHtcbiAgICAgICAgICAgICAgbGV0IGRvdHRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baSsyXSA9PT0gJy4nKSBkb3R0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBub3Rlcy5wdXNoKHsgdmFsdWU6IDE2LCBkb3R0ZWQgfSk7XG4gICAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgICAgaWYgKHRva2VuW2ldID09PSAnLicpIGkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHBhcnNlIHNpbmdsZS1kaWdpdCB2YWx1ZXM6IDgsNCwyLDFcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSAnOCcgfHwgY2ggPT09ICc0JyB8fCBjaCA9PT0gJzInIHx8IGNoID09PSAnMScpIHtcbiAgICAgICAgICAgICAgLy8gaGFuZGxlICcxJyBwb3NzaWJseSBwYXJ0IG9mICcxNicgYnV0IHdlIGFscmVhZHkgaGFuZGxlZCAnMTYnIGFib3ZlXG4gICAgICAgICAgICAgIGxldCBkb3R0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgaWYgKHRva2VuW2krMV0gPT09ICcuJykgZG90dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY29uc3QgdmFsID0gcGFyc2VJbnQoY2gsIDEwKTtcbiAgICAgICAgICAgICAgbm90ZXMucHVzaCh7IHZhbHVlOiB2YWwsIGRvdHRlZCB9KTtcbiAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICBpZiAodG9rZW5baV0gPT09ICcuJykgaSArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gc2tpcCB1bmV4cGVjdGVkIGNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gZW5kIHBhcnNlIHRva2VuIGNoYXJzXG5cbiAgICAgICAgICBpZiAobm90ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gRWFjaCByaHl0aG0gdG9rZW4gYmVjb21lcyBhIEJlYXQuIEl0J3MgcG9zc2libGUgdG9rZW4gaW5jbHVkZWQgbXVsdGlwbGUgbm90ZXMuXG4gICAgICAgICAgICBiZWF0cy5wdXNoKHsgbm90ZXMgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIGVuZCByaHl0aG1Ub2tlbnMgbG9vcFxuICAgICAgICBcbiAgICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiAnY2hvcmQnLCBjaG9yZCwgYmVhdHMgfSk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoY2hvcmRNYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2tpcCB1bmtub3duIGNoYXJhY3RlcnNcbiAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zdWJzdHJpbmcoMSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGNob3JkIGdyaWQgZnJvbSBzb3VyY2UgdGV4dCBpbnRvIGNvbnRhaW5lciBlbGVtZW50XG4gICAqL1xuICByZW5kZXJDaG9yZEdyaWQoc291cmNlOiBzdHJpbmcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBncmlkID0gdGhpcy5wYXJzZUNob3JkR3JpZChzb3VyY2UpO1xuICAgIFxuICAgIGNvbnN0IHN2ZyA9IHRoaXMuY3JlYXRlU1ZHKGdyaWQpO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBTVkcgZWxlbWVudCBmb3IgdGhlIGVudGlyZSBjaG9yZCBncmlkXG4gICAqL1xuICBjcmVhdGVTVkcoZ3JpZDogQ2hvcmRHcmlkKTogU1ZHRWxlbWVudCB7XG4gICAgY29uc3QgbWVhc3VyZXNQZXJMaW5lID0gNDtcbiAgICBjb25zdCBtZWFzdXJlV2lkdGggPSAyMDA7XG4gICAgY29uc3QgbWVhc3VyZUhlaWdodCA9IDEyMDtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgbGluZXMgY29uc2lkZXJpbmcgbGluZSBicmVha3NcbiAgICBsZXQgY3VycmVudExpbmUgPSAwO1xuICAgIGxldCBtZWFzdXJlc0luQ3VycmVudExpbmUgPSAwO1xuICAgIGNvbnN0IG1lYXN1cmVQb3NpdGlvbnM6IHttZWFzdXJlOiBNZWFzdXJlLCBsaW5lSW5kZXg6IG51bWJlciwgcG9zSW5MaW5lOiBudW1iZXJ9W10gPSBbXTtcbiAgICBcbiAgICBncmlkLm1lYXN1cmVzLmZvckVhY2goKG1lYXN1cmUsIGluZGV4KSA9PiB7XG4gICAgICBpZiAobWVhc3VyZS5pc0xpbmVCcmVhaykge1xuICAgICAgICBjdXJyZW50TGluZSsrO1xuICAgICAgICBtZWFzdXJlc0luQ3VycmVudExpbmUgPSAwO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChtZWFzdXJlc0luQ3VycmVudExpbmUgPj0gbWVhc3VyZXNQZXJMaW5lKSB7XG4gICAgICAgIGN1cnJlbnRMaW5lKys7XG4gICAgICAgIG1lYXN1cmVzSW5DdXJyZW50TGluZSA9IDA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIG1lYXN1cmVQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgIG1lYXN1cmUsXG4gICAgICAgIGxpbmVJbmRleDogY3VycmVudExpbmUsXG4gICAgICAgIHBvc0luTGluZTogbWVhc3VyZXNJbkN1cnJlbnRMaW5lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbWVhc3VyZXNJbkN1cnJlbnRMaW5lKys7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsaW5lcyA9IGN1cnJlbnRMaW5lICsgMTtcbiAgICBjb25zdCB3aWR0aCA9IG1lYXN1cmVzUGVyTGluZSAqIG1lYXN1cmVXaWR0aCArIDYwO1xuICAgIGNvbnN0IGhlaWdodCA9IGxpbmVzICogKG1lYXN1cmVIZWlnaHQgKyAyMCkgKyAyMDtcblxuICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aC50b1N0cmluZygpKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQudG9TdHJpbmcoKSk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YCk7XG4gICAgc3ZnLnN0eWxlLmJhY2tncm91bmQgPSAnI2ZmZmZmZic7XG5cbiAgICAvLyBEcmF3IHRpbWUgc2lnbmF0dXJlIGF0IHRoZSBiZWdpbm5pbmdcbiAgICBjb25zdCB0aW1lU2lnVGV4dCA9IHRoaXMuY3JlYXRlVGV4dChncmlkLnRpbWVTaWduYXR1cmUsIDEwLCA0MCwgJzE4cHgnLCAnYm9sZCcpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZCh0aW1lU2lnVGV4dCk7XG5cbiAgICAvLyBEcmF3IGFsbCBtZWFzdXJlc1xuICAgIG1lYXN1cmVQb3NpdGlvbnMuZm9yRWFjaCgoe21lYXN1cmUsIGxpbmVJbmRleCwgcG9zSW5MaW5lfSkgPT4ge1xuICAgICAgY29uc3QgeCA9IHBvc0luTGluZSAqIG1lYXN1cmVXaWR0aCArIDQwO1xuICAgICAgY29uc3QgeSA9IGxpbmVJbmRleCAqIChtZWFzdXJlSGVpZ2h0ICsgMjApICsgMjA7XG5cbiAgICAgIHRoaXMuZHJhd01lYXN1cmUoc3ZnLCBtZWFzdXJlLCB4LCB5LCBtZWFzdXJlV2lkdGgsIG1lYXN1cmVIZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN2ZztcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2luZ2xlIG1lYXN1cmUgd2l0aCBjaG9yZCwgcmh5dGhtLCBhbmQgYmFyIGxpbmVzXG4gICAqL1xuICBkcmF3TWVhc3VyZShzdmc6IFNWR0VsZW1lbnQsIG1lYXN1cmU6IE1lYXN1cmUsIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIC8vIERyYXcgbGVmdCBiYXIgbGluZVxuICAgIGlmIChtZWFzdXJlLmlzUmVwZWF0U3RhcnQpIHtcbiAgICAgIHRoaXMuZHJhd1JlcGVhdEJhcihzdmcsIHgsIHksIGhlaWdodCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHJhd0JhcihzdmcsIHgsIHksIGhlaWdodCk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBzaW5nbGUgc3RhZmYgbGluZVxuICAgIGNvbnN0IHN0YWZmTGluZVkgPSB5ICsgODA7XG4gICAgY29uc3Qgc3RhZmZMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneDEnLCAoeCArIDEwKS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCd5MScsIHN0YWZmTGluZVkudG9TdHJpbmcoKSk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneDInLCAoeCArIHdpZHRoIC0gMTApLnRvU3RyaW5nKCkpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgc3RhZmZMaW5lWS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHN0YWZmTGluZSk7XG5cbiAgICAvLyBEcmF3IGFsbCBjaG9yZHMgaW4gdGhlIG1lYXN1cmVcbiAgICBjb25zdCBjaG9yZFdpZHRoID0gd2lkdGggLyBtZWFzdXJlLmNob3Jkcy5sZW5ndGg7XG4gICAgbWVhc3VyZS5jaG9yZHMuZm9yRWFjaCgoY2hvcmREYXRhLCBjaG9yZEluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjaG9yZFggPSB4ICsgKGNob3JkSW5kZXggKiBjaG9yZFdpZHRoKSArIDEwO1xuICAgICAgXG4gICAgICAvLyBEcmF3IHJoeXRobSBub3RhdGlvbiBmb3IgdGhpcyBjaG9yZFxuICAgICAgY29uc3QgZmlyc3ROb3RlWCA9IHRoaXMuZHJhd1JoeXRobShzdmcsIGNob3JkRGF0YSwgY2hvcmRYLCBzdGFmZkxpbmVZLCBjaG9yZFdpZHRoIC0gMjApO1xuXG4gICAgICAvLyBEcmF3IGNob3JkIG5hbWUgYWJvdmUgdGhlIGZpcnN0IG5vdGVcbiAgICAgIGlmIChmaXJzdE5vdGVYICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNob3JkVGV4dCA9IHRoaXMuY3JlYXRlVGV4dChjaG9yZERhdGEuY2hvcmQsIGZpcnN0Tm90ZVgsIHkgKyA0MCwgJzI0cHgnLCAnYm9sZCcpO1xuICAgICAgICBjaG9yZFRleHQuc2V0QXR0cmlidXRlKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGNob3JkVGV4dCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBEcmF3IHJpZ2h0IGJhciBsaW5lIE9OTFkgaWYgaGFzQmFyTGluZSBpcyB0cnVlIG9yIGl0J3MgYSByZXBlYXQgZW5kXG4gICAgY29uc3QgcmlnaHRCYXJYID0geCArIHdpZHRoIC0gMjtcbiAgICBpZiAobWVhc3VyZS5oYXNCYXJMaW5lIHx8IG1lYXN1cmUuaXNSZXBlYXRFbmQpIHtcbiAgICAgIGlmIChtZWFzdXJlLmlzUmVwZWF0RW5kKSB7XG4gICAgICAgIHRoaXMuZHJhd1JlcGVhdEJhcihzdmcsIHJpZ2h0QmFyWCwgeSwgaGVpZ2h0LCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRyYXdCYXIoc3ZnLCByaWdodEJhclgsIHksIGhlaWdodCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzaW1wbGUgYmFyIGxpbmVcbiAgICovXG4gIGRyYXdCYXIoc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgeC50b1N0cmluZygpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTEnLCB5LnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgKHkgKyBoZWlnaHQpLnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IHJlcGVhdCBiYXIgd2l0aCBkb3RzXG4gICAqL1xuICBkcmF3UmVwZWF0QmFyKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpc1N0YXJ0OiBib29sZWFuKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaXNTdGFydCA/IDAgOiAtNjtcbiAgICBjb25zdCBiYXJYID0geCArIG9mZnNldDtcbiAgICB0aGlzLmRyYXdCYXIoc3ZnLCBiYXJYLCB5LCBoZWlnaHQpO1xuICAgIHRoaXMuZHJhd0JhcihzdmcsIGJhclggKyA0LCB5LCBoZWlnaHQpO1xuXG4gICAgY29uc3QgZG90T2Zmc2V0ID0gaXNTdGFydCA/IDEwIDogLTEwO1xuICAgIGNvbnN0IGRvdDFZID0geSArIGhlaWdodCAqIDAuMzU7XG4gICAgY29uc3QgZG90MlkgPSB5ICsgaGVpZ2h0ICogMC42NTtcblxuICAgIFtkb3QxWSwgZG90MlldLmZvckVhY2goZG90WSA9PiB7XG4gICAgICBjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCAoeCArIGRvdE9mZnNldCkudG9TdHJpbmcoKSk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsIGRvdFkudG9TdHJpbmcoKSk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcbiAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgICAgc3ZnLmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyByaHl0aG0gcGF0dGVybiBmb3IgYSBjaG9yZCBhbmQgcmV0dXJuIHRoZSB4IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub3RlXG4gICAqL1xuICBkcmF3Umh5dGhtKHN2ZzogU1ZHRWxlbWVudCwgY2hvcmREYXRhOiBDaG9yZEluTWVhc3VyZSwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgICBjb25zdCBiZWF0cyA9IGNob3JkRGF0YS5iZWF0cztcbiAgICBjb25zdCBiZWF0V2lkdGggPSBiZWF0cy5sZW5ndGggPiAwID8gd2lkdGggLyBiZWF0cy5sZW5ndGggOiB3aWR0aDtcbiAgICBsZXQgY3VycmVudFggPSB4O1xuICAgIGxldCBmaXJzdE5vdGVYOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgIGJlYXRzLmZvckVhY2goKGJlYXQsIGJlYXRJbmRleCkgPT4ge1xuICAgICAgY29uc3QgZmlyc3ROb3RlSW5CZWF0WCA9IHRoaXMuZHJhd0JlYXQoc3ZnLCBiZWF0LCBjdXJyZW50WCwgc3RhZmZMaW5lWSwgYmVhdFdpZHRoKTtcbiAgICAgIFxuICAgICAgaWYgKGJlYXRJbmRleCA9PT0gMCAmJiBmaXJzdE5vdGVJbkJlYXRYICE9PSBudWxsKSB7XG4gICAgICAgIGZpcnN0Tm90ZVggPSBmaXJzdE5vdGVJbkJlYXRYO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjdXJyZW50WCArPSBiZWF0V2lkdGg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmlyc3ROb3RlWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2luZ2xlIGJlYXQgLSBoYW5kbGVzIGJvdGggc2luZ2xlIG5vdGVzIGFuZCBiZWFtZWQgZ3JvdXBzXG4gICAqIFJldHVybnMgdGhlIHggcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vdGUgaW4gdGhpcyBiZWF0XG4gICAqL1xuICBkcmF3QmVhdChzdmc6IFNWR0VsZW1lbnQsIGJlYXQ6IEJlYXQsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgaWYgKGJlYXQubm90ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAvLyBTaW5nbGUgbm90ZSBcdTIwMTQgcGFzcyB0aGUgYmVhdCBhbmQgdGhlIHNpbmdsZSBub3RlIHRvIGRyYXdTaW5nbGVOb3RlIHNvIGl0IGNhbiByZW5kZXIgZG90dGVkIHBlci1ub3RlXG4gICAgICBjb25zdCBudiA9IGJlYXQubm90ZXNbMF07XG4gICAgICByZXR1cm4gdGhpcy5kcmF3U2luZ2xlTm90ZShzdmcsIG52LCB4LCBzdGFmZkxpbmVZLCB3aWR0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpcGxlIG5vdGVzIC0gdXNlIHByb3BlciByaHl0aG1pYyBncm91cGluZyB3aXRoIGJlYW1zXG4gICAgICByZXR1cm4gdGhpcy5kcmF3Tm90ZUdyb3VwKHN2ZywgYmVhdC5ub3RlcywgeCwgc3RhZmZMaW5lWSwgd2lkdGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2luZ2xlIG5vdGUgd2l0aCBzbGFzaCBhbmQgc3RlbVxuICAgKi9cbiAgZHJhd1NpbmdsZU5vdGUoc3ZnOiBTVkdFbGVtZW50LCBudjogTm90ZVZhbHVlLCB4OiBudW1iZXIsIHN0YWZmTGluZVk6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgY2VudGVyWCA9IHggKyB3aWR0aCAvIDI7XG5cbiAgICAvLyBEcmF3IHNsYXNoICh0b3AtcmlnaHQgdG8gYm90dG9tLWxlZnQpXG4gICAgdGhpcy5kcmF3U2xhc2goc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZKTtcblxuICAgIC8vIERyYXcgc3RlbSBmb3Igc2hvcnQgbm90ZXMgLSBBVFRBQ0hFRCBUTyBCT1RUT00gT0YgU0xBU0hcbiAgICBpZiAobnYudmFsdWUgPj0gMiAmJiBudi52YWx1ZSAhPT0gMSkge1xuICAgICAgdGhpcy5kcmF3U3RlbShzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDI1KTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IGZsYWdzIGlmIG5lZWRlZCAoZm9yIHNpbmdsZSBpc29sYXRlZCBzaG9ydCBub3RlcylcbiAgICBpZiAobnYudmFsdWUgPT09IDgpIHtcbiAgICAgIHRoaXMuZHJhd0ZsYWcoc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAxKTtcbiAgICB9IGVsc2UgaWYgKG52LnZhbHVlID09PSAxNikge1xuICAgICAgdGhpcy5kcmF3RmxhZyhzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDIpO1xuICAgIH0gZWxzZSBpZiAobnYudmFsdWUgPT09IDMyKSB7XG4gICAgICB0aGlzLmRyYXdGbGFnKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgMyk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhpcyBub3RlIGlzIGRvdHRlZCwgZHJhdyBhIHNtYWxsIGRvdCB0byB0aGUgcmlnaHQgb2YgdGhlIG5vdGUgaGVhZFxuICAgIGlmIChudi5kb3R0ZWQpIHtcbiAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XG4gICAgICAvLyBwb3NpdGlvbiBzbGlnaHRseSByaWdodCBhbmQgdmVydGljYWxseSBhbGlnbmVkIHRvIHN0YWZmTGluZVlcbiAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N4JywgKGNlbnRlclggKyA4KS50b1N0cmluZygpKTtcbiAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N5JywgKHN0YWZmTGluZVkpLnRvU3RyaW5nKCkpO1xuICAgICAgZG90LnNldEF0dHJpYnV0ZSgncicsICcyJyk7XG4gICAgICBkb3Quc2V0QXR0cmlidXRlKCdmaWxsJywgJyMwMDAnKTtcbiAgICAgIHN2Zy5hcHBlbmRDaGlsZChkb3QpO1xuICAgIH1cblxuICAgIHJldHVybiBjZW50ZXJYO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBncm91cCBvZiBub3RlcyB3aXRoIHByb3BlciBiZWFtaW5nLCBpbmNsdWRpbmcgbmVzdGVkIGJlYW0gc2VnbWVudHMgZm9yIG1peGVkIGR1cmF0aW9uc1xuICAgKiBub3Rlc1ZhbHVlczogYXJyYXkgb2YgTm90ZVZhbHVlIG9iamVjdHMgKGUuZy4sIFt7dmFsdWU6OH0se3ZhbHVlOjE2fV0pXG4gICAqXG4gICAqIEJlaGF2aW9yOlxuICAgKiAtIENvbXB1dGUgYmVhbUNvdW50IHBlciBub3RlICg4LT4xLDE2LT4yLDMyLT4zKS5cbiAgICogLSBEcmF3IHN0ZW0gZm9yIGVhY2ggbm90ZSBhbmQgc3RvcmUgc3RlbSBwb3NpdGlvbnMuXG4gICAqIC0gRm9yIGVhY2ggYmVhbSBsZXZlbCwgZHJhdyBjb250aW51b3VzIGJlYW1zIHdoZXJlIG5vdGVzIGhhdmUgYmVhbUNvdW50ID49IGxldmVsLlxuICAgKiAtIEZvciBub3RlcyB0aGF0IGhhdmUgZXh0cmEgYmVhbXMgKGxldmVsID4gbmVpZ2hib3IncyBsZXZlbCksIGRyYXcgYSBzaG9ydCBzdHViIGV4dGVuZGluZyBsZWZ0IGZyb20gdGhhdCBzdGVtLlxuICAgKiAtIERyYXcgcGVyLW5vdGUgZG90dGVkIHBvaW50cyBuZXh0IHRvIGhlYWRzLlxuICAgKi9cbiAgZHJhd05vdGVHcm91cChzdmc6IFNWR0VsZW1lbnQsIG5vdGVzVmFsdWVzOiBOb3RlVmFsdWVbXSwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vdGVDb3VudCA9IG5vdGVzVmFsdWVzLmxlbmd0aDtcbiAgICBjb25zdCBub3RlU3BhY2luZyA9IG5vdGVDb3VudCA+IDAgPyB3aWR0aCAvIG5vdGVDb3VudCA6IHdpZHRoO1xuICAgIGNvbnN0IHN0ZW1IZWlnaHQgPSAyNTtcblxuICAgIC8vIE1hcCBub3RlcyB0byB0aGVpciBkcmF3aW5nIGluZm9cbiAgICBjb25zdCBub3RlczogeyBudjogTm90ZVZhbHVlOyBiZWFtQ291bnQ6IG51bWJlcjsgY2VudGVyWDogbnVtYmVyOyBzdGVtWD86IG51bWJlcjsgc3RlbVRvcFk/OiBudW1iZXI7IHN0ZW1Cb3R0b21ZPzogbnVtYmVyIH1bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub3RlQ291bnQ7IGkrKykge1xuICAgICAgY29uc3QgbnYgPSBub3Rlc1ZhbHVlc1tpXTtcbiAgICAgIGNvbnN0IGNlbnRlclggPSB4ICsgaSAqIG5vdGVTcGFjaW5nICsgbm90ZVNwYWNpbmcgLyAyO1xuICAgICAgY29uc3QgYmVhbUNvdW50ID0gbnYudmFsdWUgPT09IDggPyAxIDogbnYudmFsdWUgPT09IDE2ID8gMiA6IG52LnZhbHVlID09PSAzMiA/IDMgOiAwO1xuXG4gICAgICAvLyBEcmF3IHNsYXNoIGZvciBlYWNoIG5vdGVcbiAgICAgIHRoaXMuZHJhd1NsYXNoKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSk7XG5cbiAgICAgIC8vIERyYXcgc3RlbSBhbmQgc3RvcmUgcG9zaXRpb25zXG4gICAgICBjb25zdCBzdGVtSW5mbyA9IHRoaXMuZHJhd1N0ZW0oc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCBzdGVtSGVpZ2h0KTtcbiAgICAgIG5vdGVzLnB1c2goeyBudiwgYmVhbUNvdW50LCBjZW50ZXJYLCBzdGVtWDogc3RlbUluZm8ueCwgc3RlbVRvcFk6IHN0ZW1JbmZvLnRvcFksIHN0ZW1Cb3R0b21ZOiBzdGVtSW5mby5ib3R0b21ZIH0pO1xuXG4gICAgICAvLyBEcmF3IHBlci1ub3RlIGRvdCBuZWFyIGhlYWQgaWYgZG90dGVkXG4gICAgICBpZiAobnYuZG90dGVkKSB7XG4gICAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XG4gICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ2N4JywgKGNlbnRlclggKyA4KS50b1N0cmluZygpKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZSgnY3knLCAoc3RhZmZMaW5lWSkudG9TdHJpbmcoKSk7XG4gICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoJ3InLCAnMicpO1xuICAgICAgICBkb3Quc2V0QXR0cmlidXRlKCdmaWxsJywgJyMwMDAnKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGRvdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIG1heGltdW0gYmVhbSBjb3VudCBpbiB0aGlzIGdyb3VwXG4gICAgY29uc3QgbWF4QmVhbUNvdW50ID0gbm90ZXMucmVkdWNlKChtLCBuKSA9PiBNYXRoLm1heChtLCBuLmJlYW1Db3VudCksIDApO1xuICAgIGlmIChtYXhCZWFtQ291bnQgPT09IDApIHJldHVybiBub3Rlcy5sZW5ndGggPyBub3Rlc1swXS5jZW50ZXJYIDogbnVsbDtcblxuICAgIC8vIGJlYW1HYXAgY29udHJvbHMgdmVydGljYWwgZ2FwIGJldHdlZW4gc3RhY2tlZCBiZWFtc1xuICAgIGNvbnN0IGJlYW1HYXAgPSA1O1xuXG4gICAgLy8gYmFzZVN0ZW1Cb3R0b20gaXMgdGhlIHRvcC1tb3N0IChtaW4pIHN0ZW0gYm90dG9tIFkgc28gYmVhbXMgc2l0IG9uIHRvcCBvZiBzdGVtc1xuICAgIC8vIEZpbHRlciBvdXQgdW5kZWZpbmVkIHZhbHVlcyBiZWZvcmUgY29tcHV0aW5nIG1pblxuICAgIGNvbnN0IHZhbGlkU3RlbUJvdHRvbXMgPSBub3Rlcy5tYXAobiA9PiBuLnN0ZW1Cb3R0b21ZKS5maWx0ZXIoeSA9PiB5ICE9PSB1bmRlZmluZWQpIGFzIG51bWJlcltdO1xuICAgIGNvbnN0IGJhc2VTdGVtQm90dG9tID0gdmFsaWRTdGVtQm90dG9tcy5sZW5ndGggPiAwID8gTWF0aC5taW4oLi4udmFsaWRTdGVtQm90dG9tcykgOiBzdGFmZkxpbmVZICsgMzA7XG5cbiAgICAvLyBGb3IgZWFjaCBiZWFtIGxldmVsLCBkcmF3IGNvbnRpbnVvdXMgYmVhbXMgYW5kIHN0dWJzIGZvciBpc29sYXRlZCBoaWdoZXIgYmVhbXNcbiAgICBmb3IgKGxldCBsZXZlbCA9IDE7IGxldmVsIDw9IG1heEJlYW1Db3VudDsgbGV2ZWwrKykge1xuICAgICAgbGV0IHNlZ1N0YXJ0SW5kZXg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG4gPSBub3Rlc1tpXTtcbiAgICAgICAgY29uc3QgYWN0aXZlID0gbi5iZWFtQ291bnQgPj0gbGV2ZWw7XG5cbiAgICAgICAgLy8gbG9vayBhdCBuZWlnaGJvcnMgdG8gZmluZCBjb250aW51b3VzIHNlZ21lbnRzXG4gICAgICAgIGlmIChhY3RpdmUgJiYgc2VnU3RhcnRJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICAgIC8vIHN0YXJ0IG5ldyBzZWdtZW50XG4gICAgICAgICAgc2VnU3RhcnRJbmRleCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoKCFhY3RpdmUgfHwgaSA9PT0gbm90ZXMubGVuZ3RoIC0gMSkgJiYgc2VnU3RhcnRJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIGNsb3Npbmcgc2VnbWVudDogaWYgd2UncmUgYXQgZW5kIGJ1dCBhY3RpdmUsIHNlZ0VuZCBzaG91bGQgYmUgaTsgb3RoZXJ3aXNlIGktMVxuICAgICAgICAgIGNvbnN0IHNlZ0VuZCA9IChhY3RpdmUgJiYgaSA9PT0gbm90ZXMubGVuZ3RoIC0gMSkgPyBpIDogaSAtIDE7XG5cbiAgICAgICAgICAvLyBjb21wdXRlIGJlYW0gWTogc3RhcnQgZnJvbSBiYXNlU3RlbUJvdHRvbSBhbmQgZ28gdXAgZm9yIGhpZ2hlciBsZXZlbHNcbiAgICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuXG4gICAgICAgICAgLy8gZHJhdyBjb250aW51b3VzIGJlYW0gZnJvbSBzZWdTdGFydEluZGV4IHRvIHNlZ0VuZFxuICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IG5vdGVzW3NlZ1N0YXJ0SW5kZXhdLnN0ZW1YITtcbiAgICAgICAgICBjb25zdCBlbmRYID0gbm90ZXNbc2VnRW5kXS5zdGVtWCE7XG4gICAgICAgICAgY29uc3QgYmVhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MScsIHN0YXJ0WC50b1N0cmluZygpKTtcbiAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneTEnLCBiZWFtWS50b1N0cmluZygpKTtcbiAgICAgICAgICBiZWFtLnNldEF0dHJpYnV0ZSgneDInLCBlbmRYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MicsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZWFtKTtcblxuICAgICAgICAgIHNlZ1N0YXJ0SW5kZXggPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE5vdyBkcmF3IHN0dWJzIGZvciBub3RlcyB0aGF0IGhhdmUgdGhpcyBsZXZlbCBidXQgdGhlaXIgbGVmdCBuZWlnaGJvciBET0VTIE5PVCBoYXZlIGl0XG4gICAgICAvLyBUaGlzIGNyZWF0ZXMgdGhlIFwiZXh0cmEgYmVhbSB0byB0aGUgbGVmdCB0aGF0IHN0b3BzIGluIHRoZSB2b2lkXCIgZWZmZWN0LlxuICAgICAgLy8gQlVUOiBkb24ndCBkcmF3IGEgc3R1YiBmb3IgdGhlIGZpcnN0IG5vdGUgKGk9MCkgdG8gYXZvaWQgaXQgZXh0ZW5kaW5nIGJleW9uZCB0aGUgZ3JvdXAgYm91bmRhcnlcbiAgICAgIGNvbnN0IHN0dWJMZW5ndGggPSBNYXRoLm1heCg4LCBub3RlU3BhY2luZyAqIDAuNCk7IC8vIGxlbmd0aCBvZiBzdHViIHRvIGRyYXcgbGVmdHdhcmRzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG4gPSBub3Rlc1tpXTtcbiAgICAgICAgY29uc3QgaGFzTGV2ZWwgPSBuLmJlYW1Db3VudCA+PSBsZXZlbDtcbiAgICAgICAgY29uc3QgbGVmdEhhcyA9IChpIC0gMSA+PSAwKSA/IChub3Rlc1tpIC0gMV0uYmVhbUNvdW50ID49IGxldmVsKSA6IGZhbHNlO1xuICAgICAgICAvLyBPbmx5IGRyYXcgc3R1YiBpZiBub3QgdGhlIGZpcnN0IG5vdGUgQU5EIGhhcyBsZXZlbCBBTkQgbGVmdCBkb2Vzbid0IGhhdmUgaXRcbiAgICAgICAgaWYgKGkgPiAwICYmIGhhc0xldmVsICYmICFsZWZ0SGFzKSB7XG4gICAgICAgICAgLy8gZHJhdyBhIGxlZnQtZmFjaW5nIHN0dWIgZnJvbSB0aGlzIHN0ZW1cbiAgICAgICAgICBjb25zdCBiZWFtWSA9IGJhc2VTdGVtQm90dG9tIC0gKGxldmVsIC0gMSkgKiBiZWFtR2FwO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IG4uc3RlbVghO1xuICAgICAgICAgIGNvbnN0IHN0dWJYID0gc3RhcnRYIC0gc3R1Ykxlbmd0aDtcbiAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIHN0dWJYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MicsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChiZWFtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBub3Rlcy5sZW5ndGggPyBub3Rlc1swXS5jZW50ZXJYIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2xhc2ggYXQgNDVcdTAwQjAgYW5nbGUgKHRvcC1SSUdIVCB0byBib3R0b20tTEVGVCAtIHByb3BlciBzbGFzaCBkaXJlY3Rpb24pXG4gICAqIHdpdGggc3RlbSBhdHRhY2hlZCB0byB0aGUgYm90dG9tXG4gICAqL1xuICBkcmF3U2xhc2goc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGNvbnN0IHNsYXNoTGVuZ3RoID0gMTA7XG4gICAgLy8gNDVcdTAwQjAgc2xhc2ggZnJvbSB0b3AtUklHSFQgdG8gYm90dG9tLUxFRlQgKHByb3BlciBzbGFzaCBkaXJlY3Rpb24pXG4gICAgY29uc3Qgc2xhc2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3gxJywgKHggKyBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3kxJywgKHkgLSBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3gyJywgKHggLSBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3kyJywgKHkgKyBzbGFzaExlbmd0aC8yKS50b1N0cmluZygpKTtcbiAgICBzbGFzaC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMycpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChzbGFzaCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHN0ZW0gZm9yIGEgbm90ZSAtIEFUVEFDSEVEIFRPIEJPVFRPTSBPRiBTTEFTSFxuICAgKiBSZXR1cm5zIHRoZSBYIHBvc2l0aW9uIG9mIHRoZSBzdGVtIGFuZCB0aGUgYm90dG9tIFkgZm9yIHByb3BlciBiZWFtIGFsaWdubWVudFxuICAgKi9cbiAgZHJhd1N0ZW0oc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB7eDogbnVtYmVyLCB0b3BZOiBudW1iZXIsIGJvdHRvbVk6IG51bWJlcn0ge1xuICAgIC8vIENhbGN1bGF0ZSB0aGUgYm90dG9tIHBvaW50IG9mIHRoZSBzbGFzaCAod2hlcmUgc3RlbSBzaG91bGQgYXR0YWNoKVxuICAgIGNvbnN0IHNsYXNoTGVuZ3RoID0gMTA7XG4gICAgY29uc3Qgc3RlbVN0YXJ0WCA9IHggLSBzbGFzaExlbmd0aC8yICsgMjsgLy8gQm90dG9tLWxlZnQgb2Ygc2xhc2ggKyBvZmZzZXRcbiAgICBjb25zdCBzdGVtU3RhcnRZID0geSArIHNsYXNoTGVuZ3RoLzI7ICAgICAvLyBCb3R0b20gb2Ygc2xhc2hcbiAgICBcbiAgICBjb25zdCBzdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RlbVN0YXJ0WC50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgneTEnLCBzdGVtU3RhcnRZLnRvU3RyaW5nKCkpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd4MicsIHN0ZW1TdGFydFgudG9TdHJpbmcoKSk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3kyJywgKHN0ZW1TdGFydFkgKyBoZWlnaHQpLnRvU3RyaW5nKCkpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChzdGVtKTtcblxuICAgIHJldHVybiB7IHg6IHN0ZW1TdGFydFgsIHRvcFk6IHN0ZW1TdGFydFksIGJvdHRvbVk6IHN0ZW1TdGFydFkgKyBoZWlnaHQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGZsYWcocykgZm9yIGEgbm90ZSAoZm9yIGlzb2xhdGVkIHNob3J0IG5vdGVzKVxuICAgKi9cbiAgZHJhd0ZsYWcoc3ZnOiBTVkdFbGVtZW50LCB4OiBudW1iZXIsIHN0YWZmTGluZVk6IG51bWJlciwgY291bnQ6IG51bWJlcikge1xuICAgIGNvbnN0IHNsYXNoTGVuZ3RoID0gMTA7XG4gICAgY29uc3Qgc3RlbVN0YXJ0WCA9IHggLSBzbGFzaExlbmd0aC8yICsgMjtcbiAgICBjb25zdCBzdGVtQm90dG9tWSA9IHN0YWZmTGluZVkgKyBzbGFzaExlbmd0aC8yICsgMjU7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IGZsYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbiAgICAgIGNvbnN0IGZsYWdZID0gc3RlbUJvdHRvbVkgLSBpICogMTA7XG4gICAgICBcbiAgICAgIGZsYWcuc2V0QXR0cmlidXRlKCdkJywgYE0gJHtzdGVtU3RhcnRYfSAke2ZsYWdZfSBRICR7c3RlbVN0YXJ0WCAtIDEwfSAke2ZsYWdZIC0gNX0gJHtzdGVtU3RhcnRYIC0gOH0gJHtmbGFnWSAtIDEyfWApO1xuICAgICAgZmxhZy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgICAgIGZsYWcuc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcbiAgICAgIHN2Zy5hcHBlbmRDaGlsZChmbGFnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgdGV4dCBlbGVtZW50c1xuICAgKi9cbiAgY3JlYXRlVGV4dCh0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyLCBzaXplOiBzdHJpbmcsIHdlaWdodDogc3RyaW5nID0gJ25vcm1hbCcpOiBTVkdUZXh0RWxlbWVudCB7XG4gICAgY29uc3QgdGV4dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICd0ZXh0Jyk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgneCcsIHgudG9TdHJpbmcoKSk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgneScsIHkudG9TdHJpbmcoKSk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZm9udC1mYW1pbHknLCAnQXJpYWwsIHNhbnMtc2VyaWYnKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCBzaXplKTtcbiAgICB0ZXh0RWwuc2V0QXR0cmlidXRlKCdmb250LXdlaWdodCcsIHdlaWdodCk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjMDAwJyk7XG4gICAgdGV4dEVsLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICByZXR1cm4gdGV4dEVsO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBDaG9yZCBHcmlkIHBsdWdpbicpO1xuICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFxRDtBQThCckQsSUFBcUIsa0JBQXJCLGNBQTZDLHVCQUFPO0FBQUEsRUFDbEQsTUFBTSxTQUFTO0FBQ2IsWUFBUSxJQUFJLDJCQUEyQjtBQUd2QyxTQUFLLG1DQUFtQyxhQUFhLENBQUMsUUFBUSxJQUFJLFFBQVE7QUFDeEUsV0FBSyxnQkFBZ0IsUUFBUSxFQUFFO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFB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
