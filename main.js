/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ChordGridPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var ChordGridPlugin = class extends import_obsidian.Plugin {
  async onload() {
    console.log("Loading Chord Grid plugin");
    this.registerMarkdownCodeBlockProcessor("chordgrid", (source, el, ctx) => {
      this.renderChordGrid(source, el);
    });
  }
  /**
   * Parse chord grid text into structured data
   */
  parseChordGrid(source) {
    const lines = source.trim().split("\n");
    let timeSignature = "4/4";
    const measures = [];
    for (const line of lines) {
      const trimmed = line.trim();
      if (!trimmed)
        continue;
      if (measures.length === 0) {
        const timeSigMatch = trimmed.match(/^(\d+\/\d+)/);
        if (timeSigMatch) {
          timeSignature = timeSigMatch[1];
        }
      }
      const tokens = this.tokenizeLine(trimmed);
      let currentMeasure = { chords: [], hasBarLine: false };
      let isRepeatStart = false;
      let isRepeatEnd = false;
      for (const token of tokens) {
        if (token.type === "repeatStart") {
          isRepeatStart = true;
        } else if (token.type === "repeatEnd") {
          isRepeatEnd = true;
        } else if (token.type === "barLine") {
          if (currentMeasure.chords.length > 0) {
            currentMeasure.hasBarLine = true;
            currentMeasure.isRepeatEnd = isRepeatEnd;
            measures.push(currentMeasure);
            currentMeasure = {
              chords: [],
              hasBarLine: false,
              isRepeatStart: false
            };
            isRepeatEnd = false;
          }
        } else if (token.type === "chord") {
          currentMeasure.chords.push({
            chord: token.chord,
            beats: token.beats
          });
        }
      }
      if (currentMeasure.chords.length > 0) {
        currentMeasure.isRepeatEnd = isRepeatEnd;
        measures.push(currentMeasure);
      }
      if (measures.length > 0 && isRepeatStart) {
        measures[0].isRepeatStart = true;
      }
      if (lines.length > 1 && line !== lines[lines.length - 1]) {
        measures.push({ chords: [], hasBarLine: false, isLineBreak: true });
      }
    }
    return { timeSignature, measures };
  }
  /**
   * Tokenize a line into meaningful tokens
   */
  tokenizeLine(line) {
    const tokens = [];
    let remaining = line.replace(/^\d+\/\d+\s*/, "");
    while (remaining.length > 0) {
      remaining = remaining.trim();
      if (remaining.startsWith("||:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(3);
        continue;
      } else if (remaining.startsWith("|:")) {
        tokens.push({ type: "repeatStart" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith(":||")) {
        tokens.push({ type: "repeatEnd" });
        remaining = remaining.substring(3);
        continue;
      }
      if (remaining.startsWith("||")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(2);
        continue;
      } else if (remaining.startsWith("|")) {
        tokens.push({ type: "barLine" });
        remaining = remaining.substring(1);
        continue;
      }
      const chordMatch = remaining.match(/^([A-G][#b]?(?:maj|min|m|dim|aug|sus|[0-9])*)\[([0-9\s]+)\]/);
      if (chordMatch) {
        const chord = chordMatch[1];
        const rhythm = chordMatch[2];
        const beats = [];
        const rhythmTokens = rhythm.split(/\s+/);
        for (const token of rhythmTokens) {
          const notes = [];
          let i = 0;
          while (i < token.length) {
            const char = token[i];
            if (char === "1") {
              if (i + 1 < token.length && token[i + 1] === "6") {
                notes.push(16);
                i += 2;
              } else {
                notes.push(1);
                i += 1;
              }
            } else if (char === "2") {
              notes.push(2);
              i += 1;
            } else if (char === "4") {
              notes.push(4);
              i += 1;
            } else if (char === "8") {
              notes.push(8);
              i += 1;
            } else if (char === "3" && i + 1 < token.length && token[i + 1] === "2") {
              notes.push(32);
              i += 2;
            } else {
              i += 1;
            }
          }
          if (notes.length > 0) {
            beats.push({ notes });
          }
        }
        tokens.push({ type: "chord", chord, beats });
        remaining = remaining.substring(chordMatch[0].length);
        continue;
      }
      remaining = remaining.substring(1);
    }
    return tokens;
  }
  /**
   * Render chord grid from source text into container element
   */
  renderChordGrid(source, container) {
    const grid = this.parseChordGrid(source);
    const svg = this.createSVG(grid);
    container.empty();
    container.appendChild(svg);
  }
  /**
   * Create SVG element for the entire chord grid
   */
  createSVG(grid) {
    const measuresPerLine = 4;
    const measureWidth = 200;
    const measureHeight = 120;
    let currentLine = 0;
    let measuresInCurrentLine = 0;
    const measurePositions = [];
    grid.measures.forEach((measure, index) => {
      if (measure.isLineBreak) {
        currentLine++;
        measuresInCurrentLine = 0;
        return;
      }
      if (measuresInCurrentLine >= measuresPerLine) {
        currentLine++;
        measuresInCurrentLine = 0;
      }
      measurePositions.push({
        measure,
        lineIndex: currentLine,
        posInLine: measuresInCurrentLine
      });
      measuresInCurrentLine++;
    });
    const lines = currentLine + 1;
    const width = measuresPerLine * measureWidth + 60;
    const height = lines * (measureHeight + 20) + 20;
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", width.toString());
    svg.setAttribute("height", height.toString());
    svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
    svg.style.background = "#ffffff";
    const timeSigText = this.createText(grid.timeSignature, 10, 40, "18px", "bold");
    svg.appendChild(timeSigText);
    measurePositions.forEach(({ measure, lineIndex, posInLine }) => {
      const x = posInLine * measureWidth + 40;
      const y = lineIndex * (measureHeight + 20) + 20;
      this.drawMeasure(svg, measure, x, y, measureWidth, measureHeight);
    });
    return svg;
  }
  /**
   * Draw a single measure with chord, rhythm, and bar lines
   */
  drawMeasure(svg, measure, x, y, width, height) {
    if (measure.isRepeatStart) {
      this.drawRepeatBar(svg, x, y, height, true);
    } else {
      this.drawBar(svg, x, y, height);
    }
    const staffLineY = y + 80;
    const staffLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
    staffLine.setAttribute("x1", (x + 10).toString());
    staffLine.setAttribute("y1", staffLineY.toString());
    staffLine.setAttribute("x2", (x + width - 10).toString());
    staffLine.setAttribute("y2", staffLineY.toString());
    staffLine.setAttribute("stroke", "#000");
    staffLine.setAttribute("stroke-width", "1");
    svg.appendChild(staffLine);
    const chordWidth = width / measure.chords.length;
    measure.chords.forEach((chordData, chordIndex) => {
      const chordX = x + chordIndex * chordWidth + 10;
      const firstNoteX = this.drawRhythm(svg, chordData, chordX, staffLineY, chordWidth - 20);
      if (firstNoteX !== null) {
        const chordText = this.createText(chordData.chord, firstNoteX, y + 40, "24px", "bold");
        chordText.setAttribute("text-anchor", "middle");
        svg.appendChild(chordText);
      }
    });
    const rightBarX = x + width - 2;
    if (measure.hasBarLine || measure.isRepeatEnd) {
      if (measure.isRepeatEnd) {
        this.drawRepeatBar(svg, rightBarX, y, height, false);
      } else {
        this.drawBar(svg, rightBarX, y, height);
      }
    }
  }
  /**
   * Draw a simple bar line
   */
  drawBar(svg, x, y, height) {
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("x1", x.toString());
    line.setAttribute("y1", y.toString());
    line.setAttribute("x2", x.toString());
    line.setAttribute("y2", (y + height).toString());
    line.setAttribute("stroke", "#000");
    line.setAttribute("stroke-width", "2");
    svg.appendChild(line);
  }
  /**
   * Draw repeat bar with dots
   */
  drawRepeatBar(svg, x, y, height, isStart) {
    const offset = isStart ? 0 : -6;
    const barX = x + offset;
    this.drawBar(svg, barX, y, height);
    this.drawBar(svg, barX + 4, y, height);
    const dotOffset = isStart ? 10 : -10;
    const dot1Y = y + height * 0.35;
    const dot2Y = y + height * 0.65;
    [dot1Y, dot2Y].forEach((dotY) => {
      const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      circle.setAttribute("cx", (x + dotOffset).toString());
      circle.setAttribute("cy", dotY.toString());
      circle.setAttribute("r", "3");
      circle.setAttribute("fill", "#000");
      svg.appendChild(circle);
    });
  }
  /**
   * Draw rhythm pattern for a chord and return the x position of the first note
   */
  drawRhythm(svg, chordData, x, staffLineY, width) {
    const beats = chordData.beats;
    const beatWidth = width / beats.length;
    let currentX = x;
    let firstNoteX = null;
    beats.forEach((beat, beatIndex) => {
      const firstNoteInBeatX = this.drawBeat(svg, beat, currentX, staffLineY, beatWidth);
      if (beatIndex === 0 && firstNoteInBeatX !== null) {
        firstNoteX = firstNoteInBeatX;
      }
      currentX += beatWidth;
    });
    return firstNoteX;
  }
  /**
   * Draw a single beat - handles both single notes and beamed groups
   * Returns the x position of the first note in this beat
   */
  drawBeat(svg, beat, x, staffLineY, width) {
    if (beat.notes.length === 1) {
      return this.drawSingleNote(svg, beat.notes[0], x, staffLineY, width);
    } else {
      return this.drawNoteGroup(svg, beat.notes, x, staffLineY, width);
    }
  }
  /**
   * Draw a single note with slash and stem
   */
  drawSingleNote(svg, value, x, staffLineY, width) {
    const centerX = x + width / 2;
    this.drawSlash(svg, centerX, staffLineY);
    if (value >= 2 && value !== 1) {
      this.drawStem(svg, centerX, staffLineY, 25);
    }
    if (value === 8) {
      this.drawFlag(svg, centerX, staffLineY, 1);
    } else if (value === 16) {
      this.drawFlag(svg, centerX, staffLineY, 2);
    } else if (value === 32) {
      this.drawFlag(svg, centerX, staffLineY, 3);
    }
    return centerX;
  }
  /**
   * Draw a group of notes with proper beaming, including nested beam segments for mixed durations
   * notesValues: array of numbers (e.g., [32,32,16,16])
   */
  drawNoteGroup(svg, notesValues, x, staffLineY, width) {
    const noteCount = notesValues.length;
    const noteSpacing = width / noteCount;
    const stemHeight = 25;
    const notes = [];
    for (let i = 0; i < noteCount; i++) {
      const val = notesValues[i];
      const centerX = x + i * noteSpacing + noteSpacing / 2;
      const beamCount = val === 8 ? 1 : val === 16 ? 2 : val === 32 ? 3 : 0;
      this.drawSlash(svg, centerX, staffLineY);
      const stemInfo = this.drawStem(svg, centerX, staffLineY, stemHeight);
      notes.push({ value: val, beamCount, centerX, stemX: stemInfo.x, stemTopY: stemInfo.topY, stemBottomY: stemInfo.bottomY });
    }
    const maxBeamCount = notes.reduce((m, n) => Math.max(m, n.beamCount), 0);
    if (maxBeamCount === 0)
      return notes.length ? notes[0].centerX : null;
    const beamGap = 5;
    const baseStemBottom = Math.min(...notes.map((n) => n.stemBottomY || 0));
    for (let level = 1; level <= maxBeamCount; level++) {
      let segStartIndex = null;
      for (let i = 0; i < notes.length; i++) {
        const n = notes[i];
        const active = n.beamCount >= level;
        if (active && segStartIndex === null) {
          segStartIndex = i;
        } else if ((!active || i === notes.length - 1) && segStartIndex !== null) {
          const segEnd = active && i === notes.length - 1 ? i : i - 1;
          const beamY = baseStemBottom - (level - 1) * beamGap;
          const startX = notes[segStartIndex].stemX;
          const endX = notes[segEnd].stemX;
          const beam = document.createElementNS("http://www.w3.org/2000/svg", "line");
          beam.setAttribute("x1", startX.toString());
          beam.setAttribute("y1", beamY.toString());
          beam.setAttribute("x2", endX.toString());
          beam.setAttribute("y2", beamY.toString());
          beam.setAttribute("stroke", "#000");
          beam.setAttribute("stroke-width", "2");
          svg.appendChild(beam);
          segStartIndex = null;
        }
      }
    }
    return notes.length ? notes[0].centerX : null;
  }
  /**
   * Draw a slash at 45Â° angle (top-RIGHT to bottom-LEFT - proper slash direction)
   * with stem attached to the bottom
   */
  drawSlash(svg, x, y) {
    const slashLength = 10;
    const slash = document.createElementNS("http://www.w3.org/2000/svg", "line");
    slash.setAttribute("x1", (x + slashLength / 2).toString());
    slash.setAttribute("y1", (y - slashLength / 2).toString());
    slash.setAttribute("x2", (x - slashLength / 2).toString());
    slash.setAttribute("y2", (y + slashLength / 2).toString());
    slash.setAttribute("stroke", "#000");
    slash.setAttribute("stroke-width", "3");
    svg.appendChild(slash);
  }
  /**
   * Draw a stem for a note - ATTACHED TO BOTTOM OF SLASH
   * Returns the X position of the stem and the bottom Y for proper beam alignment
   */
  drawStem(svg, x, y, height) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemStartY = y + slashLength / 2;
    const stem = document.createElementNS("http://www.w3.org/2000/svg", "line");
    stem.setAttribute("x1", stemStartX.toString());
    stem.setAttribute("y1", stemStartY.toString());
    stem.setAttribute("x2", stemStartX.toString());
    stem.setAttribute("y2", (stemStartY + height).toString());
    stem.setAttribute("stroke", "#000");
    stem.setAttribute("stroke-width", "2");
    svg.appendChild(stem);
    return { x: stemStartX, topY: stemStartY, bottomY: stemStartY + height };
  }
  /**
   * Draw flag(s) for a note
   */
  drawFlag(svg, x, staffLineY, count) {
    const slashLength = 10;
    const stemStartX = x - slashLength / 2 + 2;
    const stemBottomY = staffLineY + slashLength / 2 + 25;
    for (let i = 0; i < count; i++) {
      const flag = document.createElementNS("http://www.w3.org/2000/svg", "path");
      const flagY = stemBottomY - i * 10;
      flag.setAttribute("d", `M ${stemStartX} ${flagY} Q ${stemStartX - 10} ${flagY - 5} ${stemStartX - 8} ${flagY - 12}`);
      flag.setAttribute("stroke", "#000");
      flag.setAttribute("stroke-width", "2");
      flag.setAttribute("fill", "none");
      svg.appendChild(flag);
    }
  }
  /**
   * Utility function to create text elements
   */
  createText(text, x, y, size, weight = "normal") {
    const textEl = document.createElementNS("http://www.w3.org/2000/svg", "text");
    textEl.setAttribute("x", x.toString());
    textEl.setAttribute("y", y.toString());
    textEl.setAttribute("font-family", "Arial, sans-serif");
    textEl.setAttribute("font-size", size);
    textEl.setAttribute("font-weight", weight);
    textEl.setAttribute("fill", "#000");
    textEl.textContent = text;
    return textEl;
  }
  onunload() {
    console.log("Unloading Chord Grid plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBJbnRlcmZhY2UgZGVmaW5pdGlvbnMgZm9yIG91ciBkYXRhIHN0cnVjdHVyZXNcbmludGVyZmFjZSBCZWF0IHtcbiAgbm90ZXM6IG51bWJlcltdOyAvLyBMaXN0IG9mIHJoeXRobWljIHZhbHVlcyAoOCwgNCwgMiwgMSwgZXRjLilcbn1cblxuaW50ZXJmYWNlIENob3JkSW5NZWFzdXJlIHtcbiAgY2hvcmQ6IHN0cmluZztcbiAgYmVhdHM6IEJlYXRbXTtcbn1cblxuaW50ZXJmYWNlIE1lYXN1cmUge1xuICBjaG9yZHM6IENob3JkSW5NZWFzdXJlW107XG4gIGlzUmVwZWF0U3RhcnQ/OiBib29sZWFuO1xuICBpc1JlcGVhdEVuZD86IGJvb2xlYW47XG4gIGhhc0JhckxpbmU/OiBib29sZWFuO1xuICBpc0xpbmVCcmVhaz86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBDaG9yZEdyaWQge1xuICB0aW1lU2lnbmF0dXJlOiBzdHJpbmc7XG4gIG1lYXN1cmVzOiBNZWFzdXJlW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENob3JkR3JpZFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnTG9hZGluZyBDaG9yZCBHcmlkIHBsdWdpbicpO1xuXG4gICAgLy8gUmVnaXN0ZXIgbWFya2Rvd24gY29kZSBibG9jayBwcm9jZXNzb3IgZm9yICdjaG9yZGdyaWQnIGJsb2Nrc1xuICAgIHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcignY2hvcmRncmlkJywgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJDaG9yZEdyaWQoc291cmNlLCBlbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgY2hvcmQgZ3JpZCB0ZXh0IGludG8gc3RydWN0dXJlZCBkYXRhXG4gICAqL1xuICBwYXJzZUNob3JkR3JpZChzb3VyY2U6IHN0cmluZyk6IENob3JkR3JpZCB7XG4gICAgY29uc3QgbGluZXMgPSBzb3VyY2UudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICBsZXQgdGltZVNpZ25hdHVyZSA9ICc0LzQnO1xuICAgIGNvbnN0IG1lYXN1cmVzOiBNZWFzdXJlW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgaWYgKCF0cmltbWVkKSBjb250aW51ZTtcblxuICAgICAgLy8gUGFyc2UgdGltZSBzaWduYXR1cmUgKG9ubHkgZnJvbSBmaXJzdCBsaW5lKVxuICAgICAgaWYgKG1lYXN1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCB0aW1lU2lnTWF0Y2ggPSB0cmltbWVkLm1hdGNoKC9eKFxcZCtcXC9cXGQrKS8pO1xuICAgICAgICBpZiAodGltZVNpZ01hdGNoKSB7XG4gICAgICAgICAgdGltZVNpZ25hdHVyZSA9IHRpbWVTaWdNYXRjaFsxXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXJzZSBjaG9yZHMgaW50byBtZWFzdXJlcyBiYXNlZCBvbiBiYXIgbGluZXNcbiAgICAgIGNvbnN0IHRva2VucyA9IHRoaXMudG9rZW5pemVMaW5lKHRyaW1tZWQpO1xuICAgICAgbGV0IGN1cnJlbnRNZWFzdXJlOiBNZWFzdXJlID0geyBjaG9yZHM6IFtdLCBoYXNCYXJMaW5lOiBmYWxzZSB9O1xuICAgICAgbGV0IGlzUmVwZWF0U3RhcnQgPSBmYWxzZTtcbiAgICAgIGxldCBpc1JlcGVhdEVuZCA9IGZhbHNlO1xuXG4gICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3JlcGVhdFN0YXJ0Jykge1xuICAgICAgICAgIGlzUmVwZWF0U3RhcnQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdyZXBlYXRFbmQnKSB7XG4gICAgICAgICAgaXNSZXBlYXRFbmQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHRva2VuLnR5cGUgPT09ICdiYXJMaW5lJykge1xuICAgICAgICAgIC8vIEJhciBsaW5lIG1lYW5zIHdlIGZpbmFsaXplIHRoZSBjdXJyZW50IG1lYXN1cmUgYW5kIHN0YXJ0IGEgbmV3IG9uZVxuICAgICAgICAgIGlmIChjdXJyZW50TWVhc3VyZS5jaG9yZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3VycmVudE1lYXN1cmUuaGFzQmFyTGluZSA9IHRydWU7XG4gICAgICAgICAgICBjdXJyZW50TWVhc3VyZS5pc1JlcGVhdEVuZCA9IGlzUmVwZWF0RW5kO1xuICAgICAgICAgICAgbWVhc3VyZXMucHVzaChjdXJyZW50TWVhc3VyZSk7XG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBtZWFzdXJlXG4gICAgICAgICAgICBjdXJyZW50TWVhc3VyZSA9IHsgXG4gICAgICAgICAgICAgIGNob3JkczogW10sIFxuICAgICAgICAgICAgICBoYXNCYXJMaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNSZXBlYXRTdGFydDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpc1JlcGVhdEVuZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbi50eXBlID09PSAnY2hvcmQnKSB7XG4gICAgICAgICAgLy8gQWRkIGNob3JkIHRvIGN1cnJlbnQgbWVhc3VyZVxuICAgICAgICAgIGN1cnJlbnRNZWFzdXJlLmNob3Jkcy5wdXNoKHtcbiAgICAgICAgICAgIGNob3JkOiB0b2tlbi5jaG9yZCxcbiAgICAgICAgICAgIGJlYXRzOiB0b2tlbi5iZWF0c1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IGZvcmdldCB0aGUgbGFzdCBtZWFzdXJlXG4gICAgICBpZiAoY3VycmVudE1lYXN1cmUuY2hvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY3VycmVudE1lYXN1cmUuaXNSZXBlYXRFbmQgPSBpc1JlcGVhdEVuZDtcbiAgICAgICAgbWVhc3VyZXMucHVzaChjdXJyZW50TWVhc3VyZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IHJlcGVhdCBzdGFydCB0byB0aGUgRklSU1QgbWVhc3VyZSBpZiB3ZSBoYXZlIG9uZVxuICAgICAgaWYgKG1lYXN1cmVzLmxlbmd0aCA+IDAgJiYgaXNSZXBlYXRTdGFydCkge1xuICAgICAgICBtZWFzdXJlc1swXS5pc1JlcGVhdFN0YXJ0ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIGxpbmUgYnJlYWsgbWFya2VyIGlmIHRoZXJlIGFyZSBtb3JlIGxpbmVzXG4gICAgICBpZiAobGluZXMubGVuZ3RoID4gMSAmJiBsaW5lICE9PSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSkge1xuICAgICAgICBtZWFzdXJlcy5wdXNoKHsgY2hvcmRzOiBbXSwgaGFzQmFyTGluZTogZmFsc2UsIGlzTGluZUJyZWFrOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHRpbWVTaWduYXR1cmUsIG1lYXN1cmVzIH07XG4gIH1cblxuICAvKipcbiAgICogVG9rZW5pemUgYSBsaW5lIGludG8gbWVhbmluZ2Z1bCB0b2tlbnNcbiAgICovXG4gIHRva2VuaXplTGluZShsaW5lOiBzdHJpbmcpOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiB7XG4gICAgY29uc3QgdG9rZW5zOiBBcnJheTx7dHlwZTogc3RyaW5nLCBjaG9yZD86IHN0cmluZywgYmVhdHM/OiBCZWF0W119PiA9IFtdO1xuICAgIGxldCByZW1haW5pbmcgPSBsaW5lLnJlcGxhY2UoL15cXGQrXFwvXFxkK1xccyovLCAnJyk7IC8vIFJlbW92ZSB0aW1lIHNpZ25hdHVyZVxuICAgIFxuICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHJlcGVhdCBtYXJrZXJzXG4gICAgICBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3x8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygzKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8OicpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ3JlcGVhdFN0YXJ0JyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygyKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCc6fHwnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdyZXBlYXRFbmQnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDMpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGJhciBsaW5lc1xuICAgICAgaWYgKHJlbWFpbmluZy5zdGFydHNXaXRoKCd8fCcpKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ2JhckxpbmUnIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDIpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVtYWluaW5nLnN0YXJ0c1dpdGgoJ3wnKSkge1xuICAgICAgICB0b2tlbnMucHVzaCh7IHR5cGU6ICdiYXJMaW5lJyB9KTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnN1YnN0cmluZygxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBjaG9yZHNcbiAgICAgIGNvbnN0IGNob3JkTWF0Y2ggPSByZW1haW5pbmcubWF0Y2goL14oW0EtR11bI2JdPyg/Om1hanxtaW58bXxkaW18YXVnfHN1c3xbMC05XSkqKVxcWyhbMC05XFxzXSspXFxdLyk7XG4gICAgICBpZiAoY2hvcmRNYXRjaCkge1xuICAgICAgICBjb25zdCBjaG9yZCA9IGNob3JkTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHJoeXRobSA9IGNob3JkTWF0Y2hbMl07XG4gICAgICAgIFxuICAgICAgICAvLyBQYXJzZSByaHl0aG0gaW50byBiZWF0c1xuICAgICAgICBjb25zdCBiZWF0czogQmVhdFtdID0gW107XG4gICAgICAgIGNvbnN0IHJoeXRobVRva2VucyA9IHJoeXRobS5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiByaHl0aG1Ub2tlbnMpIHtcbiAgICAgICAgICBjb25zdCBub3RlczogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQYXJzZSBub3RlcyBjb3JyZWN0bHlcbiAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgd2hpbGUgKGkgPCB0b2tlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0b2tlbltpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcxJykge1xuICAgICAgICAgICAgICBpZiAoaSArIDEgPCB0b2tlbi5sZW5ndGggJiYgdG9rZW5baSArIDFdID09PSAnNicpIHtcbiAgICAgICAgICAgICAgICBub3Rlcy5wdXNoKDE2KTtcbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm90ZXMucHVzaCgxKTtcbiAgICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09ICcyJykge1xuICAgICAgICAgICAgICBub3Rlcy5wdXNoKDIpO1xuICAgICAgICAgICAgICBpICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSAnNCcpIHtcbiAgICAgICAgICAgICAgbm90ZXMucHVzaCg0KTtcbiAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gJzgnKSB7XG4gICAgICAgICAgICAgIG5vdGVzLnB1c2goOCk7XG4gICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09ICczJyAmJiBpICsgMSA8IHRva2VuLmxlbmd0aCAmJiB0b2tlbltpICsgMV0gPT09ICcyJykge1xuICAgICAgICAgICAgICBub3Rlcy5wdXNoKDMyKTtcbiAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG5vdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGJlYXRzLnB1c2goeyBub3RlcyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogJ2Nob3JkJywgY2hvcmQsIGJlYXRzIH0pO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKGNob3JkTWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNraXAgdW5rbm93biBjaGFyYWN0ZXJzXG4gICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc3Vic3RyaW5nKDEpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBjaG9yZCBncmlkIGZyb20gc291cmNlIHRleHQgaW50byBjb250YWluZXIgZWxlbWVudFxuICAgKi9cbiAgcmVuZGVyQ2hvcmRHcmlkKHNvdXJjZTogc3RyaW5nLCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZ3JpZCA9IHRoaXMucGFyc2VDaG9yZEdyaWQoc291cmNlKTtcbiAgICBcbiAgICBjb25zdCBzdmcgPSB0aGlzLmNyZWF0ZVNWRyhncmlkKTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgU1ZHIGVsZW1lbnQgZm9yIHRoZSBlbnRpcmUgY2hvcmQgZ3JpZFxuICAgKi9cbiAgY3JlYXRlU1ZHKGdyaWQ6IENob3JkR3JpZCk6IFNWR0VsZW1lbnQge1xuICAgIGNvbnN0IG1lYXN1cmVzUGVyTGluZSA9IDQ7XG4gICAgY29uc3QgbWVhc3VyZVdpZHRoID0gMjAwO1xuICAgIGNvbnN0IG1lYXN1cmVIZWlnaHQgPSAxMjA7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGxpbmVzIGNvbnNpZGVyaW5nIGxpbmUgYnJlYWtzXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gMDtcbiAgICBsZXQgbWVhc3VyZXNJbkN1cnJlbnRMaW5lID0gMDtcbiAgICBjb25zdCBtZWFzdXJlUG9zaXRpb25zOiB7bWVhc3VyZTogTWVhc3VyZSwgbGluZUluZGV4OiBudW1iZXIsIHBvc0luTGluZTogbnVtYmVyfVtdID0gW107XG4gICAgXG4gICAgZ3JpZC5tZWFzdXJlcy5mb3JFYWNoKChtZWFzdXJlLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKG1lYXN1cmUuaXNMaW5lQnJlYWspIHtcbiAgICAgICAgY3VycmVudExpbmUrKztcbiAgICAgICAgbWVhc3VyZXNJbkN1cnJlbnRMaW5lID0gMDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWVhc3VyZXNJbkN1cnJlbnRMaW5lID49IG1lYXN1cmVzUGVyTGluZSkge1xuICAgICAgICBjdXJyZW50TGluZSsrO1xuICAgICAgICBtZWFzdXJlc0luQ3VycmVudExpbmUgPSAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBtZWFzdXJlUG9zaXRpb25zLnB1c2goe1xuICAgICAgICBtZWFzdXJlLFxuICAgICAgICBsaW5lSW5kZXg6IGN1cnJlbnRMaW5lLFxuICAgICAgICBwb3NJbkxpbmU6IG1lYXN1cmVzSW5DdXJyZW50TGluZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG1lYXN1cmVzSW5DdXJyZW50TGluZSsrO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbGluZXMgPSBjdXJyZW50TGluZSArIDE7XG4gICAgY29uc3Qgd2lkdGggPSBtZWFzdXJlc1BlckxpbmUgKiBtZWFzdXJlV2lkdGggKyA2MDtcbiAgICBjb25zdCBoZWlnaHQgPSBsaW5lcyAqIChtZWFzdXJlSGVpZ2h0ICsgMjApICsgMjA7XG5cbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGgudG9TdHJpbmcoKSk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWApO1xuICAgIHN2Zy5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmZmZmZmYnO1xuXG4gICAgLy8gRHJhdyB0aW1lIHNpZ25hdHVyZSBhdCB0aGUgYmVnaW5uaW5nXG4gICAgY29uc3QgdGltZVNpZ1RleHQgPSB0aGlzLmNyZWF0ZVRleHQoZ3JpZC50aW1lU2lnbmF0dXJlLCAxMCwgNDAsICcxOHB4JywgJ2JvbGQnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQodGltZVNpZ1RleHQpO1xuXG4gICAgLy8gRHJhdyBhbGwgbWVhc3VyZXNcbiAgICBtZWFzdXJlUG9zaXRpb25zLmZvckVhY2goKHttZWFzdXJlLCBsaW5lSW5kZXgsIHBvc0luTGluZX0pID0+IHtcbiAgICAgIGNvbnN0IHggPSBwb3NJbkxpbmUgKiBtZWFzdXJlV2lkdGggKyA0MDtcbiAgICAgIGNvbnN0IHkgPSBsaW5lSW5kZXggKiAobWVhc3VyZUhlaWdodCArIDIwKSArIDIwO1xuXG4gICAgICB0aGlzLmRyYXdNZWFzdXJlKHN2ZywgbWVhc3VyZSwgeCwgeSwgbWVhc3VyZVdpZHRoLCBtZWFzdXJlSGVpZ2h0KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdmc7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbmdsZSBtZWFzdXJlIHdpdGggY2hvcmQsIHJoeXRobSwgYW5kIGJhciBsaW5lc1xuICAgKi9cbiAgZHJhd01lYXN1cmUoc3ZnOiBTVkdFbGVtZW50LCBtZWFzdXJlOiBNZWFzdXJlLCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAvLyBEcmF3IGxlZnQgYmFyIGxpbmVcbiAgICBpZiAobWVhc3VyZS5pc1JlcGVhdFN0YXJ0KSB7XG4gICAgICB0aGlzLmRyYXdSZXBlYXRCYXIoc3ZnLCB4LCB5LCBoZWlnaHQsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRyYXdCYXIoc3ZnLCB4LCB5LCBoZWlnaHQpO1xuICAgIH1cblxuICAgIC8vIERyYXcgc2luZ2xlIHN0YWZmIGxpbmVcbiAgICBjb25zdCBzdGFmZkxpbmVZID0geSArIDgwO1xuICAgIGNvbnN0IHN0YWZmTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgKHggKyAxMCkudG9TdHJpbmcoKSk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgneTEnLCBzdGFmZkxpbmVZLnRvU3RyaW5nKCkpO1xuICAgIHN0YWZmTGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgKHggKyB3aWR0aCAtIDEwKS50b1N0cmluZygpKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCd5MicsIHN0YWZmTGluZVkudG9TdHJpbmcoKSk7XG4gICAgc3RhZmZMaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICBzdGFmZkxpbmUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMScpO1xuICAgIHN2Zy5hcHBlbmRDaGlsZChzdGFmZkxpbmUpO1xuXG4gICAgLy8gRHJhdyBhbGwgY2hvcmRzIGluIHRoZSBtZWFzdXJlXG4gICAgY29uc3QgY2hvcmRXaWR0aCA9IHdpZHRoIC8gbWVhc3VyZS5jaG9yZHMubGVuZ3RoO1xuICAgIG1lYXN1cmUuY2hvcmRzLmZvckVhY2goKGNob3JkRGF0YSwgY2hvcmRJbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2hvcmRYID0geCArIChjaG9yZEluZGV4ICogY2hvcmRXaWR0aCkgKyAxMDtcbiAgICAgIFxuICAgICAgLy8gRHJhdyByaHl0aG0gbm90YXRpb24gZm9yIHRoaXMgY2hvcmRcbiAgICAgIGNvbnN0IGZpcnN0Tm90ZVggPSB0aGlzLmRyYXdSaHl0aG0oc3ZnLCBjaG9yZERhdGEsIGNob3JkWCwgc3RhZmZMaW5lWSwgY2hvcmRXaWR0aCAtIDIwKTtcblxuICAgICAgLy8gRHJhdyBjaG9yZCBuYW1lIGFib3ZlIHRoZSBmaXJzdCBub3RlXG4gICAgICBpZiAoZmlyc3ROb3RlWCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjaG9yZFRleHQgPSB0aGlzLmNyZWF0ZVRleHQoY2hvcmREYXRhLmNob3JkLCBmaXJzdE5vdGVYLCB5ICsgNDAsICcyNHB4JywgJ2JvbGQnKTtcbiAgICAgICAgY2hvcmRUZXh0LnNldEF0dHJpYnV0ZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChjaG9yZFRleHQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRHJhdyByaWdodCBiYXIgbGluZSBPTkxZIGlmIGhhc0JhckxpbmUgaXMgdHJ1ZSBvciBpdCdzIGEgcmVwZWF0IGVuZFxuICAgIGNvbnN0IHJpZ2h0QmFyWCA9IHggKyB3aWR0aCAtIDI7XG4gICAgaWYgKG1lYXN1cmUuaGFzQmFyTGluZSB8fCBtZWFzdXJlLmlzUmVwZWF0RW5kKSB7XG4gICAgICBpZiAobWVhc3VyZS5pc1JlcGVhdEVuZCkge1xuICAgICAgICB0aGlzLmRyYXdSZXBlYXRCYXIoc3ZnLCByaWdodEJhclgsIHksIGhlaWdodCwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kcmF3QmFyKHN2ZywgcmlnaHRCYXJYLCB5LCBoZWlnaHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3IGEgc2ltcGxlIGJhciBsaW5lXG4gICAqL1xuICBkcmF3QmFyKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgY29uc3QgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MScsIHgudG9TdHJpbmcoKSk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgeS50b1N0cmluZygpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCB4LnRvU3RyaW5nKCkpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MicsICh5ICsgaGVpZ2h0KS50b1N0cmluZygpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyByZXBlYXQgYmFyIHdpdGggZG90c1xuICAgKi9cbiAgZHJhd1JlcGVhdEJhcihzdmc6IFNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgaXNTdGFydDogYm9vbGVhbikge1xuICAgIGNvbnN0IG9mZnNldCA9IGlzU3RhcnQgPyAwIDogLTY7XG4gICAgY29uc3QgYmFyWCA9IHggKyBvZmZzZXQ7XG4gICAgdGhpcy5kcmF3QmFyKHN2ZywgYmFyWCwgeSwgaGVpZ2h0KTtcbiAgICB0aGlzLmRyYXdCYXIoc3ZnLCBiYXJYICsgNCwgeSwgaGVpZ2h0KTtcblxuICAgIGNvbnN0IGRvdE9mZnNldCA9IGlzU3RhcnQgPyAxMCA6IC0xMDtcbiAgICBjb25zdCBkb3QxWSA9IHkgKyBoZWlnaHQgKiAwLjM1O1xuICAgIGNvbnN0IGRvdDJZID0geSArIGhlaWdodCAqIDAuNjU7XG5cbiAgICBbZG90MVksIGRvdDJZXS5mb3JFYWNoKGRvdFkgPT4ge1xuICAgICAgY29uc3QgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcbiAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N4JywgKHggKyBkb3RPZmZzZXQpLnRvU3RyaW5nKCkpO1xuICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBkb3RZLnRvU3RyaW5nKCkpO1xuICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgncicsICczJyk7XG4gICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJyMwMDAnKTtcbiAgICAgIHN2Zy5hcHBlbmRDaGlsZChjaXJjbGUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgcmh5dGhtIHBhdHRlcm4gZm9yIGEgY2hvcmQgYW5kIHJldHVybiB0aGUgeCBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgbm90ZVxuICAgKi9cbiAgZHJhd1JoeXRobShzdmc6IFNWR0VsZW1lbnQsIGNob3JkRGF0YTogQ2hvcmRJbk1lYXN1cmUsIHg6IG51bWJlciwgc3RhZmZMaW5lWTogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgYmVhdHMgPSBjaG9yZERhdGEuYmVhdHM7XG4gICAgY29uc3QgYmVhdFdpZHRoID0gd2lkdGggLyBiZWF0cy5sZW5ndGg7XG4gICAgbGV0IGN1cnJlbnRYID0geDtcbiAgICBsZXQgZmlyc3ROb3RlWDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBiZWF0cy5mb3JFYWNoKChiZWF0LCBiZWF0SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGZpcnN0Tm90ZUluQmVhdFggPSB0aGlzLmRyYXdCZWF0KHN2ZywgYmVhdCwgY3VycmVudFgsIHN0YWZmTGluZVksIGJlYXRXaWR0aCk7XG4gICAgICBcbiAgICAgIGlmIChiZWF0SW5kZXggPT09IDAgJiYgZmlyc3ROb3RlSW5CZWF0WCAhPT0gbnVsbCkge1xuICAgICAgICBmaXJzdE5vdGVYID0gZmlyc3ROb3RlSW5CZWF0WDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY3VycmVudFggKz0gYmVhdFdpZHRoO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZpcnN0Tm90ZVg7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbmdsZSBiZWF0IC0gaGFuZGxlcyBib3RoIHNpbmdsZSBub3RlcyBhbmQgYmVhbWVkIGdyb3Vwc1xuICAgKiBSZXR1cm5zIHRoZSB4IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub3RlIGluIHRoaXMgYmVhdFxuICAgKi9cbiAgZHJhd0JlYXQoc3ZnOiBTVkdFbGVtZW50LCBiZWF0OiBCZWF0LCB4OiBudW1iZXIsIHN0YWZmTGluZVk6IG51bWJlciwgd2lkdGg6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICAgIGlmIChiZWF0Lm5vdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gU2luZ2xlIG5vdGVcbiAgICAgIHJldHVybiB0aGlzLmRyYXdTaW5nbGVOb3RlKHN2ZywgYmVhdC5ub3Rlc1swXSwgeCwgc3RhZmZMaW5lWSwgd2lkdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNdWx0aXBsZSBub3RlcyAtIHVzZSBwcm9wZXIgcmh5dGhtaWMgZ3JvdXBpbmcgd2l0aCBiZWFtc1xuICAgICAgcmV0dXJuIHRoaXMuZHJhd05vdGVHcm91cChzdmcsIGJlYXQubm90ZXMsIHgsIHN0YWZmTGluZVksIHdpZHRoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNpbmdsZSBub3RlIHdpdGggc2xhc2ggYW5kIHN0ZW1cbiAgICovXG4gIGRyYXdTaW5nbGVOb3RlKHN2ZzogU1ZHRWxlbWVudCwgdmFsdWU6IG51bWJlciwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGNlbnRlclggPSB4ICsgd2lkdGggLyAyO1xuXG4gICAgLy8gRHJhdyBzbGFzaCAodG9wLXJpZ2h0IHRvIGJvdHRvbS1sZWZ0KVxuICAgIHRoaXMuZHJhd1NsYXNoKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSk7XG5cbiAgICAvLyBEcmF3IHN0ZW0gZm9yIHNob3J0IG5vdGVzIC0gQVRUQUNIRUQgVE8gQk9UVE9NIE9GIFNMQVNIXG4gICAgaWYgKHZhbHVlID49IDIgJiYgdmFsdWUgIT09IDEpIHtcbiAgICAgIHRoaXMuZHJhd1N0ZW0oc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAyNSk7XG4gICAgfVxuXG4gICAgLy8gRHJhdyBmbGFncyBpZiBuZWVkZWRcbiAgICBpZiAodmFsdWUgPT09IDgpIHtcbiAgICAgIHRoaXMuZHJhd0ZsYWcoc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCAxKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAxNikge1xuICAgICAgdGhpcy5kcmF3RmxhZyhzdmcsIGNlbnRlclgsIHN0YWZmTGluZVksIDIpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IDMyKSB7XG4gICAgICB0aGlzLmRyYXdGbGFnKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSwgMyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNlbnRlclg7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIGdyb3VwIG9mIG5vdGVzIHdpdGggcHJvcGVyIGJlYW1pbmcsIGluY2x1ZGluZyBuZXN0ZWQgYmVhbSBzZWdtZW50cyBmb3IgbWl4ZWQgZHVyYXRpb25zXG4gICAqIG5vdGVzVmFsdWVzOiBhcnJheSBvZiBudW1iZXJzIChlLmcuLCBbMzIsMzIsMTYsMTZdKVxuICAgKi9cbiAgZHJhd05vdGVHcm91cChzdmc6IFNWR0VsZW1lbnQsIG5vdGVzVmFsdWVzOiBudW1iZXJbXSwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vdGVDb3VudCA9IG5vdGVzVmFsdWVzLmxlbmd0aDtcbiAgICBjb25zdCBub3RlU3BhY2luZyA9IHdpZHRoIC8gbm90ZUNvdW50O1xuICAgIGNvbnN0IHN0ZW1IZWlnaHQgPSAyNTtcblxuICAgIC8vIE1hcCBub3RlcyB0byBiZWFtIGNvdW50cyBhbmQgcG9zaXRpb25zXG4gICAgY29uc3Qgbm90ZXM6IHsgdmFsdWU6IG51bWJlcjsgYmVhbUNvdW50OiBudW1iZXI7IGNlbnRlclg6IG51bWJlcjsgc3RlbVg/OiBudW1iZXI7IHN0ZW1Ub3BZPzogbnVtYmVyOyBzdGVtQm90dG9tWT86IG51bWJlciB9W10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZUNvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHZhbCA9IG5vdGVzVmFsdWVzW2ldO1xuICAgICAgY29uc3QgY2VudGVyWCA9IHggKyBpICogbm90ZVNwYWNpbmcgKyBub3RlU3BhY2luZyAvIDI7XG4gICAgICBjb25zdCBiZWFtQ291bnQgPSB2YWwgPT09IDggPyAxIDogdmFsID09PSAxNiA/IDIgOiB2YWwgPT09IDMyID8gMyA6IDA7XG5cbiAgICAgIC8vIGRyYXcgc2xhc2hcbiAgICAgIHRoaXMuZHJhd1NsYXNoKHN2ZywgY2VudGVyWCwgc3RhZmZMaW5lWSk7XG4gICAgICAvLyBkcmF3IHN0ZW0gYW5kIGNhcHR1cmUgcG9zaXRpb25zXG4gICAgICBjb25zdCBzdGVtSW5mbyA9IHRoaXMuZHJhd1N0ZW0oc3ZnLCBjZW50ZXJYLCBzdGFmZkxpbmVZLCBzdGVtSGVpZ2h0KTtcblxuICAgICAgbm90ZXMucHVzaCh7IHZhbHVlOiB2YWwsIGJlYW1Db3VudCwgY2VudGVyWCwgc3RlbVg6IHN0ZW1JbmZvLngsIHN0ZW1Ub3BZOiBzdGVtSW5mby50b3BZLCBzdGVtQm90dG9tWTogc3RlbUluZm8uYm90dG9tWSB9KTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgbWF4aW11bSBiZWFtIGNvdW50IGluIHRoaXMgZ3JvdXBcbiAgICBjb25zdCBtYXhCZWFtQ291bnQgPSBub3Rlcy5yZWR1Y2UoKG0sIG4pID0+IE1hdGgubWF4KG0sIG4uYmVhbUNvdW50KSwgMCk7XG4gICAgaWYgKG1heEJlYW1Db3VudCA9PT0gMCkgcmV0dXJuIG5vdGVzLmxlbmd0aCA/IG5vdGVzWzBdLmNlbnRlclggOiBudWxsO1xuXG4gICAgLy8gRm9yIGVhY2ggYmVhbSBsZXZlbCAoMSA9IGxvd2VzdCBiZWFtIGxpbmUsIDIgPSBzZWNvbmQgbGluZSwgZXRjLiksIGRyYXcgY29udGludW91cyBzZWdtZW50c1xuICAgIGNvbnN0IGJlYW1HYXAgPSA1OyAvLyB2ZXJ0aWNhbCBnYXAgYmV0d2VlbiBzdGFja2VkIGJlYW1zXG5cbiAgICAvLyBEZXRlcm1pbmUgYmFzZSBZIGZvciBiZWFtczogdXNlIHRoZSBtaW5pbXVtIHN0ZW1Cb3R0b21ZIChjbG9zZXN0IHRvIHN0YWZmKSBzbyBiZWFtcyBzaXQgb24gdG9wIG9mIHN0ZW1zXG4gICAgY29uc3QgYmFzZVN0ZW1Cb3R0b20gPSBNYXRoLm1pbiguLi5ub3Rlcy5tYXAobiA9PiBuLnN0ZW1Cb3R0b21ZIHx8IDApKTtcblxuICAgIGZvciAobGV0IGxldmVsID0gMTsgbGV2ZWwgPD0gbWF4QmVhbUNvdW50OyBsZXZlbCsrKSB7XG4gICAgICAvLyBCdWlsZCBjb250aW51b3VzIHNlZ21lbnRzIHdoZXJlIG5vdGVzIGhhdmUgYmVhbUNvdW50ID49IGxldmVsXG4gICAgICBsZXQgc2VnU3RhcnRJbmRleDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbiA9IG5vdGVzW2ldO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSBuLmJlYW1Db3VudCA+PSBsZXZlbDtcblxuICAgICAgICBpZiAoYWN0aXZlICYmIHNlZ1N0YXJ0SW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgICBzZWdTdGFydEluZGV4ID0gaTtcbiAgICAgICAgfSBlbHNlIGlmICgoIWFjdGl2ZSB8fCBpID09PSBub3Rlcy5sZW5ndGggLSAxKSAmJiBzZWdTdGFydEluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgLy8gSWYgd2UgYXJlIGF0IHRoZSBlbmQgYW5kIGFjdGl2ZSwgZXh0ZW5kIHRvIGlcbiAgICAgICAgICBjb25zdCBzZWdFbmQgPSAoYWN0aXZlICYmIGkgPT09IG5vdGVzLmxlbmd0aCAtIDEpID8gaSA6IGkgLSAxO1xuXG4gICAgICAgICAgLy8gY29tcHV0ZSBiZWFtIFk6IHN0YXJ0IGZyb20gYmFzZVN0ZW1Cb3R0b20gYW5kIGdvIHVwIGZvciBoaWdoZXIgbGV2ZWxzXG4gICAgICAgICAgY29uc3QgYmVhbVkgPSBiYXNlU3RlbUJvdHRvbSAtIChsZXZlbCAtIDEpICogYmVhbUdhcDtcblxuICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IG5vdGVzW3NlZ1N0YXJ0SW5kZXhdLnN0ZW1YITtcbiAgICAgICAgICBjb25zdCBlbmRYID0gbm90ZXNbc2VnRW5kXS5zdGVtWCE7XG5cbiAgICAgICAgICBjb25zdCBiZWFtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3gxJywgc3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd5MScsIGJlYW1ZLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIGJlYW0uc2V0QXR0cmlidXRlKCd4MicsIGVuZFgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3kyJywgYmVhbVkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgICAgICAgYmVhbS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGJlYW0pO1xuXG4gICAgICAgICAgc2VnU3RhcnRJbmRleCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm90ZXMubGVuZ3RoID8gbm90ZXNbMF0uY2VudGVyWCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBhIHNsYXNoIGF0IDQ1XHUwMEIwIGFuZ2xlICh0b3AtUklHSFQgdG8gYm90dG9tLUxFRlQgLSBwcm9wZXIgc2xhc2ggZGlyZWN0aW9uKVxuICAgKiB3aXRoIHN0ZW0gYXR0YWNoZWQgdG8gdGhlIGJvdHRvbVxuICAgKi9cbiAgZHJhd1NsYXNoKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBjb25zdCBzbGFzaExlbmd0aCA9IDEwO1xuICAgIC8vIDQ1XHUwMEIwIHNsYXNoIGZyb20gdG9wLVJJR0hUIHRvIGJvdHRvbS1MRUZUIChwcm9wZXIgc2xhc2ggZGlyZWN0aW9uKVxuICAgIGNvbnN0IHNsYXNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCd4MScsICh4ICsgc2xhc2hMZW5ndGgvMikudG9TdHJpbmcoKSk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCd5MScsICh5IC0gc2xhc2hMZW5ndGgvMikudG9TdHJpbmcoKSk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCd4MicsICh4IC0gc2xhc2hMZW5ndGgvMikudG9TdHJpbmcoKSk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCd5MicsICh5ICsgc2xhc2hMZW5ndGgvMikudG9TdHJpbmcoKSk7XG4gICAgc2xhc2guc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHNsYXNoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzMnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoc2xhc2gpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXcgYSBzdGVtIGZvciBhIG5vdGUgLSBBVFRBQ0hFRCBUTyBCT1RUT00gT0YgU0xBU0hcbiAgICogUmV0dXJucyB0aGUgWCBwb3NpdGlvbiBvZiB0aGUgc3RlbSBhbmQgdGhlIGJvdHRvbSBZIGZvciBwcm9wZXIgYmVhbSBhbGlnbm1lbnRcbiAgICovXG4gIGRyYXdTdGVtKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGhlaWdodDogbnVtYmVyKToge3g6IG51bWJlciwgdG9wWTogbnVtYmVyLCBib3R0b21ZOiBudW1iZXJ9IHtcbiAgICAvLyBDYWxjdWxhdGUgdGhlIGJvdHRvbSBwb2ludCBvZiB0aGUgc2xhc2ggKHdoZXJlIHN0ZW0gc2hvdWxkIGF0dGFjaClcbiAgICBjb25zdCBzbGFzaExlbmd0aCA9IDEwO1xuICAgIGNvbnN0IHN0ZW1TdGFydFggPSB4IC0gc2xhc2hMZW5ndGgvMiArIDI7IC8vIEJvdHRvbS1sZWZ0IG9mIHNsYXNoICsgb2Zmc2V0XG4gICAgY29uc3Qgc3RlbVN0YXJ0WSA9IHkgKyBzbGFzaExlbmd0aC8yOyAgICAgLy8gQm90dG9tIG9mIHNsYXNoXG4gICAgXG4gICAgY29uc3Qgc3RlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd4MScsIHN0ZW1TdGFydFgudG9TdHJpbmcoKSk7XG4gICAgc3RlbS5zZXRBdHRyaWJ1dGUoJ3kxJywgc3RlbVN0YXJ0WS50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgneDInLCBzdGVtU3RhcnRYLnRvU3RyaW5nKCkpO1xuICAgIHN0ZW0uc2V0QXR0cmlidXRlKCd5MicsIChzdGVtU3RhcnRZICsgaGVpZ2h0KS50b1N0cmluZygpKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMwMDAnKTtcbiAgICBzdGVtLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoc3RlbSk7XG5cbiAgICByZXR1cm4geyB4OiBzdGVtU3RhcnRYLCB0b3BZOiBzdGVtU3RhcnRZLCBib3R0b21ZOiBzdGVtU3RhcnRZICsgaGVpZ2h0IH07XG4gIH1cblxuICAvKipcbiAgICogRHJhdyBmbGFnKHMpIGZvciBhIG5vdGVcbiAgICovXG4gIGRyYXdGbGFnKHN2ZzogU1ZHRWxlbWVudCwgeDogbnVtYmVyLCBzdGFmZkxpbmVZOiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICBjb25zdCBzbGFzaExlbmd0aCA9IDEwO1xuICAgIGNvbnN0IHN0ZW1TdGFydFggPSB4IC0gc2xhc2hMZW5ndGgvMiArIDI7XG4gICAgY29uc3Qgc3RlbUJvdHRvbVkgPSBzdGFmZkxpbmVZICsgc2xhc2hMZW5ndGgvMiArIDI1O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBmbGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG4gICAgICBjb25zdCBmbGFnWSA9IHN0ZW1Cb3R0b21ZIC0gaSAqIDEwO1xuICAgICAgXG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnZCcsIGBNICR7c3RlbVN0YXJ0WH0gJHtmbGFnWX0gUSAke3N0ZW1TdGFydFggLSAxMH0gJHtmbGFnWSAtIDV9ICR7c3RlbVN0YXJ0WCAtIDh9ICR7ZmxhZ1kgLSAxMn1gKTtcbiAgICAgIGZsYWcuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgICAgZmxhZy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG4gICAgICBmbGFnLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG4gICAgICBzdmcuYXBwZW5kQ2hpbGQoZmxhZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gY3JlYXRlIHRleHQgZWxlbWVudHNcbiAgICovXG4gIGNyZWF0ZVRleHQodGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlciwgc2l6ZTogc3RyaW5nLCB3ZWlnaHQ6IHN0cmluZyA9ICdub3JtYWwnKTogU1ZHVGV4dEVsZW1lbnQge1xuICAgIGNvbnN0IHRleHRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAndGV4dCcpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ3gnLCB4LnRvU3RyaW5nKCkpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ3knLCB5LnRvU3RyaW5nKCkpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgJ0FyaWFsLCBzYW5zLXNlcmlmJyk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywgc2l6ZSk7XG4gICAgdGV4dEVsLnNldEF0dHJpYnV0ZSgnZm9udC13ZWlnaHQnLCB3ZWlnaHQpO1xuICAgIHRleHRFbC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgIHRleHRFbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgcmV0dXJuIHRleHRFbDtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgQ2hvcmQgR3JpZCBwbHVnaW4nKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFxRDtBQXlCckQsSUFBcUIsa0JBQXJCLGNBQTZDLHVCQUFPO0FBQUEsRUFDbEQsTUFBTSxTQUFTO0FBQ2IsWUFBUSxJQUFJLDJCQUEyQjtBQUd2QyxTQUFLLG1DQUFtQyxhQUFhLENBQUMsUUFBUSxJQUFJLFFBQVE7QUFDeEUsV0FBSyxnQkFBZ0IsUUFBUSxFQUFFO0FBQUEsSUFDakMsQ0FBQztBQUFBLEVBQ0g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGVBQWUsUUFBMkI7QUFDeEMsVUFBTSxRQUFRLE9BQU8sS0FBSyxFQUFFLE1BQU0sSUFBSTtBQUN0QyxRQUFJLGdCQUFnQjtBQUNwQixVQUFNLFdBQXNCLENBQUM7QUFFN0IsZUFBVyxRQUFRLE9BQU87QUFDeEIsWUFBTSxVQUFVLEtBQUssS0FBSztBQUMxQixVQUFJLENBQUM7QUFBUztBQUdkLFVBQUksU0FBUyxXQUFXLEdBQUc7QUFDekIsY0FBTSxlQUFlLFFBQVEsTUFBTSxhQUFhO0FBQ2hELFlBQUksY0FBYztBQUNoQiwwQkFBZ0IsYUFBYSxDQUFDO0FBQUEsUUFDaEM7QUFBQSxNQUNGO0FBR0EsWUFBTSxTQUFTLEtBQUssYUFBYSxPQUFPO0FBQ3hDLFVBQUksaUJBQTBCLEVBQUUsUUFBUSxDQUFDLEdBQUcsWUFBWSxNQUFNO0FB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
